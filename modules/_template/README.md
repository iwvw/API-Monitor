# æ¨¡å—å¼€å‘æ¨¡æ¿

æœ¬ç›®å½•æä¾›äº†ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ¨¡å—å¼€å‘æ¨¡æ¿ï¼Œç”¨äºå¿«é€Ÿæ‰©å±•é¡¹ç›®åŠŸèƒ½ã€‚

## ğŸ“ æ¨¡å—ç»“æ„è§„èŒƒ

### åç«¯æ¨¡å—ç›®å½• (`modules/{module-name}/`)

```
modules/{module-name}/
â”œâ”€â”€ router.js        # [å¿…é¡»] Express è·¯ç”±å®šä¹‰
â”œâ”€â”€ storage.js       # [å¿…é¡»] æ•°æ®è®¿é—®å±‚ (è‹¥ä½¿ç”¨ JSON å­˜å‚¨å¯åˆå¹¶åˆ° router)
â”œâ”€â”€ models.js        # [å¯é€‰] æ•°æ®æ¨¡å‹ç±» (ç®€å•æ¨¡å—å¯çœç•¥)
â”œâ”€â”€ schema.sql       # [å¯é€‰] æ•°æ®åº“è¡¨å®šä¹‰ (è‹¥ä½¿ç”¨ SQLite)
â”œâ”€â”€ service.js       # [å¯é€‰] å¤–éƒ¨ API è°ƒç”¨å°è£… (æˆ– {module}-api.js)
â””â”€â”€ utils.js         # [å¯é€‰] å·¥å…·å‡½æ•°
```

### å‘½åçº¦å®š

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|------|------|------|
| ç›®å½•å | `{product/feature}-api` | `zeabur-api`, `totp-api` |
| è·¯ç”±æ–‡ä»¶ | `router.js` | ç»Ÿä¸€å‘½å |
| æœåŠ¡æ–‡ä»¶ | `service.js` æˆ– `{module}-api.js` | `koyeb-api.js` |
| å­˜å‚¨æ–‡ä»¶ | `storage.js` | ç»Ÿä¸€å‘½å |
| æ¨¡å‹æ–‡ä»¶ | `models.js` | ç»Ÿä¸€å‘½å |

âš ï¸ **ä¾‹å¤–æƒ…å†µ**ï¼š

- `server-management` å’Œ `cloudflare-dns` æ˜¯å†å²é—ç•™å‘½åï¼Œæš‚ä¸é‡å‘½å

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åç«¯éƒ¨åˆ† (Backend)

1. **å¤åˆ¶æ¨¡æ¿**: å¤åˆ¶ `modules/_template` æ–‡ä»¶å¤¹å¹¶é‡å‘½åä¸ºä½ çš„æ¨¡å—å (å¦‚ `my-service-api`)ã€‚

2. **é…ç½®æ•°æ®åº“**:
   - ä¿®æ”¹ `schema.sql`ï¼Œå®šä¹‰è¡¨ç»“æ„
   - åœ¨ `src/db/database.js` æ·»åŠ è¡¨åˆå§‹åŒ–é€»è¾‘

3. **å®šä¹‰æ¨¡å‹**:
   - ä¿®æ”¹ `models.js`ï¼Œå°† `{{module_name}}` æ›¿æ¢ä¸ºå®é™…è¡¨å
   - åœ¨ `src/db/models/index.js` å¯¼å‡ºæ–°æ¨¡å‹

4. **å®ç°å­˜å‚¨å±‚**: ä¿®æ”¹ `storage.js` ä¸­çš„é€»è¾‘

5. **å®ç° API æœåŠ¡**: åœ¨ `service.js` ä¸­å®ç°ä¸å¤–éƒ¨ API çš„äº¤äº’

6. **æ³¨å†Œè·¯ç”±**:
   - ä¿®æ”¹ `router.js` ä¸­çš„è·¯ç”±å®šä¹‰
   - åœ¨ `src/routes/index.js` çš„ `moduleRouteMap` æ·»åŠ æ˜ å°„

### 2. å‰ç«¯éƒ¨åˆ† (Frontend)

1. **æ ·å¼**: å¤åˆ¶ `src/css/template.css` ä¸º `src/css/{module}.css`

2. **æ¨¡æ¿**: å¤åˆ¶ `src/templates/template.html` ä¸º `src/templates/{module}.html`

3. **é€»è¾‘**: å¤åˆ¶ `src/js/modules/template.js` ä¸º `src/js/modules/{module}.js`

4. **å¯¼èˆª**: åœ¨ `src/index.html` ä¾§è¾¹æ æ·»åŠ å¯¼èˆªé“¾æ¥

---

## ğŸ”¤ å ä½ç¬¦æ›¿æ¢

åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­ï¼Œå…¨å±€æ›¿æ¢ä»¥ä¸‹å ä½ç¬¦ï¼š

| å ä½ç¬¦ | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `{{module_name}}` | æ•°æ®åº“è¡¨å (ä¸‹åˆ’çº¿) | `my_service` |
| `{{ModuleName}}` | ç±»å (å¤§é©¼å³°) | `MyService` |
| `{{module_prefix}}` | ID å‰ç¼€ | `ms` |
| `{{MODULE_ENV_VAR}}` | ç¯å¢ƒå˜é‡å | `MY_SERVICE_TOKEN` |
| `{{module_title}}` | ä¸­æ–‡æ ‡é¢˜ | `æˆ‘çš„æœåŠ¡` |

---

## âœ… é›†æˆæ£€æŸ¥æ¸…å•

- [ ] `schema.sql` å·²æ‰§è¡Œ (æ•°æ®åº“è¡¨å·²åˆ›å»º)
- [ ] `src/db/models/index.js` å·²å¯¼å‡ºæ–°æ¨¡å‹
- [ ] `src/routes/index.js` å·²æ³¨å†Œè·¯ç”±æ˜ å°„
- [ ] `src/js/main.js` å·²æ··å…¥å‰ç«¯æ–¹æ³•
- [ ] `src/index.html` å·²æ·»åŠ å¯¼èˆªé¡¹ã€CSS å’Œ HTML æ¨¡æ¿
