<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Monitor</title>
  <link rel="icon" type="image/png" href="/logo.png">
  <link rel="shortcut icon" href="/logo.png">
  <link rel="icon" href="/logo.png" sizes="32x32">
  <meta name="msapplication-TileImage" content="/logo.png">
  <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css">

  <!-- xterm.js - SSH Terminal -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.min.css">
  <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-web-links@0.9.0/lib/xterm-addon-web-links.min.js"></script>

  <!-- Custom Styles - Modularized CSS -->
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/projects.css">
  <link rel="stylesheet" href="/css/modals.css">
  <link rel="stylesheet" href="/css/dns.css">
  <link rel="stylesheet" href="/css/tables.css">
  <link rel="stylesheet" href="/css/tabs.css">
  <link rel="stylesheet" href="/css/settings.css">
  <link rel="stylesheet" href="/css/logs.css">
  <link rel="stylesheet" href="/css/transitions.css">
  <link rel="stylesheet" href="/css/server.css">
  <link rel="stylesheet" href="/css/antigravity.css">
  <link rel="stylesheet" href="/css/gemini-cli.css">
  <link rel="stylesheet" href="/css/login.css">
</head>

<body>
  <!-- Ëá™ÂÆö‰πâ CSS -->
  <style id="custom-css"></style>
  <style>
    [v-cloak] {
      display: none !important;
    }
  </style>

  <div id="app" v-cloak>
    <!-- ËÆ§ËØÅÊ£ÄÊü•Âä†ËΩΩÁä∂ÊÄÅ -->
    <div v-if="isCheckingAuth" class="auth-loading">
      <div class="auth-loading-content">
        <div class="modern-loader"></div>
        <div class="loading-text">Antigravity</div>
      </div>
    </div>

    <!-- È¶ñÊ¨°ËÆæÁΩÆÂØÜÁ†ÅÁïåÈù¢ -->
    <div v-if="!isCheckingAuth && showSetPasswordModal" class="auth-screen">
      <div class="auth-card">
        <div class="auth-header">
          <div class="auth-logo">
            <i class="fas fa-rocket"></i>
          </div>
          <h1>ÂºÄÂêØÊñ∞ÊóÖÁ®ã</h1>
          <p>ËØ∑‰∏∫ÊÇ®ÁöÑÁÆ°ÁêÜÂêéÂè∞ËÆæÁΩÆÂàùÂßãÂØÜÁ†Å</p>
        </div>
        <div class="auth-body">
          <div class="auth-input-group">
            <i class="fas fa-key input-icon"></i>
            <input v-model="setPassword" type="password" class="auth-input" placeholder="ËÆæÁΩÆÊñ∞ÂØÜÁ†Å (6‰Ωç‰ª•‰∏ä)"
              autocomplete="new-password" @keyup.enter="setAdminPassword" />
          </div>
          <div class="auth-input-group">
            <i class="fas fa-check-double input-icon"></i>
            <input v-model="setPasswordConfirm" type="password" class="auth-input" placeholder="ÂÜçÊ¨°Á°ÆËÆ§ÂØÜÁ†Å"
              autocomplete="new-password" @keyup.enter="setAdminPassword" />
          </div>
          <div v-if="setPasswordError" class="auth-error-msg">
            <i class="fas fa-info-circle"></i> {{ setPasswordError }}
          </div>
          <button @click="setAdminPassword" class="auth-primary-btn">
            <span>ÂºÄÂßã‰ΩøÁî®</span>
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- ÁôªÂΩïÁïåÈù¢ -->
    <div v-if="!isCheckingAuth && showLoginModal" class="auth-screen">
      <div class="auth-card">
        <div class="auth-header">
          <div class="auth-logo login-logo">
            <i class="fas fa-shield-halved"></i>
          </div>
          <h1>Ê¨¢ËøéÂõûÊù•</h1>
          <p>Ë∫´‰ªΩÈ™åËØÅ‰ª•ËÆøÈóÆÁõëÊéßÈù¢Êùø</p>
        </div>
        <div class="auth-body">
          <div class="auth-input-group">
            <i class="fas fa-lock input-icon"></i>
            <input v-model="loginPassword" type="password" class="auth-input" placeholder="ËØ∑ËæìÂÖ•ÁÆ°ÁêÜÂëòÂØÜÁ†Å"
              autocomplete="current-password" @keyup.enter="verifyPassword" />
          </div>
          <div v-if="loginError" class="auth-error-msg">
            <i class="fas fa-exclamation-triangle"></i> {{ loginError }}
          </div>
          <button @click="verifyPassword" class="auth-primary-btn">
            <span>Á´ãÂç≥ËøõÂÖ•</span>
            <i class="fas fa-sign-in-alt"></i>
          </button>
        </div>
        <div class="auth-footer-decoration">
          <div class="circle c1"></div>
          <div class="circle c2"></div>
        </div>
      </div>
    </div>

    <div v-if="isAuthenticated" class="container">
      <!-- È°µÈù¢Â§¥ÈÉ® - Ê®°ÂùóÊéßÂà∂ÂíåËÆæÁΩÆ -->
      <div class="header">
        <div class="title">
          <i class="fas fa-chart-line"></i>
          API Monitor
        </div>
        <div style="display: flex; gap: 10px; align-items: center;">
          <!-- ËÆæÁΩÆÊåâÈíÆ -->
          <button class="btn-icon-refined" @click="showSettingsModal = true" title="Á≥ªÁªüËÆæÁΩÆ">
            <i class="fas fa-cog"></i>
          </button>
        </div>
      </div>

      <!-- ‰∏ªÊ†áÁ≠æÈ°µÂØºËà™ -->
      <div class="main-tabs">
        <template v-for="module in moduleOrder" :key="module">
          <button v-if="moduleVisibility[module]" class="main-tab" :class="[
              { active: mainActiveTab === module },
              module === 'zeabur' ? 'zeabur-tab' : '',
              module === 'dns' ? 'dns-tab' : '',
              module === 'openai' ? 'openai-tab' : '',
              module === 'server' ? 'server-tab' : '',
              module === 'antigravity' ? 'antigravity-tab' : '',
              module === 'gemini-cli' ? 'gemini-cli-tab' : ''
            ]" @click="handleTabSwitch(module)">
            <i class="fas" :class="getModuleIcon(module)"></i>
            <span> {{ getModuleName(module) }}</span>
          </button>
        </template>
      </div>

      <!-- ==================== Zeabur ÁõëÊéßÈÉ®ÂàÜ ==================== -->
      <div v-if="mainActiveTab === 'zeabur'" class="tab-content zeabur-sec-tab" :class="getTabAnimationClass('zeabur')">
        <!-- Zeabur Â≠êÊ†áÁ≠æÈ°µ -->
        <div class="sec-tabs">
          <button class="tab-btn" :class="{ active: zeaburCurrentTab === 'monitor' }"
            @click="zeaburCurrentTab = 'monitor'">
            <i class="fas fa-chart-line"></i> ÊúçÂä°ÁõëÊéß
          </button>
          <button class="tab-btn" :class="{ active: zeaburCurrentTab === 'accounts' }"
            @click="zeaburCurrentTab = 'accounts'">
            <i class="fas fa-users"></i> Ë¥¶Âè∑ÁÆ°ÁêÜ
          </button>
          <button class="tab-btn" :class="{ active: zeaburCurrentTab === 'settings' }"
            @click="zeaburCurrentTab = 'settings'">
            <i class="fas fa-cog"></i> Ê®°ÂùóÈÖçÁΩÆ
          </button>
        </div>

        <!-- ÊúçÂä°ÁõëÊéßÊ†áÁ≠æÈ°µ -->
        <div v-if="zeaburCurrentTab === 'monitor'" class="sub-tab-content quick-fade-in">
          <div class="info-card">
            <div class="info-card-title">üí° ‰ΩøÁî®ËØ¥Êòé</div>
            <div class="info-card-content">
              Êï∞ÊçÆÊØè30ÁßíËá™Âä®Âà∑Êñ∞
            </div>
          </div>

          <div class="controls" style="justify-content: space-between;">
            <div style="display: flex; gap: 10px; align-items: center;">
              <button class="btn btn-primary" @click="fetchData" :disabled="loading">
                <i class="fas fa-sync-alt"></i>
                {{ loading ? 'Êï∞ÊçÆÊõ¥Êñ∞' : 'Âà∑Êñ∞Êï∞ÊçÆ' }}
              </button>
              <button class="btn btn-secondary" @click="toggleDataRefresh"
                :class="dataRefreshPaused ? 'btn-success' : 'btn-warning'">
                <i class="fas" :class="dataRefreshPaused ? 'fa-play' : 'fa-pause'"></i>
                {{ dataRefreshPaused ? 'ÁªßÁª≠Êõ¥Êñ∞' : 'ÊöÇÂÅúÊõ¥Êñ∞' }}
              </button>
              <button class="btn btn-danger" @click="clearCache">
                <i class="fas fa-trash"></i>
                Ê∏ÖÈô§ÁºìÂ≠ò
              </button>
            </div>
            <div class="refresh-info">
              <div class="last-update">{{ refreshCountdown }} ÁßíÂêéÂà∑Êñ∞</div>
              <div class="refresh-progress">
                <div class="refresh-progress-bar" :style="{ width: refreshProgress + '%' }"></div>
              </div>
            </div>
          </div>

          <div v-if="accounts.length > 0" class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon-wrapper"
                style="background: rgba(var(--primary-rgb), 0.1); color: var(--primary-color);">
                <i class="fas fa-user-circle"></i>
              </div>
              <div class="stat-content">
                <div class="stat-label">Ë¥¶Âè∑Êï∞</div>
                <div class="stat-value">{{ accounts.length }}</div>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon-wrapper"
                style="background: rgba(var(--primary-rgb), 0.1); color: var(--primary-color);">
                <i class="fas fa-folder-open"></i>
              </div>
              <div class="stat-content">
                <div class="stat-label">È°πÁõÆÊÄªÊï∞</div>
                <div class="stat-value">{{ totalProjects }}</div>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon-wrapper"
                style="background: rgba(var(--primary-rgb), 0.1); color: var(--primary-color);">
                <i class="fas fa-cube"></i>
              </div>
              <div class="stat-content">
                <div class="stat-label">ÊúçÂä°ÊÄªÊï∞</div>
                <div class="stat-value">{{ totalServices }}</div>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon-wrapper" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                <i class="fas fa-play-circle"></i>
              </div>
              <div class="stat-content">
                <div class="stat-label">ËøêË°å‰∏≠</div>
                <div class="stat-value success">{{ runningServices }}</div>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon-wrapper" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                <i class="fas fa-dollar-sign"></i>
              </div>
              <div class="stat-content">
                <div class="stat-label">ÊÄªË¥πÁî®</div>
                <div class="stat-value warning">${{ totalCost.toFixed(2) }}</div>
              </div>
            </div>
          </div>

          <div v-if="loading && accounts.length === 0" class="loading">
            ‚ö° Ê≠£Âú®Âä†ËΩΩÊï∞ÊçÆ...
          </div>

          <div v-else>
            <div v-for="account in accounts" :key="account.name" class="account-card"
              :class="{ 'expanded': isAccountExpanded(account.name) }" style="margin-bottom: 12px;">
              <div class="account-header" @click="toggleAccount(account.name)">
                <div class="account-info">
                  <span style="font-size: 20px; transition: transform 0.3s; display: inline-flex; align-items: center;"
                    :style="{ 
          /* ‰øùÊåÅ span ‰Ωú‰∏∫‰∏Ä‰∏™ÂÆπÂô®Ôºå‰∏çÊóãËΩ¨ÊàñÊóãËΩ¨Âà∞ÁâπÂÆöËßíÂ∫¶ */
          transform: isAccountExpanded(account.name) ? 'rotate(0deg)' : 'rotate(0deg)' 
      }">

                    <i class="fas fa-chevron-right toggle-icon" :style="{ 
           transition: 'transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)', 
           // ÈÄªËæëË∞ÉÊï¥Ôºö
           // Â±ïÂºÄ (true) -> 0deg (Âêë‰∏ã)
           // Êî∂Ëµ∑ (false) -> 90deg (ÂêëÂè≥)
           transform: isAccountExpanded(account.name) ? 'rotate(90deg)' : 'rotate(0deg)' 
       }">
                    </i>
                  </span>
                  <div>
                    <div class="account-name" v-if="!account.isEditingName"
                      @dblclick.stop="startEditAccountName(account)">
                      {{ account.name }}
                    </div>
                    <div v-else class="account-name-edit" @click.stop>
                      <input v-model="account.editingName" @keyup.enter="saveAccountName(account)"
                        @keyup.esc="cancelEditAccountName(account)" @blur="saveAccountName(account)" class="edit-input"
                        ref="accountNameInput" style="width: 150px;" />
                      <button @click.stop="cancelEditAccountName(account)" class="cancel-btn" title="ÂèñÊ∂à"
                        style="margin-left: 4px;">
                        ‚úñÔ∏è
                      </button>
                    </div>
                    <div v-if="account.data" class="account-email">
                      {{ maskEmail(account.data.email) || account.data.username }}
                    </div>
                  </div>
                </div>
                <div class="account-balance">
                  <div style="display: flex; flex-direction: column; gap: 3px;">
                    <div class="balance-card credit-balance-card">
                      <div class="balance-icon">üí∞</div>
                      <div class="balance-amount"
                        :class="account.data?.credit ? getBalanceClass(account.data.credit) : ''">
                        <span v-if="account.data?.credit">${{ (account.data.credit / 100).toFixed(2) }}</span>
                        <span v-else>-</span>
                      </div>
                    </div>
                    <div class="balance-card ai-balance-card">
                      <div class="balance-icon">ü§ñ</div>
                      <div class="balance-amount">
                        {{ account.aihub && account.aihub.balance ? '$' + (account.aihub.balance / 100000).toFixed(2) :
                        'Êó†'
                        }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div v-if="account.error" class="error">
                ‚ùå ÈîôËØØ: {{ account.error }}
              </div>

              <div class="account-card-body">
                <div v-if="account.projects" class="projects-grid"
                  :class="{ 'collapsed': !isAccountExpanded(account.name) }">
                  <div v-for="project in account.projects" :key="project._id" :id="'proj-' + project._id"
                    class="project-card">
                    <div class="project-header">
                      <div class="project-name-wrapper">
                        <span class="project-name-icon">üì¶</span>
                        <span v-if="!project.isEditing" class="project-name-text">{{ project.name }}</span>
                        <input v-else v-model="project.editingName" @keyup.enter="saveProjectName(account, project)"
                          @keyup.esc="cancelEditProjectName(project)" @blur="saveProjectName(account, project)"
                          class="project-name-input" ref="projectNameInput" />
                      </div>
                      <div class="project-actions">
                        <button v-if="!project.isEditing" @click="deleteProject(account, project)"
                          class="project-delete-btn" title="Âà†Èô§È°πÁõÆ">
                          <i class="fas fa-trash"></i>
                        </button>
                        <button v-if="!project.isEditing" @click="startEditProjectName(project)"
                          class="project-edit-btn" title="ÈáçÂëΩÂêçÈ°πÁõÆ">
                          <i class="fas fa-pen"></i>
                        </button>
                        <button v-if="project.isEditing" @click="cancelEditProjectName(project)"
                          class="project-cancel-btn" title="ÂèñÊ∂à">
                          <i class="fas fa-times"></i>
                        </button>
                      </div>
                    </div>
                    <div class="project-mini-cards">
                      <div class="mini-card region-card">
                        <span class="mini-card-icon">Âú∞Âå∫üìç</span>
                        <span class="mini-card-value">{{ formatRegion(project.region) }}</span>
                      </div>
                      <div class="mini-card cost-card">
                        <span class="mini-card-icon">Â∑≤Áî®üí∞</span>
                        <span class="mini-card-value">${{ formatCost(project.cost) }}</span>
                      </div>
                    </div>
                    <div class="services-container">
                      <div v-for="service in project.services" :key="service._id" :id="'service-' + service._id"
                        :class="['service-item', service.status.toLowerCase()]">
                        <div class="service-header">
                          <div class="service-name-container">
                            <span v-if="!service.isEditing" class="service-name" :title="service.name">
                              {{ service.name }}
                            </span>
                            <input v-else v-model="service.editingName"
                              @keyup.enter="saveServiceName(account, project, service)"
                              @keyup.esc="cancelEditServiceName(service)"
                              @blur="saveServiceName(account, project, service)" class="service-name-input" />
                            <button v-if="!service.isEditing" @click="startEditServiceName(service)"
                              class="service-edit-btn" title="ÈáçÂëΩÂêçÊúçÂä°">
                              <i class="fas fa-pen"></i>
                            </button>
                            <button v-else @click="cancelEditServiceName(service)" class="service-cancel-btn"
                              title="ÂèñÊ∂à">
                              <i class="fas fa-times"></i>
                            </button>
                          </div>
                          <div :class="['service-status', service.status.toLowerCase()]">
                            {{ service.status === 'RUNNING' ? 'ËøêË°å‰∏≠' : service.status === 'SUSPENDED' ? 'Â∑≤ÊöÇÂÅú' :
                            service.status
                            }}
                          </div>
                        </div>
                        <div v-if="service.resourceLimit" class="service-info">
                          <span style="display: inline-flex; align-items: center; gap: 4px; margin-right: 12px;">
                            <i class="fas fa-microchip"></i>
                            {{ service.resourceLimit.cpu }}m
                          </span>
                          <span style="display: inline-flex; align-items: center; gap: 4px;">
                            <i class="fas fa-memory"></i>
                            {{ service.resourceLimit.memory }}MB
                          </span>
                        </div>
                        <div class="service-actions">
                          <button v-if="service.status === 'RUNNING'" @click="pauseService(account, project, service)"
                            class="service-btn btn-pause">
                            <i class="fas fa-pause"></i>
                            ÊöÇÂÅú
                          </button>
                          <button @click="restartService(account, project, service)" class="service-btn btn-restart">
                            <i class="fas fa-redo"></i>
                            {{ service.status === 'SUSPENDED' ? 'ÂêØÂä®' : 'ÈáçÂêØ' }}
                          </button>
                          <button @click="showServiceLogs(account, project, service)" class="service-btn btn-logs">
                            <i class="fas fa-file-alt"></i>
                            Êó•Âøó
                          </button>
                          <button @click="deleteService(account, project, service)" class="service-btn btn-delete">
                            <i class="fas fa-trash"></i>
                            Âà†Èô§
                          </button>
                        </div>
                      </div>
                      <div v-if="project.services.length === 0" class="empty-state">
                        ÊöÇÊó†ÊúçÂä°
                      </div>
                    </div>

                    <!-- È°πÁõÆÂüüÂêç -->
                    <div v-if="getProjectDomains(project).length > 0" class="domains-container">
                      <a v-for="domainInfo in getProjectDomains(project)" :key="domainInfo.domain"
                        :href="'https://' + domainInfo.domain" target="_blank" class="domain-link">
                        <i class="fas fa-globe"></i>
                        <span>{{ domainInfo.domain }}</span>
                        <span v-if="domainInfo.isGenerated" class="domain-badge">Ëá™Âä®</span>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div v-if="!loading && accounts.length === 0" class="error">
              Êú™ÈÖçÁΩÆË¥¶Âè∑ÊàñÊó†Ê≥ïËé∑ÂèñÊï∞ÊçÆ„ÄÇËØ∑Ê£ÄÊü• .env ÈÖçÁΩÆÊñá‰ª∂„ÄÇ
            </div>
          </div>
        </div>
        <!-- ÊúçÂä°ÁõëÊéßÊ†áÁ≠æÈ°µÁªìÊùü -->

        <!-- Ë¥¶Âè∑ÁÆ°ÁêÜÊ†áÁ≠æÈ°µ -->
        <div v-if="zeaburCurrentTab === 'accounts'" class="sub-tab-content quick-fade-in">
          <div class="panel">
            <div class="panel-header">
              <div class="panel-title"></div>
              <div style="display: flex; gap: 8px;">
                <button class="btn btn-success" style="padding: 6px 12px;" @click="showAddZeaburAccountModal = true">
                  <i class="fas fa-plus"></i> Ê∑ªÂä†Ë¥¶Âè∑
                </button>
                <button class="btn btn-secondary" @click="exportAllAccounts" style="padding: 6px 12px;">
                  <i class="fas fa-upload"></i> ÂØºÂá∫
                </button>
                <button class="btn btn-secondary" @click="importAllAccounts" style="padding: 6px 12px;">
                  <i class="fas fa-download"></i> ÂØºÂÖ•
                </button>
              </div>
            </div>

            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ÂêçÁß∞</th>
                    <th>ÈÇÆÁÆ±</th>
                    <th class="text-center">‰ΩôÈ¢ù</th>
                    <th class="text-center">Áä∂ÊÄÅ</th>
                    <th class="text-center" style="width: 120px;">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(account, index) in managedAccounts" :key="'local-' + index">
                    <td>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-rocket"
                          style="font-size: 12px; color: var(--zeabur-primary); opacity: 0.7;"></i>
                        <strong>{{ account.name }}</strong>
                      </div>
                    </td>
                    <td>{{ account.email || '-' }}</td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span v-if="account.balance !== null && account.balance !== undefined" class="log-duration">
                          ${{ account.balance.toFixed(2) }}
                        </span>
                        <span v-else style="color: var(--text-tertiary);">-</span>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="ag-status-badge"
                          :class="account.status === 'active' ? 'ag-status-online' : 'ag-status-unknown'">
                          {{ account.status === 'active' ? 'Ê≠£Â∏∏' : 'Êú™Áü•' }}
                        </span>
                      </div>
                    </td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <button class="btn btn-icon-refined" @click="removeAccount(index)" title="Âà†Èô§Ë¥¶Âè∑"
                          style="color: var(--danger-color);">
                          <i class="fas fa-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                  <!-- ÊòæÁ§∫‰∏ªÊú∫ÈÖçÁΩÆÁöÑË¥¶Âè∑ÔºàÂè™ËØªÔºâ -->
                  <tr v-if="managedAccounts.length === 0 && accounts.length > 0" v-for="account in accounts"
                    :key="'server-' + account.name">
                    <td>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-server"
                          style="font-size: 12px; color: var(--text-tertiary); opacity: 0.7;"></i>
                        <strong>{{ account.name }}</strong>
                      </div>
                    </td>
                    <td>{{ account.data?.email || '-' }}</td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span v-if="account.data?.credit" class="log-duration">
                          ${{ (account.data.credit / 100).toFixed(2) }}
                        </span>
                        <span v-else style="color: var(--text-tertiary);">-</span>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="ag-status-badge ag-status-unknown">‰∏ªÊú∫ÈÖçÁΩÆ</span>
                      </div>
                    </td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <span style="font-size: 11px; color: var(--text-tertiary);">
                          <i class="fas fa-lock" style="margin-right: 4px;"></i>Âè™ËØª
                        </span>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div v-if="managedAccounts.length === 0 && accounts.length === 0" class="empty-state">
                <i class="fas fa-user-plus" style="font-size: 48px; margin-bottom: 16px;"></i>
                <div>ÊöÇÊó†Ë¥¶Âè∑ÔºåÁÇπÂáª‰∏äÊñπÊåâÈíÆÊ∑ªÂä†</div>
              </div>
            </div>
          </div>

          <!-- ÊâπÈáèÊ∑ªÂä† -->
          <div class="panel" style="margin-top: 16px;">
            <div class="panel-header">
              <div class="panel-title">ÊâπÈáèÊ∑ªÂä†Ë¥¶Âè∑</div>
            </div>
            <div>
              <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 12px;">
                ÊØèË°å‰∏Ä‰∏™Ë¥¶Âè∑ÔºåÊ†ºÂºèÔºö<code>ÂêçÁß∞:Token</code> Êàñ <code>ÂêçÁß∞ÔºöToken</code> Êàñ <code>ÂêçÁß∞(Token)</code> Êàñ
                <code>ÂêçÁß∞ÔºàTokenÔºâ</code>
              </p>
              <div style="position: relative; min-height: 150px;">
                <div
                  style="width: 100%; min-height: 150px; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-family: var(--font-mono); white-space: pre-wrap; word-break: break-all; pointer-events: none; color: var(--text-primary); line-height: 1.5; background-color: var(--input-bg);">
                  {{ maskedBatchAccounts }}</div>
                <textarea v-model="batchAccounts" @input="updateBatchDisplay" placeholder="ÊØèË°å‰∏Ä‰∏™Ë¥¶Âè∑ÔºåÊ†ºÂºèÔºöË¥¶Âè∑ÂêçÁß∞:API_Token"
                  class="form-textarea"
                  style="position: absolute; top: 0; left: 0; color: transparent; caret-color: var(--text-primary); background: transparent; line-height: 1.5; min-height: 150px;"></textarea>
              </div>
              <div v-if="batchAddError" class="form-error" style="margin-top: 8px;">{{ batchAddError }}</div>
              <div v-if="batchAddSuccess" class="form-success" style="margin-top: 8px;">{{ batchAddSuccess }}</div>
              <button class="btn btn-primary" @click="batchAddAccounts" :disabled="addingAccount"
                style="width: 100%; margin-top: 12px;">
                {{ addingAccount ? 'Ê∑ªÂä†‰∏≠...' : 'ÊâπÈáèÊ∑ªÂä†' }}
              </button>
            </div>
          </div>
        </div>
        <!-- Ë¥¶Âè∑ÁÆ°ÁêÜÊ†áÁ≠æÈ°µÁªìÊùü -->

        <!-- Ê®°ÂùóÈÖçÁΩÆÊ†áÁ≠æÈ°µ -->

        <div v-if="zeaburCurrentTab === 'settings'" class="sub-tab-content quick-fade-in">

          <div class="panel">

            <div class="panel-header">

              <!-- <div class="panel-title">Ê®°ÂùóËÆæÁΩÆ</div> -->

              <div style="display: flex; gap: 8px;">

                <button class="btn btn-primary" @click="saveZeaburSettings" style="padding: 6px 12px;">

                  <i class="fas fa-save"></i> ‰øùÂ≠ò

                </button>

              </div>

            </div>



            <div style="padding: 6px;">
              <div class="form-group" style="margin-bottom: 0;">
                <label class="form-label" style="margin-bottom: 16px;">Ëá™Âä®Âà∑Êñ∞Èó¥Èöî[>5Áßí]</label>
                <input type="number" :value="zeaburRefreshInterval / 1000"
                  @input="zeaburRefreshInterval = Math.max(5, parseInt($event.target.value)) * 1000" class="form-input"
                  min="5" placeholder="30" style="max-width: 200px;" />
              </div>

            </div>

          </div>

        </div>

        <!-- Ê∑ªÂä† Zeabur Ë¥¶Âè∑Ê®°ÊÄÅÊ°Ü -->
        <div v-if="showAddZeaburAccountModal" class="modal-overlay" @keydown.esc="showAddZeaburAccountModal = false"
          @keydown.enter="addAccountToList" tabindex="-1">
          <div class="modal">
            <div class="modal-header">
              <div class="modal-title"></div>
              <button class="modal-close" @click="showAddZeaburAccountModal = false"><i
                  class="fas fa-times"></i></button>
            </div>

            <div class="form-group">
              <label class="form-label">Ë¥¶Âè∑ÂêçÁß∞ *</label>
              <input v-model="newAccount.name" class="form-input" placeholder="‰æãÂ¶Ç: ÊàëÁöÑË¥¶Âè∑" />
            </div>

            <div class="form-group">
              <label class="form-label">API Token *</label>
              <input v-model="newAccount.token" type="password" class="form-input" placeholder="sk-xxxxxxxxxxxxxxxx" />
              <div class="form-help">Âú® Zeabur ÊéßÂà∂Âè∞ÁöÑËÆæÁΩÆ‰∏≠ÂàõÂª∫ API Token</div>
            </div>

            <div v-if="addAccountError" class="form-error">{{ addAccountError }}</div>
            <div v-if="addAccountSuccess" class="form-success">{{ addAccountSuccess }}</div>

            <div style="display: flex; gap: 12px; margin-top: 20px;">
              <button class="btn btn-primary" @click="addAccountToList" :disabled="addingAccount" style="flex: 1;">
                {{ addingAccount ? 'È™åËØÅ‰∏≠...' : 'Ê∑ªÂä†Ë¥¶Âè∑' }}
              </button>
              <button class="btn btn-secondary" @click="showAddZeaburAccountModal = false" style="flex: 1;">ÂèñÊ∂à</button>
            </div>
          </div>
        </div>

      </div>
      <!-- ==================== Zeabur ÁõëÊéßÈÉ®ÂàÜÁªìÊùü ==================== -->

      <!-- ==================== DNS ÁÆ°ÁêÜÈÉ®ÂàÜ ==================== -->
      <div v-if="mainActiveTab === 'dns'" class="tab-content dns-tab-content" :class="getTabAnimationClass('dns')">
        <!-- DNS Â≠êÊ†áÁ≠æÈ°µ -->
        <div class="sec-tabs">
          <button class="tab-btn" :class="{ active: dnsCurrentTab === 'dns' }" @click="dnsCurrentTab = 'dns'">
            <i class="fas fa-globe"></i> DNS ËÆ∞ÂΩï
          </button>
          <button class="tab-btn" :class="{ active: dnsCurrentTab === 'accounts' }" @click="dnsCurrentTab = 'accounts'">
            <i class="fas fa-users"></i> Ë¥¶Âè∑ÁÆ°ÁêÜ
          </button>
          <!-- <button class="tab-btn" :class="{ active: dnsCurrentTab === 'templates' }"
            @click="dnsCurrentTab = 'templates'">
            <i class="fas fa-copy"></i> Ê®°Êùø
          </button> -->
        </div>

        <!-- DNS ËÆ∞ÂΩïÊ†áÁ≠æÈ°µ -->
        <div v-if="dnsCurrentTab === 'dns'" class="sub-tab-content quick-fade-in">
          <!-- Ë¥¶Âè∑ÈÄâÊã© - Âç°ÁâáÂºè -->
          <div style="margin-bottom: 16px;">
            <!-- <label style="font-weight: 500; margin-bottom: 12px; display: block;">ÈÄâÊã©Ë¥¶Âè∑Ôºö</label> -->
            <div class="zones-grid">
              <div v-for="acc in dnsAccounts" :key="acc.id" class="zone-card"
                :class="{ active: dnsSelectedAccountId === acc.id }" @click="selectDnsAccount(acc)">
                <div style="flex: 1;">
                  <div class="zone-name">
                    <i class="fas fa-user-circle" style="margin-right: 6px; color: var(--cf-color);"></i>
                    {{ acc.name }}
                  </div>
                  <div class="zone-status" style="font-size: 11px;">{{ acc.email || 'Ë¥¶Âè∑' }}</div>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                  <i v-if="dnsSelectedAccountId === acc.id" class="fas fa-check-circle"
                    style="color: var(--cf-color);"></i>
                  <button v-if="dnsSelectedAccountId === acc.id" class="btn btn-secondary"
                    style="padding: 4px 8px; font-size: 12px;" @click.stop="loadDnsZones" :disabled="dnsLoadingZones">
                    <i class="fas fa-sync-alt" :class="{ 'fa-spin': dnsLoadingZones }"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div v-if="dnsLoadingZones" class="loading">
            <div class="spinner"></div>
            <div style="margin-top: 12px;">Âä†ËΩΩÂüüÂêçÂàóË°®...</div>
          </div>

          <!-- ÂüüÂêçÁΩëÊ†º -->
          <div v-if="dnsSelectedAccountId && dnsZones.length > 0 && !dnsLoadingZones" class="zones-grid">
            <div v-for="zone in dnsZones" :key="zone.id" class="zone-card"
              :class="{ active: dnsSelectedZoneId === zone.id }" @click="selectDnsZone(zone)">
              <div>
                <div class="zone-name">{{ zone.name }}</div>
                <div class="zone-status" :class="zone.status">{{ zone.status }}</div>
              </div>
              <i class="fas fa-chevron-right" style="color: var(--text-tertiary);"></i>
            </div>
          </div>

          <div v-if="dnsSelectedAccountId && dnsZones.length === 0 && !dnsLoadingZones" class="empty-state">
            <i class="fas fa-globe" style="font-size: 48px; margin-bottom: 16px;"></i>
            <div>ËØ•Ë¥¶Âè∑‰∏ãÊ≤°ÊúâÂüüÂêç</div>
          </div>

          <!-- Âø´ÈÄüÂàáÊç¢ -->
          <div v-if="dnsSelectedZoneId" class="quick-switch">
            <i class="fas fa-bolt" style="color: var(--cf-color);"></i>
            <span style="font-weight: 500; white-space: nowrap;">Âø´ÈÄüÂàáÊç¢Ôºö</span>
            <select v-model="dnsQuickSwitchType"
              style="color: #f38020; padding: 6px 10px; border-radius: 4px; border: 1px solid var(--input-border); background: var(--input-bg); min-width: 80px;">
              <option value="A">A</option>
              <option value="AAAA">AAAA</option>
              <option value="CNAME">CNAME</option>
            </select>
            <input v-model="dnsQuickSwitchName" placeholder="ËÆ∞ÂΩïÂêçÁß∞ (Â¶Ç @, www, *)" />
            <input v-model="dnsQuickSwitchContent" placeholder="Êñ∞ÁöÑÂÜÖÂÆπ (IP ÊàñÂüüÂêç)" />
            <button class="btn btn-cf" style="padding: 6px 12px;" @click="dnsQuickSwitch" :disabled="dnsSwitching">
              {{ dnsSwitching ? 'ÂàáÊç¢‰∏≠...' : 'ÂàáÊç¢' }}
            </button>
          </div>

          <!-- DNS ËÆ∞ÂΩïË°®Ê†º -->
          <div v-if="dnsSelectedZoneId" class="panel">
            <div class="panel-header">
              <div class="panel-title"></div>
              <div style="display: flex; gap: 8px;">
                <button class="btn btn-success" style="padding: 6px 12px;" @click="openAddDnsRecordModal">
                  <i class="fas fa-plus"></i> Ê∑ªÂä†
                </button>
                <button v-if="dnsSelectedRecords.length > 0" class="btn btn-danger" style="padding: 6px 12px;"
                  @click="batchDeleteDnsRecords">
                  <i class="fas fa-trash-alt"></i> Âà†Èô§ ({{ dnsSelectedRecords.length }})
                </button>
                <button class="btn btn-secondary" style="padding: 6px 12px;" @click="exportDnsRecords">
                  <i class="fas fa-upload"></i> ÂØºÂá∫
                </button>
                <button class="btn btn-secondary" style="padding: 6px 12px;" @click="importDnsRecords">
                  <i class="fas fa-download"></i> ÂØºÂÖ•
                </button>
                <button class="btn btn-secondary" style="padding: 6px 10px;" @click="loadDnsRecords"
                  :disabled="dnsLoadingRecords">
                  <i class="fas fa-sync-alt" :class="{ 'fa-spin': dnsLoadingRecords }"></i>
                </button>
              </div>
            </div>

            <div v-if="dnsLoadingRecords" class="loading">
              <div class="spinner"></div>
              <div style="margin-top: 12px;">Âä†ËΩΩ‰∏≠...</div>
            </div>

            <div v-else class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th style="width: 5%;" class="text-center">
                      <div class="flex-cell">
                        <input type="checkbox" @change="toggleSelectAllDnsRecords"
                          :checked="dnsSelectedRecords.length === dnsRecords.length && dnsRecords.length > 0"
                          style="width: 16px; height: 16px; cursor: pointer;">
                      </div>
                    </th>
                    <th style="width: 12%;" class="text-center">Á±ªÂûã</th>
                    <th style="width: 18%;">ÂêçÁß∞</th>
                    <th style="width: 28%;">ÂÜÖÂÆπ</th>
                    <th style="width: 8%;" class="text-center">‰ª£ÁêÜ</th>
                    <th style="width: 8%;" class="text-center">TTL</th>
                    <th style="width: 10%;" class="text-center">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="record in dnsRecords" :key="record.id">
                    <td class="text-center">
                      <div class="flex-cell">
                        <input type="checkbox" :value="record.id" v-model="dnsSelectedRecords"
                          style="width: 16px; height: 16px; cursor: pointer;">
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="record-type" :class="record.type">{{ record.type }}</span>
                      </div>
                    </td>
                    <td>
                      <div v-if="!record.isEditingName" class="editable-cell"
                        :title="formatDnsRecordName(record.name) + ' (ÂèåÂáªÁºñËæë)'" @dblclick="startEditDnsName(record)">
                        {{ formatDnsRecordName(record.name) }}
                      </div>
                      <div v-else class="inline-edit-container" @click.stop>
                        <input v-model="record.editingName" class="inline-edit-input" @keyup.enter="saveDnsName(record)"
                          @keyup.esc="cancelEditDnsName(record)" @blur="saveDnsName(record)" ref="dnsNameInput" />
                        <button @click.stop="cancelEditDnsName(record)" class="inline-edit-cancel" title="ÂèñÊ∂à">
                          ‚úñÔ∏è
                        </button>
                      </div>
                    </td>
                    <td>
                      <div v-if="!record.isEditingContent" class="content-truncate editable-cell"
                        :title="record.content + ' (ÂèåÂáªÁºñËæë)'" @dblclick="startEditDnsContent(record)">
                        {{ record.content }}
                      </div>
                      <div v-else class="inline-edit-container" @click.stop>
                        <input v-model="record.editingContent" class="inline-edit-input"
                          @keyup.enter="saveDnsContent(record)" @keyup.esc="cancelEditDnsContent(record)"
                          @blur="saveDnsContent(record)" ref="dnsContentInput" />
                        <button @click.stop="cancelEditDnsContent(record)" class="inline-edit-cancel" title="ÂèñÊ∂à">
                          ‚úñÔ∏è
                        </button>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="proxied-badge" :class="record.proxied ? 'proxied-on' : 'proxied-off'">
                          {{ record.proxied ? 'ÂºÄÂêØ' : 'ÂÖ≥Èó≠' }}
                        </span>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="ttl-badge" style="font-family: var(--font-mono);">{{ record.ttl === 1 ? 'Auto' :
                          record.ttl }}</span>
                      </div>
                    </td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <button class="btn btn-icon-refined" @click="openEditDnsRecordModal(record)" title="ÁºñËæëËÆ∞ÂΩï">
                          <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="deleteDnsRecord(record)" title="Âà†Èô§ËÆ∞ÂΩï"
                          style="color: var(--danger-color);">
                          <i class="fas fa-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div v-if="dnsRecords.length === 0" class="empty-state">ÊöÇÊó† DNS ËÆ∞ÂΩï</div>
            </div>
          </div>
        </div>

        <!-- CF Ë¥¶Âè∑ÁÆ°ÁêÜÊ†áÁ≠æÈ°µ -->
        <div v-if="dnsCurrentTab === 'accounts'" class="sub-tab-content quick-fade-in">
          <div class="panel">
            <div class="panel-header">
              <div class="panel-title"></div>
              <div style="display: flex; gap: 8px;">
                <button class="btn btn-success" style="padding: 6px 12px;" @click="openAddDnsAccountModal">
                  <i class="fas fa-plus"></i> Ê∑ªÂä†Ë¥¶Âè∑
                </button>
                <button class="btn btn-secondary" style="padding: 6px 12px;" @click="exportDnsAccounts">
                  <i class="fas fa-upload"></i> ÂØºÂá∫
                </button>
                <button class="btn btn-secondary" style="padding: 6px 12px;" @click="importDnsAccounts">
                  <i class="fas fa-download"></i> ÂØºÂÖ•
                </button>
              </div>
            </div>

            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ÂêçÁß∞</th>
                    <th>ÈÇÆÁÆ±</th>
                    <th>API Token</th>
                    <th class="text-center">Ê∑ªÂä†Êó∂Èó¥</th>
                    <th class="text-center">ÊúÄÂêé‰ΩøÁî®</th>
                    <th style="width: 150px;" class="text-center">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="acc in dnsAccounts" :key="acc.id">
                    <td>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-user-circle"
                          style="font-size: 12px; color: var(--cf-color); opacity: 0.7;"></i>
                        <strong>{{ acc.name }}</strong>
                      </div>
                    </td>
                    <td>{{ acc.email || '-' }}</td>
                    <td>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <code
                          style="background: var(--bg-secondary); border: 1px solid var(--border-color); padding: 2px 8px; border-radius: 6px; font-size: 11px; font-family: var(--font-mono); color: var(--text-secondary);">
                          {{ acc.showToken ? acc.apiToken : (acc.hasToken ? '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢' : '-') }}
                        </code>
                        <button v-if="acc.hasToken" class="copy-btn" @click="toggleDnsTokenVisibility(acc)"
                          :title="acc.showToken ? 'ÈöêËóè' : 'ÊòæÁ§∫'" style="padding: 2px 4px;">
                          <i :class="acc.showToken ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                        </button>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <div class="log-time">
                          {{ formatDnsDate(acc.createdAt) }}
                        </div>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <div class="log-time" v-if="acc.lastUsed">
                          {{ formatDnsDate(acc.lastUsed) }}
                        </div>
                        <span v-else style="color: var(--text-tertiary); font-size: 11px;">‰ªéÊú™ÊúâÊïàË∞ÉÁî®</span>
                      </div>
                    </td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <button class="btn btn-icon-refined" @click="verifyDnsAccount(acc)" title="È™åËØÅ Token ÊúâÊïàÊÄß">
                          <i class="fas fa-shield-alt"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="editDnsAccount(acc)" title="ÁºñËæëË¥¶Âè∑">
                          <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="deleteDnsAccount(acc)" title="Âà†Èô§Ë¥¶Âè∑"
                          style="color: var(--danger-color);">
                          <i class="fas fa-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div v-if="dnsAccounts.length === 0" class="empty-state">
                <i class="fas fa-key" style="font-size: 48px; margin-bottom: 16px;"></i>
                <div>ÊöÇÊó†Ë¥¶Âè∑ÔºåËØ∑Ê∑ªÂä† Cloudflare API Token</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Ê®°ÊùøÊ†áÁ≠æÈ°µ -->
        <div v-if="dnsCurrentTab === 'templates'">
          <div class="panel">
            <div class="panel-header">
              <div class="panel-title">DNS Ê®°Êùø</div>
              <button class="btn btn-success" style="padding: 6px 12px;" @click="openAddDnsTemplateModal">
                <i class="fas fa-plus"></i> Ê∑ªÂä†Ê®°Êùø
              </button>
            </div>

            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ÂêçÁß∞</th>
                    <th style="width: 60px;">Á±ªÂûã</th>
                    <th>ÂÜÖÂÆπ</th>
                    <th style="width: 70px;" class="text-center">‰ª£ÁêÜ</th>
                    <th>ÊèèËø∞</th>
                    <th style="width: 120px;" class="text-center">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="tpl in dnsTemplates" :key="tpl.id">
                    <td>{{ tpl.name }}</td>
                    <td><span class="record-type" :class="tpl.type">{{ tpl.type }}</span></td>
                    <td>
                      <div class="content-truncate" :title="tpl.content">{{ tpl.content }}</div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="proxied-badge" :class="tpl.proxied ? 'proxied-on' : 'proxied-off'">
                          {{ tpl.proxied ? 'ÂºÄÂêØ' : 'ÂÖ≥Èó≠' }}
                        </span>
                      </div>
                    </td>
                    <td>{{ tpl.description || '-' }}</td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <button class="btn btn-icon-refined" @click="editDnsTemplate(tpl)" title="ÁºñËæëÊ®°Êùø">
                          <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="deleteDnsTemplate(tpl)" title="Âà†Èô§Ê®°Êùø"
                          style="color: var(--danger-color);">
                          <i class="fas fa-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div v-if="dnsTemplates.length === 0" class="empty-state">
                <i class="fas fa-copy" style="font-size: 48px; margin-bottom: 16px;"></i>
                <div>ÊöÇÊó†Ê®°ÊùøÔºåÊ∑ªÂä†Â∏∏Áî® DNS ÈÖçÁΩÆÊ®°Êùø‰ª•Âø´ÈÄüÂ∫îÁî®</div>
              </div>
            </div>
          </div>
        </div>

      </div>
      <!-- DNS modals moved to the end of the container to fix centering issues -->

      <!-- Ê∑ªÂä† CF Ë¥¶Âè∑Ê®°ÊÄÅÊ°Ü -->
      <div v-if="showAddDnsAccountModal" class="modal-overlay" @keydown.esc="showAddDnsAccountModal = false"
        @keydown.enter="addDnsAccount" tabindex="-1">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">Ê∑ªÂä† Cloudflare Ë¥¶Âè∑</div>
            <button class="modal-close" @click="showAddDnsAccountModal = false"><i class="fas fa-times"></i></button>
          </div>

          <div class="form-group">
            <label class="form-label">Ë¥¶Âè∑ÂêçÁß∞ *</label>
            <input v-model="dnsAccountForm.name" class="form-input" placeholder="‰æãÂ¶Ç: ‰∏ªË¥¶Âè∑" />
          </div>

          <div class="form-group">
            <label class="form-label">API Token *</label>
            <input v-model="dnsAccountForm.apiToken" type="password" class="form-input"
              placeholder="Cloudflare API Token" />
            <div class="form-help">Âú® Cloudflare ÊéßÂà∂Âè∞ ‚Üí My Profile ‚Üí API Tokens ÂàõÂª∫</div>
          </div>

          <div class="form-group">
            <label class="form-label">ÈÇÆÁÆ±ÔºàÂèØÈÄâÔºâ</label>
            <input v-model="dnsAccountForm.email" class="form-input" placeholder="Áî®‰∫éÊ†áËØÜË¥¶Âè∑" />
          </div>

          <div v-if="dnsAccountFormError" class="form-error">{{ dnsAccountFormError }}</div>
          <div v-if="dnsAccountFormSuccess" class="form-success">{{ dnsAccountFormSuccess }}</div>

          <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button class="btn btn-primary" @click="addDnsAccount" :disabled="dnsSavingAccount" style="flex: 1;">
              {{ dnsSavingAccount ? 'È™åËØÅ‰∏≠...' : 'Ê∑ªÂä†Ë¥¶Âè∑' }}
            </button>
            <button class="btn btn-secondary" @click="showAddDnsAccountModal = false" style="flex: 1;">ÂèñÊ∂à</button>
          </div>
        </div>
      </div>

      <!-- ÁºñËæë CF Ë¥¶Âè∑Ê®°ÊÄÅÊ°Ü -->
      <div v-if="showEditDnsAccountModal" class="modal-overlay" @keydown.esc="showEditDnsAccountModal = false"
        @keydown.enter="updateDnsAccount" tabindex="-1">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">ÁºñËæë Cloudflare Ë¥¶Âè∑</div>
            <button class="modal-close" @click="showEditDnsAccountModal = false"><i class="fas fa-times"></i></button>
          </div>

          <div class="form-group">
            <label class="form-label">Ë¥¶Âè∑ÂêçÁß∞ *</label>
            <input v-model="dnsEditAccountForm.name" class="form-input" placeholder="‰æãÂ¶Ç: ‰∏ªË¥¶Âè∑" />
          </div>

          <div class="form-group">
            <label class="form-label">API Token *</label>
            <input v-model="dnsEditAccountForm.apiToken" type="password" class="form-input"
              placeholder="Cloudflare API Token" />
            <div class="form-help">ÁïôÁ©∫Ë°®Á§∫‰∏ç‰øÆÊîπ Token</div>
          </div>

          <div class="form-group">
            <label class="form-label">ÈÇÆÁÆ±ÔºàÂèØÈÄâÔºâ</label>
            <input v-model="dnsEditAccountForm.email" class="form-input" placeholder="Áî®‰∫éÊ†áËØÜË¥¶Âè∑" />
          </div>

          <div v-if="dnsEditAccountFormError" class="form-error">{{ dnsEditAccountFormError }}</div>
          <div v-if="dnsEditAccountFormSuccess" class="form-success">{{ dnsEditAccountFormSuccess }}</div>

          <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button class="btn btn-primary" @click="updateDnsAccount" :disabled="dnsSavingAccount" style="flex: 1;">
              {{ dnsSavingAccount ? '‰øùÂ≠ò‰∏≠...' : '‰øùÂ≠ò‰øÆÊîπ' }}
            </button>
            <button class="btn btn-secondary" @click="showEditDnsAccountModal = false" style="flex: 1;">ÂèñÊ∂à</button>
          </div>
        </div>
      </div>

      <!-- Ê∑ªÂä†/ÁºñËæë DNS ËÆ∞ÂΩïÊ®°ÊÄÅÊ°Ü -->
      <div v-if="showDnsRecordModal" class="modal-overlay" @keydown.esc="showDnsRecordModal = false"
        @keydown.enter="saveDnsRecord" tabindex="-1">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">{{ dnsEditingRecord ? 'ÁºñËæë DNS ËÆ∞ÂΩï' : 'Ê∑ªÂä† DNS ËÆ∞ÂΩï' }}</div>
            <button class="modal-close" @click="showDnsRecordModal = false"><i class="fas fa-times"></i></button>
          </div>

          <div style="padding-top: 8px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <div class="form-group">
              <label class="form-label">Á±ªÂûã *</label>
              <select v-model="dnsRecordForm.type" class="form-input" :disabled="!!dnsEditingRecord">
                <option v-for="t in dnsRecordTypes" :key="t" :value="t">{{ t }}</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">ÂêçÁß∞ *</label>
              <input v-model="dnsRecordForm.name" class="form-input" placeholder="@ Êàñ www" />
              <div class="form-help">@ Ë°®Á§∫Ê†πÂüüÂêç</div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">ÂÜÖÂÆπ *</label>
            <input v-model="dnsRecordForm.content" class="form-input" placeholder="IP Âú∞ÂùÄÊàñÁõÆÊ†áÂüüÂêç" />
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
            <div class="form-group" style="margin-bottom: 0;">
              <label class="form-label">TTL</label>
              <select v-model="dnsRecordForm.ttl" class="form-input">
                <option :value="1">Auto</option>
                <option :value="60">1 ÂàÜÈíü</option>
                <option :value="300">5 ÂàÜÈíü</option>
                <option :value="600">10 ÂàÜÈíü</option>
                <option :value="3600">1 Â∞èÊó∂</option>
                <option :value="86400">1 Â§©</option>
              </select>
            </div>
            <div class="form-group" style="margin-bottom: 0;" v-if="canDnsBeProxied(dnsRecordForm.type)">
              <label class="form-label" style="display: flex; align-items: center; justify-content: space-between;">
                CDN ‰ª£ÁêÜ
                <label class="switch" style="transform: scale(0.85); transform-origin: right;">
                  <input type="checkbox" v-model="dnsRecordForm.proxied" />
                  <span class="slider round"></span>
                </label>
              </label>
              <div class="form-help" style="margin-top: 5px; font-size: 10px;">ÈÄöËøá Cloudflare ËæπÁºòÂä†ÈÄü</div>
            </div>
            <div class="form-group" v-if="dnsRecordForm.type === 'MX'" style="margin-bottom: 0;">
              <label class="form-label">‰ºòÂÖàÁ∫ß</label>
              <input v-model.number="dnsRecordForm.priority" type="number" class="form-input" placeholder="10" />
            </div>
          </div>

          <div v-if="dnsRecordFormError" class="form-error">{{ dnsRecordFormError }}</div>

          <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button class="btn btn-primary" @click="saveDnsRecord" :disabled="dnsSavingRecord" style="flex: 1;">
              {{ dnsSavingRecord ? '‰øùÂ≠ò‰∏≠...' : '‰øùÂ≠ò' }}
            </button>
            <button class="btn btn-secondary" @click="showDnsRecordModal = false" style="flex: 1;">ÂèñÊ∂à</button>
          </div>
        </div>
      </div>

      <!-- Ê∑ªÂä†/ÁºñËæëÊ®°ÊùøÊ®°ÊÄÅÊ°Ü -->
      <div v-if="showDnsTemplateModal" class="modal-overlay" @keydown.esc="showDnsTemplateModal = false"
        @keydown.enter="saveDnsTemplate" tabindex="-1">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">{{ dnsEditingTemplate ? 'ÁºñËæëÊ®°Êùø' : 'Ê∑ªÂä†Ê®°Êùø' }}</div>
            <button class="modal-close" @click="showDnsTemplateModal = false"><i class="fas fa-times"></i></button>
          </div>

          <div class="form-group">
            <label class="form-label">Ê®°ÊùøÂêçÁß∞ *</label>
            <input v-model="dnsTemplateForm.name" class="form-input" placeholder="‰æãÂ¶Ç: CDN ËÆ∞ÂΩï" />
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <div class="form-group">
              <label class="form-label">ËÆ∞ÂΩïÁ±ªÂûã *</label>
              <select v-model="dnsTemplateForm.type" class="form-input">
                <option v-for="t in dnsRecordTypes" :key="t" :value="t">{{ t }}</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">TTL</label>
              <select v-model="dnsTemplateForm.ttl" class="form-input">
                <option :value="1">Auto</option>
                <option :value="300">5 ÂàÜÈíü</option>
                <option :value="3600">1 Â∞èÊó∂</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">ÂÜÖÂÆπ *</label>
            <input v-model="dnsTemplateForm.content" class="form-input" placeholder="IP Âú∞ÂùÄÊàñÁõÆÊ†áÂüüÂêç" />
          </div>

          <div class="form-group">
            <label class="form-label">ÊèèËø∞ÔºàÂèØÈÄâÔºâ</label>
            <input v-model="dnsTemplateForm.description" class="form-input" placeholder="Ê®°ÊùøÁî®ÈÄîËØ¥Êòé" />
          </div>

          <div class="form-group" v-if="canDnsBeProxied(dnsTemplateForm.type)">
            <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
              <input type="checkbox" v-model="dnsTemplateForm.proxied" style="width: 16px; height: 16px;" />
              ÂêØÁî® Cloudflare ‰ª£ÁêÜ
            </label>
          </div>

          <div v-if="dnsTemplateFormError" class="form-error">{{ dnsTemplateFormError }}</div>

          <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button class="btn btn-primary" @click="saveDnsTemplate" :disabled="dnsSavingTemplate" style="flex: 1;">
              {{ dnsSavingTemplate ? '‰øùÂ≠ò‰∏≠...' : '‰øùÂ≠ò' }}
            </button>
            <button class="btn btn-secondary" @click="showDnsTemplateModal = false" style="flex: 1;">ÂèñÊ∂à</button>
          </div>
        </div>
      </div>

      <!-- ==================== DNS ÁÆ°ÁêÜÈÉ®ÂàÜÁªìÊùü ==================== -->

      <!-- ==================== Antigravity ÁÆ°ÁêÜÈÉ®ÂàÜÁªìÊùü ==================== -->

      <!-- ==================== Gemini CLI ÁÆ°ÁêÜÈÉ®ÂàÜ ==================== -->
      <div v-if="mainActiveTab === 'gemini-cli'" class="tab-content gemini-cli-content"
        :class="getTabAnimationClass('gemini-cli')">

        <!-- Gemini CLI Â≠êÊ†áÁ≠æÈ°µ -->
        <div class="sec-tabs gemini-sec-tabs">
          <button class="tab-btn"
            :class="{ active: geminiCliCurrentTab === 'models' || geminiCliCurrentTab === 'quotas' }"
            @click="switchGeminiCliTab('models')">
            <i class="fas fa-th-list"></i> Ê®°ÂûãÂàóË°®
          </button>
          <button class="tab-btn" :class="{ active: geminiCliCurrentTab === 'accounts' }"
            @click="switchGeminiCliTab('accounts')">
            <i class="fas fa-list"></i> Ë¥¶Âè∑ÁÆ°ÁêÜ
          </button>
          <button class="tab-btn" :class="{ active: geminiCliCurrentTab === 'logs' }"
            @click="switchGeminiCliTab('logs')">
            <i class="fas fa-history"></i> Ë∞ÉÁî®Êó•Âøó
          </button>
          <button class="tab-btn" :class="{ active: geminiCliCurrentTab === 'settings' }"
            @click="switchGeminiCliTab('settings')">
            <i class="fas fa-cog"></i> Ê®°ÂùóÈÖçÁΩÆ
          </button>
        </div>

        <!-- Ê®°ÂûãÂàóË°®Ê†áÁ≠æÈ°µ -->
        <div v-show="geminiCliCurrentTab === 'models' || geminiCliCurrentTab === 'quotas'"
          class="sub-tab-content quick-fade-in">
          <div class="panel-header" style="justify-content: space-between; padding-bottom: 10px;">
            <div style="display: flex; gap: 16px; align-items: center;">
              <div class="panel-title">Model Matrix</div>
            </div>
            <div style="display: flex; gap: 8px;">
              <button class="btn btn-primary btn-sm" @click="saveGeminiCliMatrix" :disabled="geminiCliModelLoading">
                <i class="fas fa-save"></i> ‰øùÂ≠òÈÖçÁΩÆ
              </button>
              <button class="btn btn-secondary btn-sm" @click="loadGeminiCliMatrix" :disabled="geminiCliModelLoading">
                <i class="fas fa-sync-alt" :class="{ 'fa-spin': geminiCliModelLoading }"></i> Âà∑Êñ∞ÈÖçÁΩÆ
              </button>
            </div>
          </div>

          <div v-if="geminiCliModelLoading && !geminiCliMatrix" class="loading">
            <div class="spinner"></div>
            <div style="margin-top: 12px;">Ê≠£Âú®Ëé∑ÂèñÈÖçÁΩÆ...</div>
          </div>

          <div v-else class="ag-quota-list-view">
            <div class="panel">
              <div class="table-container">
                <table class="data-table model-matrix-table">
                  <thead>
                    <tr>
                      <th style="width: 200px;">Ê®°ÂûãÂêçÁß∞</th>
                      <th class="text-center">
                        <div class="matrix-header-cell" @click="toggleMatrixColumn('base')">
                          <span>Âü∫Á°ÄÊ®°Âûã</span>
                          <label class="switch">
                            <input type="checkbox" :checked="isMatrixColumnAllChecked('base')" readonly>
                            <span class="slider round"></span>
                          </label>
                        </div>
                      </th>
                      <th class="text-center">
                        <div class="matrix-header-cell" @click="toggleMatrixColumn('maxThinking')">
                          <span>Ê∑±Â∫¶ÊÄùËÄÉ</span>
                          <label class="switch">
                            <input type="checkbox" :checked="isMatrixColumnAllChecked('maxThinking')" readonly>
                            <span class="slider round"></span>
                          </label>
                        </div>
                      </th>
                      <th class="text-center">
                        <div class="matrix-header-cell" @click="toggleMatrixColumn('noThinking')">
                          <span>Âø´ÈÄüÊÄùËÄÉ</span>
                          <label class="switch">
                            <input type="checkbox" :checked="isMatrixColumnAllChecked('noThinking')" readonly>
                            <span class="slider round"></span>
                          </label>
                        </div>
                      </th>
                      <th class="text-center">
                        <div class="matrix-header-cell" @click="toggleMatrixColumn('search')">
                          <span>ËÅîÁΩëÊêúÁ¥¢</span>
                          <label class="switch">
                            <input type="checkbox" :checked="isMatrixColumnAllChecked('search')" readonly>
                            <span class="slider round"></span>
                          </label>
                        </div>
                      </th>
                      <th class="text-center">
                        <div class="matrix-header-cell" @click="toggleMatrixColumn('fakeStream')">
                          <span>ÂÅáÊµÅÂºè</span>
                          <label class="switch">
                            <input type="checkbox" :checked="isMatrixColumnAllChecked('fakeStream')" readonly>
                            <span class="slider round"></span>
                          </label>
                        </div>
                      </th>
                      <th class="text-center">
                        <div class="matrix-header-cell" @click="toggleMatrixColumn('antiTrunc')">
                          <span>ÊäóÊà™Êñ≠</span>
                          <label class="switch">
                            <input type="checkbox" :checked="isMatrixColumnAllChecked('antiTrunc')" readonly>
                            <span class="slider round"></span>
                          </label>
                        </div>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr v-for="row in getGeminiCliMatrixList()" :key="row.id">
                      <td style="font-family: var(--font-mono); font-weight: 600;">{{ row.id }}</td>
                      <td class="text-center">
                        <label class="switch">
                          <input type="checkbox" :checked="row.base" @change="toggleMatrixItem(row.id, 'base')">
                          <span class="slider round"></span>
                        </label>
                      </td>
                      <td class="text-center">
                        <label class="switch">
                          <input type="checkbox" :checked="row.maxThinking"
                            @change="toggleMatrixItem(row.id, 'maxThinking')">
                          <span class="slider round"></span>
                        </label>
                      </td>
                      <td class="text-center">
                        <label class="switch">
                          <input type="checkbox" :checked="row.noThinking"
                            @change="toggleMatrixItem(row.id, 'noThinking')">
                          <span class="slider round"></span>
                        </label>
                      </td>
                      <td class="text-center">
                        <label class="switch">
                          <input type="checkbox" :checked="row.search" @change="toggleMatrixItem(row.id, 'search')">
                          <span class="slider round"></span>
                        </label>
                      </td>
                      <td class="text-center">
                        <label class="switch">
                          <input type="checkbox" :checked="row.fakeStream"
                            @change="toggleMatrixItem(row.id, 'fakeStream')">
                          <span class="slider round"></span>
                        </label>
                      </td>
                      <td class="text-center">
                        <label class="switch">
                          <input type="checkbox" :checked="row.antiTrunc"
                            @change="toggleMatrixItem(row.id, 'antiTrunc')">
                          <span class="slider round"></span>
                        </label>
                      </td>
                    </tr>
                    <tr v-if="getGeminiCliMatrixList().length === 0">
                      <td colspan="7" style="text-align: center; padding: 40px; opacity: 0.5;">
                        <i class="fas fa-info-circle"></i> ÊöÇÊó†ÈÖçÁΩÆÊï∞ÊçÆ
                      </td>
                    </tr>

                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Ë¥¶Âè∑ÁÆ°ÁêÜÊ†áÁ≠æÈ°µ -->
        <div v-if="geminiCliCurrentTab === 'accounts'" class="sub-tab-content quick-fade-in">
          <div class="panel">
            <div class="panel-header">
              <div style="display: flex; gap: 8px;">
                <button class="btn btn-gemini" @click="showGeminiCliOAuthExpand = !showGeminiCliOAuthExpand">
                  <i class="fab fa-google"></i> OAuth ÊéàÊùÉ
                </button>
                <button class="btn btn-success" @click="openAddGeminiCliAccountModal">
                  <i class="fas fa-plus-circle"></i> ÊâãÂä®Ê∑ªÂä†
                </button>
                <button class="btn btn-secondary" @click="refreshGeminiCliAccounts" :disabled="geminiCliLoading"
                  title="Âà∑Êñ∞ÂÖ®ÈÉ®Ë¥¶Âè∑">
                  <i class="fas fa-sync-alt" :class="{ 'fa-spin': geminiCliLoading }"></i>
                </button>
              </div>
            </div>

            <!-- Expandable OAuth Panel -->
            <div class="ag-expandable-panel gemini-oauth-panel" :class="{ expanded: showGeminiCliOAuthExpand }">
              <div class="panel-header" style="border-bottom: none; padding-bottom: 0;">
                <div class="panel-title" style="width: 100%; text-align: center; padding-top: 10px;">ËøûÊé• Google Ë¥¶Âè∑</div>
              </div>

              <div class="oauth-modern-body">
                <!-- Step 1 -->
                <div class="oauth-step-item">
                  <div class="step-badge">1</div>
                  <div class="step-content">
                    <div class="step-text">ÁôªÂΩï Google ‰ª•Ëé∑ÂèñÊéàÊùÉÁ†Å</div>
                    <button class="btn btn-gemini btn-block" @click="openGeminiCliAuthUrl">
                      <i class="fab fa-google"></i> Ëé∑ÂèñÊéàÊùÉÈìæÊé•
                    </button>
                  </div>
                </div>

                <!-- Divider -->
                <div class="oauth-step-line"></div>

                <!-- Step 2 -->
                <div class="oauth-step-item">
                  <div class="step-badge">2</div>
                  <div class="step-content">
                    <div class="step-text">Âú®‰∏ãÊñπÁ≤òË¥¥ÈáçÂÆöÂêëÂêéÁöÑ URL</div>
                    <textarea v-model="geminiCliOauthReturnUrl" class="form-textarea oauth-textarea"
                      placeholder="Á≤òË¥¥‰ª• http:// ÂºÄÂ§¥ÁöÑÂÆåÊï¥ URL..." spellcheck="false"></textarea>
                  </div>
                </div>

                <!-- Options -->
                <div class="oauth-options">
                  <div class="oauth-option-row">
                    <input type="text" v-model="geminiCliCustomProjectId" class="form-input input-sm"
                      placeholder="Ëá™ÂÆö‰πâÈ°πÁõÆ ID (ÂèØÈÄâ)">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <label class="switch">
                        <input type="checkbox" v-model="geminiCliAllowRandomProjectId">
                        <span class="slider round"></span>
                      </label>
                      <span style="font-size: 12px; color: var(--text-secondary);">ÂÖÅËÆ∏ÈöèÊú∫ ID</span>
                    </div>
                  </div>
                </div>

                <!-- Action -->
                <button class="btn btn-success btn-block btn-lg mt-3" @click="parseGeminiCliOauthUrl"
                  :disabled="!geminiCliOauthReturnUrl || geminiCliLoading">
                  <i class="fas" :class="geminiCliLoading ? 'fa-spinner fa-spin' : 'fa-link'"></i>
                  {{ geminiCliLoading ? 'È™åËØÅ‰∏≠...' : 'È™åËØÅÂπ∂ËøûÊé•' }}
                </button>
              </div>
            </div>

            <!-- ÁªüËÆ°‰ø°ÊÅØÊ†è -->
            <div v-if="geminiCliStats" class="stats-bar"
              style="display: none; gap: 20px; padding: 12px 16px; margin-bottom: 2px; border-radius: 8px; font-size: 13px;">
              <div class="stat-item">
                <span style="opacity: 0.7;">ÊÄªË¥¶Âè∑:</span>
                <strong style="margin-left: 4px;">{{ geminiCliStats.total_accounts || 0 }}</strong>
              </div>
              <div class="stat-item">
                <span style="opacity: 0.7;">Ê¥ªË∑É:</span>
                <strong style="margin-left: 4px; color: var(--success-color);">{{ geminiCliStats.active_accounts || 0
                  }}</strong>
              </div>
            </div>

            <div v-if="geminiCliLoading && geminiCliAccounts.length === 0" class="loading">
              <div class="spinner"></div>
              <div style="margin-top: 12px;">Âä†ËΩΩ‰∏≠...</div>
            </div>

            <!-- Ë¥¶Âè∑Ë°®Ê†º -->
            <div v-else class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Â§áÊ≥®ÂêçÁß∞</th>
                    <th>È°πÁõÆ ID</th>
                    <th>ÈÇÆÁÆ±</th>
                    <th class="text-center">Áä∂ÊÄÅ</th>
                    <th class="text-center">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="account in geminiCliAccounts" :key="account.id">
                    <td><strong>{{ account.name || 'Êú™ÂëΩÂêç' }}</strong></td>
                    <td><code class="code-sm">{{ account.project_id || '-' }}</code></td>
                    <td><span style="font-size: 11px; opacity: 0.7;">{{ account.email || '-' }}</span></td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="ag-status-badge"
                          :class="account.status === 'online' ? 'ag-status-online' : (account.status === 'error' ? 'ag-status-error' : 'ag-status-unknown')">
                          {{ account.status === 'online' ? 'Âú®Á∫ø' : (account.status === 'error' ? 'ÂºÇÂ∏∏' : 'Êú™Áü•') }}
                        </span>
                      </div>
                    </td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <button class="btn btn-icon-refined"
                          :style="{ color: account.enable ? 'var(--success-color)' : 'var(--text-tertiary)' }"
                          @click="toggleGeminiCliAccount(account)" :title="account.enable ? 'Á¶ÅÁî®Ë¥¶Âè∑' : 'ÂêØÁî®Ë¥¶Âè∑'">
                          <i class="fas" :class="account.enable ? 'fa-toggle-on' : 'fa-toggle-off'"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="editGeminiCliAccount(account)" title="ÁºñËæëÈÖçÁΩÆ">
                          <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="deleteGeminiCliAccount(account)" title="Âà†Èô§ÊéàÊùÉ"
                          style="color: var(--danger-color);">
                          <i class="fas fa-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div v-if="geminiCliAccounts.length === 0" class="empty-state">
                <i class="fas fa-terminal" style="font-size: 48px; margin-bottom: 16px;"></i>
                <div>ÊöÇÊó†Ë¥¶Âè∑ÔºåÁÇπÂáª‰∏äÊñπÊåâÈíÆÊñ∞Â¢ûÊéàÊùÉ</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Ë∞ÉÁî®Êó•ÂøóÊ†áÁ≠æÈ°µ -->
        <div v-show="geminiCliCurrentTab === 'logs'" class="sub-tab-content quick-fade-in">
          <div class="panel">
            <div class="panel-header" style="border-bottom: 1px solid var(--border-color);">
              <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                <div class="panel-title-group">
                  <div class="panel-title">Gemini CLI Ë∞ÉÁî®Êó•Âøó</div>
                </div>
                <div style="display: flex; gap: 8px;">
                  <button class="btn btn-secondary btn-sm" @click="loadGeminiCliLogs" :disabled="geminiCliLoading">
                    <i class="fas fa-sync-alt" :class="{ 'fa-spin': geminiCliLoading }"></i> Âà∑Êñ∞
                  </button>
                  <button class="btn btn-danger btn-sm" @click="clearGeminiCliLogs">
                    <i class="fas fa-trash-alt"></i> Ê∏ÖÁ©∫
                  </button>
                </div>
              </div>
            </div>
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th style="width: 160px;" class="text-center">Ë∞ÉÁî®Êó∂Èó¥</th>
                    <th>Ë¥¶Âè∑Â§áÊ≥®</th>
                    <th style="width: 120px;" class="text-center">Ë∞ÉÁî®Ê®°Âûã</th>
                    <th>Êé•Âè£Ë∑ØÂæÑ</th>
                    <th class="text-center" style="width: 80px;">Áä∂ÊÄÅ</th>
                    <th class="text-center" style="width: 80px;">ËÄóÊó∂</th>
                    <th class="text-center" style="width: 80px;">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="log in geminiCliLogs" :key="log.id">
                    <td class="text-center">
                      <div class="flex-cell">
                        <div class="log-time">
                          <i class="far fa-clock" style="margin-right: 4px; opacity: 0.5;"></i>
                          {{ formatDateTime(log.created_at) }}
                        </div>
                      </div>
                    </td>
                    <td>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-id-card"
                          style="font-size: 12px; color: var(--primary-color); opacity: 0.7;"></i>
                        <strong>{{ log.account_name || log.account_id }}</strong>
                        <span v-if="log.is_balanced" class="badge-lb" title="ÁªèËøáÂÖ®Â±ÄË¥üËΩΩÂùáË°°ÂàÜÂèë">LB</span>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <code class="code-sm">{{ log.model || '-' }}</code>
                      </div>
                    </td>
                    <td>
                      <div style="display: flex; align-items: center;">
                        <span class="method-badge" :class="'method-' + (log.request_method || 'POST').toLowerCase()">
                          {{ log.request_method || 'POST' }}
                        </span>
                        <span class="log-path" :title="log.request_path">{{ log.request_path }}</span>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span :class="getGcliStatusClass(log.status_code)" class="ag-status-badge">
                          {{ log.status_code }}
                        </span>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="log-duration">{{ log.duration_ms }}ms</span>
                      </div>
                    </td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <button class="btn btn-icon-refined" @click="viewGeminiCliLogDetail(log)" title="Êü•ÁúãËØ¶ÊÉÖ">
                          <i class="fas fa-eye"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                  <tr v-if="geminiCliLogs.length === 0">
                    <td colspan="7" style="text-align: center; padding: 60px; color: var(--text-tertiary);">
                      <i class="fas fa-inbox"
                        style="font-size: 40px; display: block; margin-bottom: 12px; opacity: 0.3;"></i>
                      Â∞öÊó†Ë∞ÉÁî®ËÆ∞ÂΩï
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Ê®°ÂùóËÆæÁΩÆÊ†áÁ≠æÈ°µ -->
        <div v-show="geminiCliCurrentTab === 'settings'" class="sub-tab-content quick-fade-in">
          <div class="panel">
            <div class="panel-header" style="border-bottom: 1px solid var(--border-color);">
              <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                <div class="panel-title-group">
                  <div class="panel-title">Gemini Google API ÂèÇÊï∞ÈÖçÁΩÆ</div>
                </div>
                <div style="display: flex; gap: 8px;">
                  <button class="btn btn-secondary btn-sm" @click="loadGeminiCliSettings" :disabled="geminiCliLoading">
                    <i class="fas fa-sync-alt" :class="{ 'fa-spin': geminiCliLoading }"></i> Âà∑Êñ∞
                  </button>
                  <button class="btn btn-primary btn-sm" @click="saveGeminiCliSettings" :disabled="geminiCliSaving">
                    <i class="fas" :class="geminiCliSaving ? 'fa-spinner fa-spin' : 'fa-save'"></i> ‰øùÂ≠òÂÖ®Â±Ä
                  </button>
                </div>
              </div>
            </div>

            <div style="padding: 10px 3px 3px 3px;">
              <!-- ÁîüÊàêÂèÇÊï∞ -->
              <div style="margin-bottom: 24px;">
                <div style="font-size: 13px; font-weight: 600; margin-bottom: 10px; color: var(--gemini-primary);">
                  <i class="fas fa-sliders-h"></i> ÁîüÊàêÂèÇÊï∞
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px;">
                  <div>
                    <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ÈªòËÆ§Ê∏©Â∫¶</label>
                    <input type="number" step="0.1" min="0" max="2" v-model="geminiCliSettingsForm.DEFAULT_TEMPERATURE"
                      class="form-input" style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="1">
                  </div>
                  <div>
                    <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ÈªòËÆ§ top_p</label>
                    <input type="number" step="0.01" min="0" max="1" v-model="geminiCliSettingsForm.DEFAULT_TOP_P"
                      class="form-input" style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="0.95">
                  </div>
                  <div>
                    <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ÈªòËÆ§ top_k</label>
                    <input type="number" step="1" min="1" v-model="geminiCliSettingsForm.DEFAULT_TOP_K"
                      class="form-input" style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="64">
                  </div>
                  <div>
                    <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ÈªòËÆ§ÊúÄÂ§ß
                      Tokens</label>
                    <input type="number" step="1" min="1" v-model="geminiCliSettingsForm.DEFAULT_MAX_TOKENS"
                      class="form-input" style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="8192">
                  </div>
                </div>
              </div>

              <!-- Ê®°ÂûãÈáçÂÆöÂêë -->
              <div style="margin-bottom: 24px;">
                <div
                  style="font-size: 14px; font-weight: 600; margin-bottom: 12px; color: var(--gemini-primary); display: flex; align-items: center; gap: 8px;">
                  <i class="fas fa-exchange-alt"></i> Ê®°ÂûãÈáçÂÆöÂêë (Âà´Âêç)
                </div>
                <!-- ÂàóË°® -->
                <div v-if="geminiCliModelRedirects.length > 0"
                  style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 16px;">
                  <div v-for="r in geminiCliModelRedirects" :key="r.source_model"
                    style="background: var(--bg-tertiary); padding: 10px 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid var(--border-color); transition: all 0.2s;"
                    :style="gcliEditingRedirectSource === r.source_model ? 'border-color: var(--gemini-primary); box-shadow: 0 0 0 2px rgba(var(--gemini-primary-rgb), 0.1);' : ''">

                    <div v-if="gcliEditingRedirectSource !== r.source_model"
                      style="display: flex; align-items: center; gap: 10px; flex: 1;"
                      @dblclick="editGeminiCliModelRedirect(r)">
                      <div
                        style="background: rgba(var(--gemini-primary-rgb), 0.1); color: var(--gemini-primary); padding: 2px 8px; border-radius: 4px; font-weight: 600; font-size: 12px;">
                        {{ r.source_model }}</div>
                      <i class="fas fa-long-arrow-alt-right" style="opacity: 0.3;"></i>
                      <div style="font-size: 13px; color: var(--text-primary);">{{ r.target_model }}</div>
                    </div>

                    <div v-else style="display: flex; align-items: center; gap: 10px; flex: 1;">
                      <input type="text" v-model="newGeminiCliRedirectSource" class="form-input-sm"
                        style="flex: 1; min-width: 0;" placeholder="Ê∫êÊ®°Âûã">
                      <i class="fas fa-long-arrow-alt-right" style="opacity: 0.3;"></i>
                      <input type="text" v-model="newGeminiCliRedirectTarget" class="form-input-sm"
                        style="flex: 1; min-width: 0;" placeholder="ÁõÆÊ†áÊ®°Âûã">
                    </div>

                    <div style="display: flex; gap: 6px; margin-left: 15px;">
                      <template v-if="gcliEditingRedirectSource === r.source_model">
                        <button class="btn btn-xs btn-success icon-only"
                          @click="addGeminiCliModelRedirect(newGeminiCliRedirectSource, newGeminiCliRedirectTarget)"
                          title="‰øùÂ≠ò">
                          <i class="fas fa-check"></i>
                        </button>
                        <button class="btn btn-xs btn-secondary icon-only"
                          @click="gcliEditingRedirectSource = null; newGeminiCliRedirectSource = ''; newGeminiCliRedirectTarget = '';"
                          title="ÂèñÊ∂à">
                          <i class="fas fa-times"></i>
                        </button>
                      </template>
                      <template v-else>
                        <button class="btn btn-xs btn-primary icon-only" @click="editGeminiCliModelRedirect(r)"
                          title="ÁºñËæë">
                          <i class="fas fa-pen"></i>
                        </button>
                        <button class="btn btn-xs btn-danger icon-only"
                          @click="removeGeminiCliModelRedirect(r.source_model)" title="Âà†Èô§">
                          <i class="fas fa-trash"></i>
                        </button>
                      </template>
                    </div>
                  </div>
                </div>
                <div v-else
                  style="font-size: 12px; opacity: 0.5; margin-bottom: 16px; padding: 10px; background: var(--bg-secondary); border-radius: 8px; text-align: center; border: 1px dashed var(--border-color);">
                  ÊöÇÊó†ÈáçÂÆöÂêëËßÑÂàô„ÄÇËØ∑Ê±Ç source Ê®°ÂûãÂ∞ÜËá™Âä®ËΩ¨ÂèëÁªô target Ê®°Âûã„ÄÇ
                </div>

                <!-- Ê∑ªÂä†Ë°®Âçï -->
                <div v-if="!gcliEditingRedirectSource"
                  style="display: flex; gap: 10px; align-items: center; background: rgba(var(--gemini-primary-rgb), 0.03); padding: 12px; border-radius: 10px; border: 1px dashed var(--border-color);">
                  <div style="flex: 1; position: relative;">
                    <input type="text" v-model="newGeminiCliRedirectSource" class="form-input"
                      style="width: 100%; padding: 8px 12px; font-size: 13px;" placeholder="Ê∫êÊ®°Âûã (‰æãÂ¶Ç: gpt-4o)">
                  </div>
                  <i class="fas fa-arrow-right" style="opacity: 0.3;"></i>
                  <div style="flex: 1; position: relative;">
                    <input type="text" v-model="newGeminiCliRedirectTarget" class="form-input"
                      style="width: 100%; padding: 8px 12px; font-size: 13px;" placeholder="ÁõÆÊ†áÊ®°Âûã (‰æãÂ¶Ç: gemini-1.5-pro)">
                  </div>
                  <button class="btn btn-gemini"
                    style="padding: 0 20px; font-size: 13px; height: 38px; display: flex; align-items: center; gap: 6px; white-space: nowrap;"
                    @click="addGeminiCliModelRedirect(newGeminiCliRedirectSource, newGeminiCliRedirectTarget)">
                    <i class="fas fa-plus-circle"></i> Ê∑ªÂä†Âà´Âêç
                  </button>
                </div>
              </div>

              <!-- Â∫ïÈÉ®ËÆæÁΩÆÁΩëÊ†º -->
              <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 24px; margin-bottom: 10px;">

                <!-- ÂÆâÂÖ®‰∏éË¥üËΩΩ -->
                <div>
                  <div style="font-size: 13px; font-weight: 600; margin-bottom: 10px; color: var(--gemini-primary);">
                    <i class="fas fa-shield-alt"></i> ÂÆâÂÖ®‰∏éË¥üËΩΩ
                  </div>
                  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 12px;">
                    <div>
                      <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ÊØèÂ∞èÊó∂‰∏äÈôê</label>
                      <input type="number" v-model="geminiCliSettingsForm.CREDENTIAL_MAX_USAGE_PER_HOUR"
                        class="form-input" style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="1000">
                    </div>
                    <div>
                      <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">Ë∂ÖÊó∂ (s)</label>
                      <input type="number" v-model="geminiCliSettingsForm.TIMEOUT" class="form-input"
                        style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="300">
                    </div>
                    <div>
                      <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">Êó•Âøó‰øùÁïô</label>
                      <input type="number" v-model="geminiCliSettingsForm.LOG_RETENTION_DAYS" class="form-input"
                        style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="7">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- ==================== Gemini CLI ÁÆ°ÁêÜÈÉ®ÂàÜÁªìÊùü ==================== -->

      <!-- ==================== OpenApi ÁÆ°ÁêÜÈÉ®ÂàÜ ==================== -->
      <div v-if="mainActiveTab === 'openai'" class="tab-content openai-tab-content"
        :class="getTabAnimationClass('openai')">
        <!-- OpenApi Â≠êÊ†áÁ≠æÈ°µ -->
        <div class="sec-tabs openai-sec-tabs">
          <button class="tab-btn" :class="{ active: openaiCurrentTab === 'endpoints' }"
            @click="openaiCurrentTab = 'endpoints'">
            <i class="fas fa-server"></i> API Á´ØÁÇπ
          </button>
          <button class="tab-btn" :class="{ active: openaiCurrentTab === 'accounts' }"
            @click="openaiCurrentTab = 'accounts'">
            <i class="fas fa-users"></i> Ë¥¶Âè∑ÁÆ°ÁêÜ
          </button>
        </div>

        <!-- API Á´ØÁÇπÊ†áÁ≠æÈ°µ -->
        <div v-if="openaiCurrentTab === 'endpoints'" class="sub-tab-content quick-fade-in">
          <div v-if="openaiLoading" class="loading">
            <div class="spinner"></div>
            <div style="margin-top: 12px;">Âä†ËΩΩ‰∏≠...</div>
          </div>

          <!-- Á´ØÁÇπÂç°ÁâáÂàóË°® -->
          <div v-else>
            <div v-for="endpoint in openaiEndpoints" :key="endpoint.id" class="account-card"
              :class="{ 'expanded': isOpenaiEndpointExpanded(endpoint.id) }" style="margin-bottom: 12px;">
              <!-- Á´ØÁÇπÂ§¥ÈÉ® - ÂèØÁÇπÂáªÂ±ïÂºÄÊ®°ÂûãÂàóË°® -->
              <div class="account-header" @click="toggleOpenaiModels(endpoint.id)"
                style="cursor: pointer; align-items: center; padding-right: 10px;">
                <div class="account-info" style="flex: 1; align-items: center; padding-right: 0;">
                  <span style="font-size: 20px; display: inline-flex; align-items: center;">
                    <i class="fas fa-chevron-right toggle-icon" :style="{
                        transition: 'transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)',
                        transform: isOpenaiEndpointExpanded(endpoint.id) ? 'rotate(90deg)' : 'rotate(0deg)'
                      }"></i>
                  </span>
                  <div style="flex: 1;">
                    <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap; margin-bottom: 4px;">
                      <span class="proxied-badge"
                        :class="endpoint.status === 'valid' ? 'proxied-on' : (endpoint.status === 'invalid' ? 'proxied-off' : '')">
                        {{ endpoint.status === 'valid' ? 'ÊúâÊïà' : (endpoint.status === 'invalid' ? 'Êó†Êïà' : 'Êú™È™åËØÅ') }}
                      </span>
                      <strong style="font-size: 16px;">{{ endpoint.name || 'Êú™ÂëΩÂêç' }}</strong>
                      <span v-if="endpoint.models && endpoint.models.length > 0"
                        style="font-size: 12px; color: var(--text-tertiary);">
                        {{ endpoint.models.length }} ‰∏™Ê®°Âûã
                      </span>
                    </div>
                    <div class="account-email" style="font-size: 12px;">
                      {{ maskAddress(endpoint.baseUrl, serverIpDisplayMode) }}
                    </div>
                  </div>
                </div>
              </div>

              <div class="account-card-body">
                <!-- Ê®°ÂûãÂàóË°® - ÂèØÂ±ïÂºÄ/Êî∂Ëµ∑ -->
                <div class="openai-models-container" :class="{ 'collapsed': !isOpenaiEndpointExpanded(endpoint.id) }">
                  <div v-if="endpoint.models && endpoint.models.length > 0" class="models-grid">
                    <div v-for="model in endpoint.models" :key="getModelName(model)" class="model-tag-item"
                      @click="copyToClipboard(getModelName(model))" :title="'ÁÇπÂáªÂ§çÂà∂: ' + getModelName(model)">
                      {{ getModelName(model) }}
                    </div>
                  </div>
                  <div v-else style="padding: 20px; text-align: center; color: var(--text-tertiary);">
                    <i class="fas fa-cube" style="font-size: 20px; margin-bottom: 8px; display: block;"></i>
                    ÊöÇÊó†Ê®°ÂûãÊï∞ÊçÆÔºåÁÇπÂáªÂà∑Êñ∞ÊåâÈíÆËé∑Âèñ
                  </div>
                </div>
              </div>
            </div>

            <div v-if="openaiEndpoints.length === 0" class="empty-state" style="padding: 40px;">
              <i class="fas fa-robot" style="font-size: 48px; margin-bottom: 16px;"></i>
              <div>ÊöÇÊó† API Á´ØÁÇπÔºåÁÇπÂáª‰∏äÊñπÊåâÈíÆÊ∑ªÂä†</div>
            </div>
          </div>
          <!-- </div> -->
        </div>

        <!-- Ë¥¶Âè∑ÁÆ°ÁêÜÊ†áÁ≠æÈ°µ -->
        <div v-if="openaiCurrentTab === 'accounts'" class="sub-tab-content quick-fade-in">
          <div class="panel">
            <div class="panel-header">
              <div class="panel-title"></div>
              <div style="display: flex; gap: 8px;">
                <button class="btn btn-success" style="padding: 6px 12px;" @click="openAddOpenaiEndpointModal">
                  <i class="fas fa-plus"></i> Ê∑ªÂä†Ë¥¶Âè∑
                </button>
                <button class="btn btn-secondary" style="padding: 6px 10px;" @click="refreshAllOpenaiEndpoints"
                  :disabled="openaiRefreshing">
                  <i class="fas fa-sync-alt" :class="{ 'fa-spin': openaiRefreshing }"></i> Âà∑Êñ∞ÂÖ®ÈÉ®
                </button>
                <button class="btn btn-secondary" @click="exportOpenaiEndpoints" style="padding: 6px 12px;">
                  <i class="fas fa-upload"></i> ÂØºÂá∫
                </button>
                <button class="btn btn-secondary" @click="importOpenaiEndpointsFromFile" style="padding: 6px 12px;">
                  <i class="fas fa-download"></i> ÂØºÂÖ•
                </button>
              </div>
            </div>

            <div v-if="openaiLoading" class="loading">
              <div class="spinner"></div>
              <div style="margin-top: 12px;">Âä†ËΩΩ‰∏≠...</div>
            </div>

            <div v-else class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ÂêçÁß∞</th>
                    <th>API Âú∞ÂùÄ</th>
                    <th>API Key</th>
                    <th class="text-center">Áä∂ÊÄÅ</th>
                    <th class="text-center">Ê®°ÂûãÊï∞Èáè</th>
                    <th class="text-center">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="endpoint in openaiEndpoints" :key="endpoint.id">
                    <td>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-robot"
                          style="font-size: 12px; color: var(--openai-primary); opacity: 0.7;"></i>
                        <strong>{{ endpoint.name || 'Êú™ÂëΩÂêç' }}</strong>
                      </div>
                    </td>
                    <td>
                      <code
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); padding: 2px 8px; border-radius: 6px; font-size: 11px; font-family: var(--font-mono); color: var(--text-secondary);">
                        {{ maskAddress(endpoint.baseUrl, serverIpDisplayMode) }}
                      </code>
                    </td>
                    <td>
                      <code
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); padding: 2px 8px; border-radius: 6px; font-size: 11px; font-family: var(--font-mono); color: var(--text-secondary);">
                        {{ endpoint.showKey ? endpoint.apiKey : maskApiKey(endpoint.apiKey) }}
                      </code>
                      <button class="copy-btn" @click.stop="endpoint.showKey = !endpoint.showKey"
                        :title="endpoint.showKey ? 'ÈöêËóè' : 'ÊòæÁ§∫'" style="padding: 2px 4px; margin-left: 4px;">
                        <i class="fas" :class="endpoint.showKey ? 'fa-eye-slash' : 'fa-eye'"></i>
                      </button>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="ag-status-badge"
                          :class="endpoint.status === 'valid' ? 'ag-status-online' : (endpoint.status === 'invalid' ? 'ag-status-error' : 'ag-status-unknown')">
                          {{ endpoint.status === 'valid' ? 'ÊúâÊïà' : (endpoint.status === 'invalid' ? 'Êó†Êïà' : 'Êú™È™åËØÅ') }}
                        </span>
                      </div>
                    </td>
                    <td class="text-center">
                      <span v-if="endpoint.models && endpoint.models.length > 0" class="log-duration">
                        {{ endpoint.models.length }} ‰∏™Ê®°Âûã
                      </span>
                      <span v-else style="color: var(--text-tertiary);">-</span>
                    </td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <button class="btn btn-icon-refined" @click="verifyOpenaiEndpoint(endpoint)" title="È™åËØÅËøûÊé•">
                          <i class="fas fa-sync-alt"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="editOpenaiEndpoint(endpoint)" title="ÁºñËæëÈÖçÁΩÆ">
                          <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="deleteOpenaiEndpoint(endpoint)" title="Âà†Èô§Ë¥¶Âè∑"
                          style="color: var(--danger-color);">
                          <i class="fas fa-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div v-if="openaiEndpoints.length === 0" class="empty-state">
                <i class="fas fa-robot" style="font-size: 48px; margin-bottom: 16px;"></i>
                <div>ÊöÇÊó† API Ë¥¶Âè∑ÔºåÁÇπÂáª‰∏äÊñπÊåâÈíÆÊ∑ªÂä†</div>
              </div>
            </div>
          </div>

          <!-- ÊâπÈáèÊ∑ªÂä† -->
          <div class="panel" style="margin-top: 16px;">
            <div class="panel-header">
              <div class="panel-title">ÊâπÈáèÊ∑ªÂä†Á´ØÁÇπ</div>
            </div>
            <div>
              <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 12px;">
                ÊØèË°å‰∏Ä‰∏™Á´ØÁÇπÔºåÊ†ºÂºèÔºö<code>ÂêçÁß∞:APIÂú∞ÂùÄ:API_Key</code> Êàñ JSON Ê†ºÂºè
              </p>
              <textarea v-model="openaiBatchText" class="form-textarea" placeholder='ÊØèË°å‰∏Ä‰∏™ÔºåÊ†ºÂºè: ÂêçÁß∞:https://api.example.com:sk-xxx
Êàñ JSON Ê†ºÂºè:
[{"name": "Á§∫‰æã", "baseUrl": "https://api.example.com", "apiKey": "sk-xxx"}]'
                style="min-height: 150px; font-family: var(--font-mono); font-size: 12px;"></textarea>
              <div v-if="openaiBatchError" class="form-error" style="margin-top: 8px;">{{ openaiBatchError }}
              </div>
              <div v-if="openaiBatchSuccess" class="form-success" style="margin-top: 8px;">{{ openaiBatchSuccess
                }}
              </div>
              <button class="btn btn-primary" @click="batchAddOpenaiEndpoints" :disabled="openaiAdding"
                style="width: 100%; margin-top: 12px;">
                {{ openaiAdding ? 'Ê∑ªÂä†‰∏≠...' : 'ÊâπÈáèÊ∑ªÂä†' }}
              </button>
            </div>
          </div>
        </div>

        <!-- Ê∑ªÂä†/ÁºñËæëÁ´ØÁÇπÊ®°ÊÄÅÊ°Ü -->
        <div v-if="showOpenaiEndpointModal" class="modal-overlay" @keydown.esc="showOpenaiEndpointModal = false"
          @keydown.ctrl.enter="saveOpenaiEndpoint" tabindex="-1">
          <div class="modal">
            <div class="modal-header">
              <div class="modal-title">{{ openaiEditingEndpoint ? 'ÁºñËæë API Á´ØÁÇπ' : 'Ê∑ªÂä† API Á´ØÁÇπ' }}</div>
              <button class="modal-close" @click="showOpenaiEndpointModal = false"><i class="fas fa-times"></i></button>
            </div>

            <div class="form-group">
              <label class="form-label">ÂêçÁß∞</label>
              <input v-model="openaiEndpointForm.name" class="form-input" placeholder="‰æãÂ¶Ç: OpenAI ÂÆòÊñπ" />
            </div>

            <div class="form-group">
              <label class="form-label">API Âú∞ÂùÄ *</label>
              <input v-model="openaiEndpointForm.baseUrl" class="form-input" placeholder="https://api.openai.com" />
              <div class="form-help">OpenAI ÂÖºÂÆπÁöÑ API Âü∫Á°ÄÂú∞ÂùÄÔºà‰∏çÈúÄË¶Å /v1Ôºâ</div>
            </div>

            <div class="form-group">
              <label class="form-label">API Key *</label>
              <input v-model="openaiEndpointForm.apiKey" type="text" class="form-input" placeholder="sk-xxxxxxxx"
                style="font-family: var(--font-mono);" />
            </div>

            <div class="form-group">
              <label class="form-label">Â§áÊ≥®</label>
              <textarea v-model="openaiEndpointForm.notes" class="form-textarea" placeholder="ÂèØÈÄâÂ§áÊ≥®‰ø°ÊÅØ"
                style="min-height: 60px;"></textarea>
            </div>

            <div v-if="openaiEndpointFormError" class="form-error">{{ openaiEndpointFormError }}</div>

            <div style="display: flex; gap: 12px; margin-top: 20px;">
              <button class="btn btn-primary" @click="saveOpenaiEndpoint" :disabled="openaiSaving" style="flex: 1;">
                {{ openaiSaving ? '‰øùÂ≠ò‰∏≠...' : '‰øùÂ≠ò' }}
              </button>
              <button class="btn btn-secondary" @click="showOpenaiEndpointModal = false" style="flex: 1;">ÂèñÊ∂à</button>
            </div>
          </div>
        </div>

      </div>
      <!-- ==================== OpenAI API ÁÆ°ÁêÜÈÉ®ÂàÜÁªìÊùü ==================== -->

      <!-- ==================== ‰∏ªÊú∫ÁÆ°ÁêÜÈÉ®ÂàÜ ==================== -->
      <div v-show="mainActiveTab === 'server'" class="tab-content server-tab-content"
        :class="getTabAnimationClass('server')">
        <!-- ‰∏ªÊú∫Â≠êÊ†áÁ≠æÈ°µ -->
        <div class="sec-tabs server-sec-tabs">
          <button class="tab-btn" :class="{ active: serverCurrentTab === 'list' }" @click="serverCurrentTab = 'list'"
            style="background: var(--server-primary) !important;" v-if="serverCurrentTab === 'list'">
            <i class="fas fa-server"></i> ‰∏ªÊú∫ÂàóË°®
          </button>
          <button class="tab-btn" :class="{ active: serverCurrentTab === 'list' }" @click="serverCurrentTab = 'list'"
            v-else>
            <i class="fas fa-server"></i> ‰∏ªÊú∫ÂàóË°®
          </button>
          <button class="tab-btn" :class="{ active: serverCurrentTab === 'management' }"
            @click="serverCurrentTab = 'management'" style="background: var(--server-primary) !important;"
            v-if="serverCurrentTab === 'management'">
            <i class="fas fa-cog"></i> ÂêéÂè∞ÁÆ°ÁêÜ
          </button>
          <button class="tab-btn" :class="{ active: serverCurrentTab === 'management' }"
            @click="serverCurrentTab = 'management'" v-else>
            <i class="fas fa-cog"></i> ÂêéÂè∞ÁÆ°ÁêÜ
          </button>
          <!-- Âä®ÊÄÅSSHÁªàÁ´ØÊ†áÁ≠æÈ°µ -->
          <template v-for="session in sshSessions" :key="session.id">
            <button class="tab-btn ssh-session-tab" :class="{ active: serverCurrentTab === 'ssh_' + session.id }"
              @click="switchToSSHTab(session.id)" @dblclick.stop="closeSSHSession(session.id)"
              @mousedown.middle.prevent.stop="closeSSHSession(session.id)">
              <i class="fas fa-terminal"></i>
              <span>{{ session.server.name }}</span>
              <!-- <span class="ssh-tab-close" @click.stop="closeSSHSession(session.id)" title="ÂÖ≥Èó≠">√ó</span> -->
            </button>
          </template>
          <!-- Êñ∞Âª∫SSHÁªàÁ´ØÊåâÈíÆ -->
          <button class="tab-btn ssh-add-tab" @click="showAddSessionModal" title="Êñ∞Âª∫SSHÁªàÁ´Ø" v-if="serverList.length > 0">
            <i class="fas fa-plus"></i>
          </button>
        </div>

        <!-- ‰∏ªÊú∫ÂàóË°®Ê†áÁ≠æÈ°µ -->
        <div v-show="serverCurrentTab === 'list'" class="sub-tab-content quick-fade-in">
          <!-- ‰∏ªÊú∫ÊéßÂà∂Êù° -->
          <div class="controls-bar">
            <div class="controls-row">
              <div class="search-box">
                <i class="fas fa-search"></i>
                <input v-model="serverSearchText" placeholder="ÊêúÁ¥¢ÂêçÁß∞„ÄÅIP ÊàñÊ†áÁ≠æ..." class="form-input" />
              </div>

              <div class="stats-pills">
                <div class="stat-pill" :class="{ active: serverStatusFilter === 'all' }"
                  @click="serverStatusFilter = 'all'">
                  <span class="label">ÂÖ®ÈÉ®</span>
                  <span class="value">{{ serverList.length }}</span>
                </div>
                <div class="stat-pill online" :class="{ active: serverStatusFilter === 'online' }"
                  @click="serverStatusFilter = serverStatusFilter === 'online' ? 'all' : 'online'">
                  <span class="label">Âú®Á∫ø</span>
                  <span class="value">{{ serverList.filter(s => s.status === 'online').length }}</span>
                </div>
                <div class="stat-pill offline" :class="{ active: serverStatusFilter === 'offline' }"
                  @click="serverStatusFilter = serverStatusFilter === 'offline' ? 'all' : 'offline'">
                  <span class="label">Á¶ªÁ∫ø</span>
                  <span class="value">{{ serverList.filter(s => s.status === 'offline').length }}</span>
                </div>
              </div>
            </div>

            <div class="controls-row">
              <div style="display: flex; gap: 10px; align-items: center;">
                <button class="btn btn-primary" @click="loadServerList" :disabled="serverLoading">
                  <i class="fas fa-sync-alt" :class="{ 'fa-spin': serverLoading }"></i>
                  Âà∑Êñ∞Áä∂ÊÄÅ
                </button>
              </div>

              <div class="refresh-info">
                <div v-if="serverPollingEnabled" style="display: flex; align-items: center; gap: 12px; flex: 1;">
                  <span style="font-size: 12px; color: var(--text-tertiary);">
                    <i class="fas fa-clock" style="margin-right: 4px;"></i>
                    {{ serverRefreshCountdown }} ÁßíÂêéÂà∑Êñ∞
                  </span>
                  <div class="refresh-progress" style="flex: 1; max-width: 100px;">
                    <div class="refresh-progress-bar" :style="{ width: serverRefreshProgress + '%' }"></div>
                  </div>
                </div>
                <button class="btn btn-secondary icon-only"
                  @click="serverPollingEnabled = !serverPollingEnabled; serverPollingEnabled ? startServerPolling() : stopServerPolling()"
                  :title="serverPollingEnabled ? 'ÊöÇÂÅúËá™Âä®ÁõëÊµã' : 'ÂºÄÂêØËá™Âä®ÁõëÊµã'">
                  <i class="fas" :class="serverPollingEnabled ? 'fa-pause' : 'fa-play'"></i>
                </button>
                <button class="btn btn-secondary" style="padding: 6px 12px; min-width: 100px;" @click="probeAllServers"
                  :disabled="probeStatus === 'loading'">
                  <i v-if="probeStatus === 'success'" class="fas fa-check" style="margin-right: 4px;"></i>
                  <i v-else-if="probeStatus === 'error'" class="fas fa-times"
                    style="color: var(--danger-color); margin-right: 4px;"></i>
                  <i v-else class="fas" :class="{
                    'fa-heartbeat': probeStatus !== 'loading',
                    'fa-spinner fa-spin': probeStatus === 'loading'
                  }"></i>
                  ÊâπÈáèÊã®Êµã
                </button>
              </div>
            </div>
          </div>

          <div v-if="serverLoading && serverList.length === 0" class="loading">
            <div class="spinner" style="margin-bottom: 12px;"></div>
            <p>Ê≠£Âú®ÂêåÊ≠•‰∏ªÊú∫Áä∂ÊÄÅ...</p>
          </div>

          <!-- ‰∏ªÊú∫Âç°ÁâáÂàóË°® -->
          <div v-for="server in filteredServerList" :key="server.id" class="server-card"
            :class="{ expanded: isServerExpanded(server.id) }">
            <div class="server-card-header" @click="toggleServer(server.id)">
              <div class="server-card-info">
                <div class="server-status-indicator" :class="server.status || 'unknown'"></div>
                <div style="flex: 1; min-width: 0;">
                  <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                    <span class="server-name">{{ server.name }}</span>
                    <span v-if="server.last_check_time"
                      style="font-size: 11px; color: var(--text-tertiary); display: inline-flex; align-items: center; gap: 4px;"
                      title="ÊúÄËøëÊõ¥Êñ∞Êó∂Èó¥">
                      <i class="far fa-clock"></i>
                      {{ formatDateTime(server.last_check_time) }}
                    </span>
                    <span v-if="server.response_time"
                      style="font-size: 11px; color: var(--text-tertiary); display: inline-flex; align-items: center; gap: 4px;"
                      title="ÂìçÂ∫îÊó∂Èó¥">
                      <i class="fas fa-bolt" style="font-size: 10px;"></i>
                      {{ server.response_time }}ms
                    </span>
                  </div>
                  <div class="server-host">{{ server.username }}@{{ formatHost(server.host) }}:{{ server.port }}</div>
                </div>
              </div>

              <div style="display: flex; align-items: center; gap: 12px;" class="header-right">
                <div class="server-tags" style="margin-top: 0; display: flex; gap: 4px;"
                  v-if="server.tags && server.tags.length > 0">
                  <span v-for="tag in server.tags" :key="tag" class="server-tag">{{ tag }}</span>
                </div>

                <div class="account-balance" style="gap: 6px;">
                  <button class="btn btn-sm btn-secondary icon-only" @click.stop="refreshServerInfo(server.id)"
                    title="Âà∑Êñ∞Áä∂ÊÄÅ">
                    <i class="fas" :class="server.loading ? 'fa-spinner fa-spin' : 'fa-sync-alt'"></i>
                  </button>
                  <button class="btn btn-sm btn-primary" @click.stop="openSSHTerminal(server)" title="SSH ËøûÊé•">
                    <i class="fas fa-terminal"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Âç°ÁâáÂ±ïÂºÄËØ¶ÊÉÖÂå∫Âüü -->
            <div class="server-card-body">
              <div class="divider" style="margin: 0; opacity: 0.5;"></div>
              <div class="server-details" style="border: none; padding: 8px 3px;">

                <div v-if="server.loading" class="loading" style="padding: 8px 3px;">
                  <div class="spinner-sm"></div>
                  <p style="margin-top: 10px; font-size: 12px;">Ê≠£Âú®Ëé∑ÂèñÂÆûÊó∂Ë¥üËΩΩÂèÇÊï∞...</p>
                </div>

                <div v-else-if="server.error" class="error" style="margin: 0px 3px;">
                  <i class="fas fa-exclamation-circle"></i> {{ server.error }}
                </div>

                <div v-else-if="server.info">
                  <!-- ‰∏ªË¶Å‰ø°ÊÅØÁΩëÊ†º -->
                  <div class="server-details-grid">
                    <!-- Á≥ªÁªü‰ø°ÊÅØ -->
                    <div class="server-detail-section">
                      <h4><i class="fas fa-microchip"></i> Á°¨‰ª∂ËΩΩËç∑</h4>
                      <div class="server-detail-item">
                        <span class="server-detail-label">CPU Ë¥üËΩΩ ({{ server.info.cpu.Cores }} Ê†∏ÂøÉ)</span>
                        <span class="server-detail-value">{{ server.info.cpu.Usage }}</span>
                      </div>
                      <div class="progress-bar">
                        <div class="progress-bar-fill" :style="{ width: server.info.cpu.Usage }"></div>
                      </div>

                      <div class="server-detail-item" style="margin-top: 12px;">
                        <span class="server-detail-label">ÂÜÖÂ≠ò‰ΩøÁî® ({{ server.info.memory.Used }} / {{
                          server.info.memory.Total }})</span>
                        <span class="server-detail-value">{{ server.info.memory.Usage }}</span>
                      </div>
                      <div class="progress-bar">
                        <div class="progress-bar-fill" :class="getMemoryClass(server.info.memory.Usage)"
                          :style="{ width: server.info.memory.Usage }"></div>
                      </div>
                    </div>

                    <!-- Â≠òÂÇ®ËµÑÊ∫ê -->
                    <div class="server-detail-section">
                      <h4><i class="fas fa-database"></i> Â≠òÂÇ®ËµÑÊ∫ê</h4>
                      <!-- Âè™ÊòæÁ§∫‰∏ªÂàÜÂå∫ÊàñÁ¨¨‰∏Ä‰∏™ÂàÜÂå∫ -->
                      <div v-if="server.info.disk && server.info.disk.length > 0">
                        <div class="server-detail-item">
                          <span class="server-detail-label">‰∏ªÂ≠òÂÇ® ({{ server.info.disk[0].device }})</span>
                          <span class="server-detail-value">{{ server.info.disk[0].used }} / {{
                            server.info.disk[0].total }}</span>
                        </div>
                        <div class="progress-bar">
                          <div class="progress-bar-fill" :class="getDiskClass(server.info.disk[0].usage)"
                            :style="{ width: server.info.disk[0].usage }"></div>
                        </div>
                        <div class="server-detail-item" style="border:none; padding: 4px 0 0 0;">
                          <span class="server-detail-value" style="font-size: 11px; opacity: 0.7;">‰ΩøÁî®Áéá: {{
                            server.info.disk[0].usage }}</span>
                        </div>
                      </div>
                    </div>

                    <!-- ËäÇÁÇπÊ¶ÇËßà -->
                    <div class="server-detail-section">
                      <h4><i class="fas fa-info-circle"></i> Á≥ªÁªüÊëòË¶Å</h4>
                      <div v-for="(value, key) in server.info.system" :key="key" class="server-detail-item"
                        style="padding: 4px 0;">
                        <span class="server-detail-label">{{ translateInfoKey(key) }}</span>
                        <span class="server-detail-value">{{ key === 'Uptime' ? formatUptime(value) : value
                          }}</span>
                      </div>
                    </div>
                  </div>

                  <!-- ÂÆπÂô®ËôöÊãüÂåñ - ÂèØÊäòÂè†Èù¢Êùø -->
                  <div class="server-detail-section docker-section">
                    <div class="docker-section-header" @click.stop="toggleDockerPanel(server.id)"
                      style="cursor: pointer;">
                      <h4>
                        <i class="fab fa-docker"></i> ÂÆπÂô®ËôöÊãüÂåñ
                        <i class="fas fa-chevron-right toggle-icon"
                          :style="{ transform: isDockerPanelExpanded(server.id) ? 'rotate(90deg)' : 'rotate(0deg)' }"></i>
                      </h4>
                      <div class="docker-section-status">
                        <span class="docker-status-badge"
                          :class="server.info.docker.installed ? 'installed' : 'not-installed'">
                          {{ server.info.docker.installed ? 'Â∑≤ÂÆâË£Ö' : 'Êú™Ê£ÄÊµãÂà∞' }}
                        </span>
                        <span v-if="server.info.docker.installed && server.info.docker.containers.length > 0"
                          class="docker-container-count">
                          <span style="color: var(--success-color);">‚óè</span>
                          {{ getRunningContainers(server.info.docker.containers) }} ËøêË°å
                          <span v-if="getPausedContainers(server.info.docker.containers) > 0"
                            style="margin-left: 8px; color: var(--warning-color);">‚óè</span>
                          <span v-if="getPausedContainers(server.info.docker.containers) > 0">
                            {{ getPausedContainers(server.info.docker.containers) }} ÊöÇÂÅú
                          </span>
                        </span>
                      </div>
                    </div>

                    <!-- Â±ïÂºÄÁöÑÂÆπÂô®Èù¢Êùø - ‰ΩøÁî®Á±ª‰ºº modal ÁöÑÊ†∑Âºè -->
                    <div v-if="isDockerPanelExpanded(server.id) && server.info.docker.installed"
                      class="docker-panel-content">
                      <div v-if="server.info.docker.containers.length > 0" class="docker-containers-grid">
                        <div v-for="container in server.info.docker.containers" :key="container.id"
                          class="docker-container-mini-card" :class="{ 
                            'running': container.status.includes('Up') && !container.status.includes('Paused'),
                            'paused': container.status.includes('Paused')
                          }">
                          <div class="container-info">
                            <span class="container-status-dot"
                              :class="{ 'online': container.status.includes('Up') && !container.status.includes('Paused'), 'paused': container.status.includes('Paused') }"></span>
                            <span class="container-name" :title="container.name">{{ container.name }}</span>
                          </div>
                          <div class="container-actions">
                            <button v-if="container.status.includes('Up') && !container.status.includes('Paused')"
                              class="btn btn-xs btn-warning icon-only"
                              @click.stop="handleDockerAction(server.id, container.id, 'pause')" title="ÊöÇÂÅú">
                              <i class="fas fa-pause"></i>
                            </button>
                            <button v-else-if="container.status.includes('Paused')"
                              class="btn btn-xs btn-success icon-only"
                              @click.stop="handleDockerAction(server.id, container.id, 'unpause')" title="ÊÅ¢Â§ç">
                              <i class="fas fa-play"></i>
                            </button>
                            <button v-else class="btn btn-xs btn-success icon-only"
                              @click.stop="handleDockerAction(server.id, container.id, 'start')" title="ÂêØÂä®">
                              <i class="fas fa-play"></i>
                            </button>
                            <button class="btn btn-xs btn-secondary icon-only"
                              @click.stop="handleDockerAction(server.id, container.id, 'restart')" title="ÈáçÂêØ">
                              <i class="fas fa-redo-alt"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div v-else class="docker-empty-mini">
                        <i class="fab fa-docker"></i>
                        <span>ÊöÇÊó†ÂÆπÂô®</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div v-if="!serverLoading && filteredServerList.length === 0" class="empty-state">
            <div class="server-empty-state-icon">üîç</div>
            <p>Êú™ÊâæÂà∞Á¨¶ÂêàÊù°‰ª∂ÁöÑ‰∏ªÊú∫</p>
          </div>
        </div>

        <!-- ÂêéÂè∞ÁÆ°ÁêÜÊ†áÁ≠æÈ°µ -->
        <div v-show="serverCurrentTab === 'management'" class="sub-tab-content quick-fade-in">
          <!-- ‰∏ªÊú∫ÁÆ°ÁêÜÈù¢Êùø -->
          <div class="panel">
            <div class="panel-header"
              style="border-bottom: 1px solid var(--border-color); padding-bottom: 12px; margin-bottom: 12px;">
              <div
                style="display: flex; justify-content: space-between; align-items: center; width: 100%; flex-wrap: wrap; gap: 12px;">
                <div class="panel-title-group" style="display: flex; align-items: center; gap: 12px;">
                  <div class="panel-title">‰∏ªÊú∫ÂÆû‰æãÁÆ°ÁêÜ</div>
                </div>

                <div style="display: flex; gap: 8px;">
                  <button class="btn btn-success btn-sm" @click="openAddServerModal">
                    <i class="fas fa-plus"></i> Ê∑ªÂä†‰∏ªÊú∫
                  </button>
                  <button class="btn btn-secondary btn-sm" @click="loadServerList" :disabled="serverLoading">
                    <i class="fas fa-sync-alt" :class="{ 'fa-spin': serverLoading }"></i>
                  </button>
                  <button class="btn btn-secondary btn-sm" @click="probeAllServers"
                    :disabled="probeStatus === 'loading'">
                    <i class="fas fa-heartbeat"></i> ÊâπÈáèÊã®Êµã
                  </button>
                  <button class="btn btn-secondary btn-sm" @click="exportServers">
                    <i class="fas fa-upload"></i> ÂØºÂá∫
                  </button>
                  <button class="btn btn-secondary btn-sm" @click="openImportServerModal">
                    <i class="fas fa-download"></i> ÂØºÂÖ•
                  </button>
                </div>
              </div>
            </div>

            <div v-if="serverLoading" class="loading">
              <div class="spinner"></div>
              <div style="margin-top: 12px;">Âä†ËΩΩ‰∏≠...</div>
            </div>

            <div v-else class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th class="text-center" style="width: 80px;">Áä∂ÊÄÅ</th>
                    <th>‰∏ªÊú∫ÂêçÁß∞</th>
                    <th>ËøûÊé•Âú∞ÂùÄ</th>
                    <th class="text-center" style="width: 100px;">ÂìçÂ∫î</th>
                    <th class="text-center">ÊúÄÂêéÊ£ÄÊü•</th>
                    <th class="text-center" style="width: 120px;">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="server in serverList" :key="server.id">
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="ag-status-badge"
                          :class="server.status === 'online' ? 'ag-status-online' : (server.status === 'offline' ? 'ag-status-error' : 'ag-status-unknown')">
                          {{ server.status === 'online' ? 'Âú®Á∫ø' : (server.status === 'offline' ? 'Á¶ªÁ∫ø' : 'Êú™Áü•') }}
                        </span>
                      </div>
                    </td>
                    <td>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-server"
                          style="font-size: 12px; color: var(--server-primary); opacity: 0.7;"></i>
                        <strong>{{ server.name }}</strong>
                      </div>
                    </td>
                    <td>
                      <code
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); padding: 2px 8px; border-radius: 6px; font-size: 11px; font-family: var(--font-mono); color: var(--text-secondary);">
                        {{ server.username }}@{{ formatHost(server.host) }}:{{ server.port }}
                      </code>
                    </td>
                    <td class="text-center">
                      <span v-if="server.response_time" class="log-duration">{{ server.response_time }}ms</span>
                      <span v-else style="color: var(--text-tertiary);">-</span>
                    </td>
                    <td class="text-center">
                      <div class="log-time" v-if="server.last_check_time">
                        <i class="far fa-clock" style="margin-right: 4px; opacity: 0.5;"></i>
                        {{ formatDateTime(server.last_check_time) }}
                      </div>
                      <span v-else style="color: var(--text-tertiary); font-size: 11px;">‰ªéÊú™Ê£ÄÊü•</span>
                    </td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <button class="btn btn-icon-refined" @click="openEditServerModal(server.id)" title="ÁºñËæë‰∏ªÊú∫">
                          <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="rebootServerById(server.id)" title="ÈáçÂêØ‰∏ªÊú∫"
                          style="color: var(--warning-color);">
                          <i class="fas fa-redo"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="deleteServerById(server.id)" title="Âà†Èô§‰∏ªÊú∫"
                          style="color: var(--danger-color);">
                          <i class="fas fa-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div v-if="serverList.length === 0" class="empty-state">
                <i class="fas fa-server" style="font-size: 48px; margin-bottom: 16px;"></i>
                <div>ÊöÇÊó†‰∏ªÊú∫ÔºåÁÇπÂáª‰∏äÊñπÊåâÈíÆÊ∑ªÂä†</div>
              </div>
            </div>
          </div>

          <!-- ÊâπÈáèÊ∑ªÂä†‰∏ªÊú∫ -->
          <div class="panel" style="margin-top: 16px;">
            <div class="panel-header">
              <div class="panel-title">ÊâπÈáèÊ∑ªÂä†‰∏ªÊú∫</div>
            </div>
            <div>
              <textarea v-model="serverBatchText" class="form-textarea" placeholder="‰æãÂ¶ÇÔºö
WebÊúçÂä°Âô®,192.168.1.100,22,root,password123
Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®,192.168.1.101,22,root,secure_pass"
                style="min-height: 150px; font-family: var(--font-mono); font-size: 12px; white-space: pre;"></textarea>
              <div v-if="serverBatchError" class="form-error" style="margin-top: 8px;">{{ serverBatchError }}
              </div>
              <div v-if="serverBatchSuccess" class="form-success" style="margin-top: 8px;">{{ serverBatchSuccess
                }}
              </div>
              <button class="btn btn-primary" @click="batchAddServers" :disabled="serverAddingBatch"
                style="width: 100%; margin-top: 12px;">
                {{ serverAddingBatch ? 'Ê∑ªÂä†‰∏≠...' : 'ÊâπÈáèÊ∑ªÂä†' }}
              </button>
            </div>
          </div>

          <!-- ÊâπÈáèÊ∑ªÂä† -->
          <div class="panel" style="margin-top: 16px;">
            <div class="panel-header">
              <div class="panel-title">Âø´Êç∑ÈÖçÁΩÆ</div>
            </div>
            <div class="secondary-config-row" style="padding: 1px;">
              <!-- ÁõëÊéßÂÖ®Â±ÄÈÖçÁΩÆ -->
              <div class="config-card">
                <div class="config-card-title">
                  <i class="fas fa-clock"></i> Ëá™Âä®Êã®ÊµãÁ≠ñÁï•
                </div>
                <div class="form-row">
                  <div class="form-group flex-1">
                    <label>Êé¢ÊµãÂë®Êúü (S)</label>
                    <input type="number" v-model="monitorConfig.interval" class="form-input" min="10" />
                  </div>
                  <div class="form-group flex-1">
                    <label>ÂìçÂ∫îË∂ÖÊó∂ (S)</label>
                    <input type="number" v-model="monitorConfig.timeout" class="form-input" min="1" />
                  </div>
                  <div class="form-group flex-1">
                    <label>Êó•ÂøóÂ≠òÈáè (Â§©)</label>
                    <input type="number" v-model="monitorConfig.logRetentionDays" class="form-input" min="1" />
                  </div>
                </div>
                <button @click="saveMonitorConfig" class="btn btn-primary" :disabled="monitorConfigSaving"
                  style="width: 100%; margin-top: 12px;">
                  <i class="fas" :class="monitorConfigSaving ? 'fa-spinner fa-spin' : 'fa-save'"></i>
                  ÂêåÊ≠•ÈÖçÁΩÆ
                </button>
              </div>

              <!-- ‰∏ªÊú∫Âá≠ÊçÆÁÆ°ÁêÜ -->
              <div class="config-card">
                <div class="config-card-title">
                  <i class="fas fa-shield-alt"></i> È¢ÑËÆæËÆøÈóÆÂá≠ÊçÆ
                  <button class="btn btn-success btn-sm" style="margin-left: auto; padding: 4px 10px;"
                    @click="showAddCredentialModal = true">
                    <!-- <i class="fas fa-plus"></i>  -->
                    Ê∑ªÂä†
                  </button>
                </div>
                <div v-if="serverCredentials.length > 0" class="credential-list" style="margin-top: 10px;">
                  <div v-for="cred in serverCredentials" :key="cred.id" class="credential-item"
                    :class="{ 'is-default': cred.is_default }">
                    <div class="cred-info">
                      <span class="cred-name">
                        <i v-if="cred.is_default" class="fas fa-check-circle"
                          style="color: var(--success-color); font-size: 10px;" title="ÈªòËÆ§Âá≠ÊçÆ"></i>
                        {{ cred.name }}
                        <span class="cred-user">{{ cred.username }}</span>
                      </span>
                    </div>
                    <div class="cred-actions" style="gap: 4px;">
                      <button v-if="!cred.is_default" class="btn btn-icon-sm" @click="setDefaultCredential(cred.id)"
                        title="ËÆæ‰∏∫ÈªòËÆ§">
                        <i class="fas fa-star"></i>
                      </button>
                      <button class="btn btn-icon-sm" @click="deleteCredential(cred.id)" title="Âà†Èô§"
                        style="color: var(--danger-color);">
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <div v-else class="empty-state-mini">
                  <i class="fas fa-key" style="opacity: 0.3; margin-bottom: 8px;"></i>
                  <div style="font-size: 11px; opacity: 0.5;">ÊöÇÊó†È¢ÑËÆæÂá≠ÊçÆ</div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- SSH ÁªàÁ´ØÂ≠êÊ†áÁ≠æÈ°µÂÜÖÂÆπ - ‰ΩøÁî®v-show‰øùÊåÅËøûÊé• -->
        <template v-for="session in sshSessions" :key="'content-' + session.id">
          <div v-show="serverCurrentTab === 'ssh_' + session.id" class="sub-tab-content ssh-tab-content">
            <!-- ‰ΩøÁî® panel Â∏ÉÂ±Ä -->
            <div class="panel">
              <div class="panel-header">
                <div class="panel-title"></div>
                <div style="display: flex; gap: 8px;">
                  <button class="btn btn-danger" style="padding: 6px 12px;" @click="closeSSHSession(session.id)"
                    title="ÂÖ≥Èó≠‰ºöËØù">
                    <i class="fas fa-times"></i>
                  </button>
                  <button class="btn btn-secondary" style="padding: 6px 12px;" @click="reconnectSSHSession(session.id)"
                    title="ÈáçÊñ∞ËøûÊé•">
                    <!-- :disabled="session.connected"  -->
                    <i class="fas fa-sync-alt"></i>
                  </button>
                </div>
              </div>

              <!-- ÂÜÖÂÆπÂÆπÂô® -->
              <div class="ssh-content-wrapper">
                <!-- ÁªàÁ´ØËßÜÂõæ -->
                <div class="ssh-terminal-container">
                  <div :id="'ssh-terminal-' + session.id" class="ssh-terminal-pane-embedded"></div>
                </div>
              </div>
            </div>
          </div>
        </template>

      </div>
      <!-- ==================== ‰∏ªÊú∫ÁÆ°ÁêÜÈÉ®ÂàÜÁªìÊùü ==================== -->

      <!-- ==================== Antigravity ÁÆ°ÁêÜÈÉ®ÂàÜ ==================== -->
      <div v-if="mainActiveTab === 'antigravity'" class="tab-content antigravity-tab-content"
        :class="getTabAnimationClass('antigravity')">

        <!-- Antigravity Â≠êÊ†áÁ≠æÊ†è -->
        <div class="sec-tabs">
          <button class="tab-btn" :class="{ active: antigravityCurrentTab === 'quotas' }"
            @click="switchAntigravityTab('quotas')">
            <i class="fas fa-chart-pie"></i> È¢ùÂ∫¶‰ΩøÁî®
          </button>
          <button class="tab-btn" :class="{ active: antigravityCurrentTab === 'accounts' }"
            @click="switchAntigravityTab('accounts')">
            <i class="fas fa-list"></i> Ë¥¶Âè∑ÁÆ°ÁêÜ
          </button>
          <button class="tab-btn" :class="{ active: antigravityCurrentTab === 'logs' }"
            @click="switchAntigravityTab('logs')">
            <i class="fas fa-history"></i> Ë∞ÉÁî®Êó•Âøó
          </button>
          <button class="tab-btn" :class="{ active: antigravityCurrentTab === 'settings' }"
            @click="switchAntigravityTab('settings')">
            <i class="fas fa-cog"></i> Ê®°ÂùóÈÖçÁΩÆ
          </button>
        </div>

        <!-- Ë¥¶Âè∑ÁÆ°ÁêÜÂàóË°® -->
        <!-- Âá≠ËØÅÂàóË°® (Accounts) -->
        <div v-show="antigravityCurrentTab === 'accounts'" class="sub-tab-content quick-fade-in">
          <div class="panel">
            <div class="panel-header">
              <div style="display: flex; gap: 8px;">
                <button class="btn btn-primary" @click="showOAuthExpand = !showOAuthExpand"
                  style="background: linear-gradient(135deg, #4285F4, #34A853);">
                  <i class="fab fa-google"></i> OAuth ÊéàÊùÉ
                </button>
                <button class="btn btn-success" @click="openAddAntigravityManualModal">
                  <i class="fas fa-plus"></i> ÊâãÂä®Ê∑ªÂä†
                </button>
                <button class="btn btn-secondary" @click="refreshAllAgAccounts" title="Âà∑Êñ∞ÂÖ®ÈÉ®Âá≠ËØÅ">
                  <i class="fas fa-sync-alt" :class="{ 'fa-spin': agRefreshingAll }"></i>
                </button>
              </div>
            </div>

            <!-- Expandable OAuth Panel -->
            <div class="ag-expandable-panel" :class="{ expanded: showOAuthExpand }">
              <div class="panel-header" style="border-bottom: none; padding-bottom: 0;">
                <div class="panel-title" style="width: 100%; text-align: center; padding-top: 10px;">ËøûÊé• Google Ë¥¶Âè∑
                </div>
              </div>

              <div class="oauth-modern-body">
                <!-- Step 1 -->
                <div class="oauth-step-item">
                  <div class="step-badge">1</div>
                  <div class="step-content">
                    <div class="step-text">ÁôªÂΩï Google ‰ª•Ëé∑ÂèñÊéàÊùÉÁ†Å</div>
                    <button class="btn btn-ag btn-block" @click="openGoogleAuthUrl">
                      <i class="fab fa-google"></i> Ëé∑ÂèñÊéàÊùÉÈìæÊé•
                    </button>
                  </div>
                </div>

                <!-- Divider -->
                <div class="oauth-step-line"></div>

                <!-- Step 2 -->
                <div class="oauth-step-item">
                  <div class="step-badge">2</div>
                  <div class="step-content">
                    <div class="step-text">Âú®‰∏ãÊñπÁ≤òË¥¥ÈáçÂÆöÂêëÂêéÁöÑ URL</div>
                    <textarea v-model="agOauthUrl" class="form-textarea oauth-textarea"
                      placeholder="Á≤òË¥¥‰ª• http:// ÂºÄÂ§¥ÁöÑÂÆåÊï¥ URL..." spellcheck="false"></textarea>
                  </div>
                </div>

                <!-- Options -->
                <div class="oauth-options">
                  <div class="oauth-option-row">
                    <input type="text" v-model="agCustomProjectId" class="form-input input-sm"
                      placeholder="Ëá™ÂÆö‰πâÈ°πÁõÆ ID (ÂèØÈÄâ)">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <label class="switch">
                        <input type="checkbox" v-model="agAllowRandomProjectId">
                        <span class="slider round"></span>
                      </label>
                      <span style="font-size: 12px; color: var(--text-secondary);">ÂÖÅËÆ∏ÈöèÊú∫ ID</span>
                    </div>
                  </div>
                </div>

                <!-- Action -->
                <button class="btn btn-success btn-block btn-lg mt-3" @click="parseAgOauthUrl"
                  :disabled="!agOauthUrl || antigravityLoading">
                  <i class="fas" :class="antigravityLoading ? 'fa-spinner fa-spin' : 'fa-link'"></i>
                  {{ antigravityLoading ? 'È™åËØÅ‰∏≠...' : 'È™åËØÅÂπ∂ËøûÊé•' }}
                </button>
              </div>
            </div>

            <!-- ÁªüËÆ°‰ø°ÊÅØÊ†è -->
            <div v-if="antigravityStats" class="stats-bar"
              style="display: none; gap: 20px; padding: 12px 16px; background: var(--bg-secondary); margin-bottom: 2px; border-radius: 8px; font-size: 13px;">
              <div class="stat-item">
                <span style="opacity: 0.7;">ÊÄª Token:</span>
                <strong style="margin-left: 4px;">{{ antigravityStats.total || 0 }}</strong>
              </div>
              <div class="stat-item">
                <span style="opacity: 0.7;">Âú®Á∫ø:</span>
                <strong style="margin-left: 4px; color: var(--success-color);">{{ antigravityStats.online || 0
                  }}</strong>
              </div>
              <div class="stat-item">
                <span style="opacity: 0.7;">Êó†Êïà:</span>
                <strong style="margin-left: 4px; color: var(--danger-color);">{{ antigravityStats.disabled || 0
                  }}</strong>
              </div>
            </div>


            <div v-if="antigravityLoading && antigravityAccounts.length === 0" class="loading">
              <div class="spinner"></div>
              <div style="margin-top: 12px;">Âä†ËΩΩ‰∏≠...</div>
            </div>

            <div v-else class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Â§áÊ≥®ÂêçÁß∞</th>
                    <th>È°πÁõÆ ID</th>
                    <th>ÈÇÆÁÆ±</th>
                    <th class="text-center">Ë∞ÉÁî®ÁªüËÆ°</th>
                    <th class="text-center">Áä∂ÊÄÅ</th>
                    <th class="text-center">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="account in antigravityAccounts" :key="account.id">
                    <td><strong>{{ account.name || 'Êú™ÂëΩÂêç' }}</strong></td>
                    <td><code class="code-sm">{{ account.projectId || '-' }}</code></td>
                    <td><span style="font-size: 11px; opacity: 0.7;">{{ account.email || '-' }}</span></td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span style="color: var(--success-color); font-weight: 700; font-size: 13px;">{{
                          account.success_count || 0 }}</span>
                        <div style="width: 1px; height: 12px; background: var(--border-color); opacity: 0.5;">
                        </div>
                        <span style="color: var(--danger-color); font-weight: 700; font-size: 13px;">{{
                          account.error_count || 0 }}</span>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="ag-status-badge"
                          :class="account.status === 'online' ? 'ag-status-online' : (account.status === 'error' ? 'ag-status-error' : 'ag-status-unknown')">
                          {{ account.status === 'online' ? 'Âú®Á∫ø' : (account.status === 'error' ? 'ÂºÇÂ∏∏' : 'Êú™Áü•') }}
                        </span>
                      </div>
                    </td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <button class="btn btn-icon-refined"
                          :style="{ color: account.enable ? 'var(--success-color)' : 'var(--text-tertiary)' }"
                          @click="toggleAntigravityAccount(account)" :title="account.enable ? 'ÂÅúÁî®Ë¥¶Âè∑' : 'ÂêØÁî®Ë¥¶Âè∑'">
                          <i class="fas" :class="account.enable ? 'fa-toggle-on' : 'fa-toggle-off'"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="editAntigravityAccount(account)" title="ÁºñËæëÈÖçÁΩÆ">
                          <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-icon-refined" @click="deleteAntigravityAccount(account)" title="Âà†Èô§ÊéàÊùÉ"
                          style="color: var(--danger-color);">
                          <i class="fas fa-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div v-if="antigravityAccounts.length === 0" class="empty-state">
                <i class="fas fa-atom" style="font-size: 48px; margin-bottom: 16px;"></i>
                <div>ÊöÇÊó†Ë¥¶Âè∑ÔºåÁÇπÂáª‰∏äÊñπÊåâÈíÆÊñ∞Â¢ûÊéàÊùÉ</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Âá≠ËØÅÁî®Èáè (Usage/Quotas) -->
        <div v-show="antigravityCurrentTab === 'quotas'" class="sub-tab-content quick-fade-in">
          <div class="panel-header" style="justify-content: space-between; padding-bottom: 10px;">
            <div style="display: flex; gap: 16px; align-items: center;">
              <div class="panel-title">È¢ùÂ∫¶Áä∂ÊÄÅ</div>
              <select class="ag-account-selector" v-model="antigravityQuotaSelectedAccountId"
                @change="loadAntigravityQuotas()" style="padding-left: 8px; width: 180px;">
                <option v-for="acc in antigravityAccounts" :key="acc.id" :value="acc.id">
                  {{ acc.name }} ({{ acc.status === 'online' ? 'Âú®Á∫ø' : 'Á¶ªÁ∫ø' }})
                </option>
              </select>
            </div>
            <div style="display: flex; gap: 8px;">
              <button class="btn btn-secondary btn-sm" @click="toggleAntigravityQuotaView()" title="ÂàáÊç¢ËßÜÂõæ">
                <i class="fas" :class="antigravityQuotaViewMode === 'list' ? 'fa-th-large' : 'fa-list'"></i>
                {{ antigravityQuotaViewMode === 'list' ? 'ÂàÜÁªÑËßÜÂõæ' : 'ÂàóË°®ËßÜÂõæ' }}
              </button>
              <button class="btn btn-secondary btn-sm" @click="loadAntigravityQuotas(false)"
                :disabled="antigravityQuotaLoading">
                <i class="fas fa-sync-alt" :class="{ 'fa-spin': antigravityQuotaLoading }"></i> Âà∑Êñ∞È¢ùÂ∫¶
              </button>
            </div>
          </div>

          <div v-if="antigravityQuotaLoading && Object.keys(antigravityQuotas).length === 0" class="loading">
            <div class="spinner"></div>
            <div style="margin-top: 12px;">Ê≠£Âú®Ëé∑ÂèñÈ¢ùÂ∫¶ËØ¶ÊÉÖ...</div>
          </div>

          <div v-else>
            <!-- ÂàÜÁªÑËßÜÂõæ (Cards) -->
            <div v-if="antigravityQuotaViewMode === 'grouped'" class="ag-quota-grid quick-fade-in">
              <div v-for="(group, groupId) in antigravityQuotas" :key="groupId" class="quota-card">
                <div class="panel-header"
                  style="background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); padding: 8px 12px;">
                  <div class="panel-title" style="font-size: 14px; gap: 8px;">
                    <span style="font-size: 18px;">{{ group.icon }}</span>
                    <span>{{ group.name }}</span>
                  </div>
                  <div v-if="group.remaining !== undefined" class="ag-status-badge"
                    :style="{ color: getAgQuotaColor(group.remaining), borderColor: getAgQuotaColor(group.remaining) }">
                    {{ group.remaining }}%
                  </div>
                </div>
                <div style="padding: 12px;">
                  <div style="font-size: 12px; color: var(--text-tertiary); margin-bottom: 10px;">{{
                    group.description
                    }}</div>

                  <!-- ‰∏ªËøõÂ∫¶Êù° (Â¶ÇÊûúÊòØÂàÜÁªÑ) -->
                  <div v-if="group.remaining !== undefined" class="quota-progress-container"
                    style="margin-bottom: 12px;">
                    <div class="progress-bar-compact" style="height: 10px;">
                      <div class="progress-bar-fill"
                        :style="{ width: group.remaining + '%', background: getAgQuotaColor(group.remaining) }">
                      </div>
                    </div>
                  </div>

                  <!-- ÈáçÁΩÆÊó∂Èó¥ -->
                  <div v-if="group.resetTime"
                    style="font-size: 11px; color: var(--text-secondary); margin-bottom: 12px; display: flex; align-items: center; gap: 4px;">
                    <i class="far fa-clock"></i>
                    <span>ÈáçÁΩÆ: {{ group.resetTime }} <span style="opacity: 0.8;">({{
                        formatResetCountdown(group.resetTime)
                        }})</span></span>
                  </div>

                  <!-- ÁªÜÂàÜÊ®°ÂûãÂàóË°® (ÂèØÈÄâÂ±ïÂºÄÔºåÊàñÁõ¥Êé•Á¥ßÂáëÂàóÂá∫) -->
                  <div style="display: flex; flex-direction: column; gap: 8px;">
                    <div v-for="model in group.models" :key="model.id"
                      style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; background: var(--bg-tertiary); border-radius: 6px; font-size: 12px;">
                      <div style="display: flex; align-items: center; gap: 6px; flex: 1; min-width: 0;">
                        <span
                          style="font-family: var(--font-mono); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                          :title="model.id">{{ model.id }}</span>
                      </div>
                      <div style="display: flex; align-items: center; gap: 10px;">
                        <span :style="{ color: getAgQuotaColor(model.remaining) }" style="font-weight: 600;">{{
                          model.remaining }}%</span>
                        <label class="switch">
                          <input type="checkbox" :checked="model.enabled !== false"
                            @change="toggleModelStatus(model, $event)">
                          <span class="slider round"></span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ÂàóË°®ËßÜÂõæ (Table) -->
            <div v-else class="ag-quota-list-view quick-fade-in">
              <div class="panel">
                <div class="table-container">
                  <table class="data-table">
                    <thead>
                      <tr>
                        <th style="width: 250px;">Ê®°Âûã ID</th>
                        <th>ÂàÜÁªÑ</th>
                        <th>Ââ©‰ΩôÈ¢ùÂ∫¶</th>
                        <th style="width: 180px; text-align: center;">ÈáçÁΩÆÊó∂Èó¥</th>
                        <th style="width: 80px; text-align: center;">ÂºÄÂÖ≥</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr v-for="model in getAllAntigravityModels()" :key="model.id"
                        :style="{ opacity: model.enabled === false ? 0.5 : 1, filter: model.enabled === false ? 'grayscale(100%)' : 'none', background: model.enabled === false ? 'var(--bg-tertiary)' : 'inherit' }">
                        <td style="font-family: var(--font-mono); font-weight: 600;">{{ model.id }}</td>
                        <td>{{ model.groupIcon }} {{ model.groupName }}</td>
                        <td>
                          <div class="quota-progress-container" style="width: 100%;">
                            <div class="progress-bar-compact">
                              <div class="progress-bar-fill"
                                :style="{ width: model.remaining + '%', background: getAgQuotaColor(model.remaining) }">
                              </div>
                            </div>
                            <span class="quota-percent" style="margin-left: 10px; width: 40px; text-align: right;"
                              :style="{ color: getAgQuotaColor(model.remaining) }">{{ model.remaining }}%</span>
                          </div>
                        </td>
                        <td style="text-align: center; font-size: 12px;">
                          {{ model.resetTime }} <span style="opacity: 0.7; font-size: 0.9em;">({{
                            formatResetCountdown(model.resetTime) }})</span>
                        </td>
                        <td style="text-align: center;">
                          <label class="switch">
                            <input type="checkbox" :checked="model.enabled !== false"
                              @change="toggleModelStatus(model, $event)">
                            <span class="slider round"></span>
                          </label>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Ë∞ÉÁî®Êó•Âøó (Logs) -->
        <div v-show="antigravityCurrentTab === 'logs'" class="sub-tab-content quick-fade-in">
          <div class="panel">
            <div class="panel-header" style="border-bottom: 1px solid var(--border-color);">
              <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                <div class="panel-title-group">
                  <div class="panel-title">Antigravity API Ë∞ÉÁî®Êó•Âøó</div>
                </div>
                <div style="display: flex; gap: 8px;">
                  <button class="btn btn-secondary btn-sm" @click="loadAntigravityLogs" :disabled="antigravityLoading">
                    <i class="fas fa-sync-alt" :class="{ 'fa-spin': antigravityLoading }"></i> Âà∑Êñ∞
                  </button>
                  <button class="btn btn-danger btn-sm" @click="clearAntigravityLogs">
                    <i class="fas fa-trash-alt"></i> Ê∏ÖÁ©∫
                  </button>
                </div>
              </div>
            </div>
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th style="width: 160px;" class="text-center">Êó∂Èó¥</th>
                    <th>Ë¥¶Âè∑Â§áÊ≥®</th>
                    <th class="text-center">Ê®°Âûã</th>
                    <th>Ë∑ØÂæÑ</th>
                    <th class="text-center">Áä∂ÊÄÅ</th>
                    <th class="text-center">ËÄóÊó∂</th>
                    <th class="text-center" style="width: 80px;">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="log in antigravityLogs" :key="log.id">
                    <td class="text-center">
                      <div class="flex-cell">
                        <div class="log-time">
                          <i class="far fa-clock" style="margin-right: 4px; opacity: 0.5;"></i>
                          {{ formatDateTime(log.timestamp) }}
                        </div>
                      </div>
                    </td>
                    <td>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-id-card" style="font-size: 12px; color: var(--ag-primary); opacity: 0.7;"></i>
                        <strong>{{ log.accountName || 'System' }}</strong>
                        <span v-if="log.isBalanced" class="badge-lb" title="ÁªèËøáÂÖ®Â±ÄË¥üËΩΩÂùáË°°ÂàÜÂèë">LB</span>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <code class="code-sm">{{ log.model || '-' }}</code>
                      </div>
                    </td>
                    <td>
                      <div style="display: flex; align-items: center;">
                        <span class="method-badge" :class="'method-' + (log.method || 'POST').toLowerCase()">
                          {{ log.method || 'POST' }}
                        </span>
                        <span class="log-path" :title="log.path">{{ log.path }}</span>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span :class="getGcliStatusClass(log.statusCode)" class="ag-status-badge">
                          {{ log.statusCode }}
                        </span>
                      </div>
                    </td>
                    <td class="text-center">
                      <div class="flex-cell">
                        <span class="log-duration">{{ log.durationMs }}ms</span>
                      </div>
                    </td>
                    <td class="actions text-center">
                      <div class="flex-cell">
                        <button class="btn btn-icon-refined" @click="viewAntigravityLogDetail(log)" title="Êü•ÁúãËØ¶ÊÉÖ">
                          <i class="fas fa-eye"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                  <tr v-if="antigravityLogs.length === 0">
                    <td colspan="7" style="text-align: center; padding: 60px; color: var(--text-tertiary);">
                      <i class="fas fa-inbox"
                        style="font-size: 40px; display: block; margin-bottom: 12px; opacity: 0.3;"></i>
                      ÊöÇÊó†Ë∞ÉÁî®Êó•Âøó
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Ê®°ÂùóËÆæÁΩÆ (Settings) -->
        <div v-show="antigravityCurrentTab === 'settings'" class="sub-tab-content quick-fade-in">
          <div class="panel">
            <div class="panel-header" style="border-bottom: 1px solid var(--border-color);">
              <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                <div class="panel-title-group">
                  <div class="panel-title">Antigravity API ÂèÇÊï∞ÈÖçÁΩÆ</div>
                </div>
                <div style="display: flex; gap: 8px;">
                  <button class="btn btn-secondary btn-sm" @click="loadAntigravitySettings"
                    :disabled="antigravityLoading">
                    <i class="fas fa-sync-alt" :class="{ 'fa-spin': antigravityLoading }"></i> Âà∑Êñ∞
                  </button>
                  <button class="btn btn-primary btn-sm" @click="saveAllAgSettings" :disabled="antigravitySaving">
                    <i class="fas" :class="antigravitySaving ? 'fa-spinner fa-spin' : 'fa-save'"></i> ‰øùÂ≠òÂÖ®ÈÉ®
                  </button>
                </div>
              </div>
            </div>

            <div style="padding: 10px 3px 3px 3px;">
              <!-- ÁîüÊàêÂèÇÊï∞ -->
              <div style="margin-bottom: 20px;">
                <div style="font-size: 13px; font-weight: 600; margin-bottom: 10px; color: var(--ag-primary);">
                  <i class="fas fa-sliders-h"></i> ÁîüÊàêÂèÇÊï∞
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px;">
                  <div>
                    <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ÈªòËÆ§Ê∏©Â∫¶</label>
                    <input type="number" step="0.1" min="0" max="2" v-model="agSettingsForm.DEFAULT_TEMPERATURE"
                      class="form-input" style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="1">
                  </div>
                  <div>
                    <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ÈªòËÆ§
                      top_p</label>
                    <input type="number" step="0.01" min="0" max="1" v-model="agSettingsForm.DEFAULT_TOP_P"
                      class="form-input" style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="0.85">
                  </div>
                  <div>
                    <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ÈªòËÆ§
                      top_k</label>
                    <input type="number" step="1" min="1" v-model="agSettingsForm.DEFAULT_TOP_K" class="form-input"
                      style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="50">
                  </div>
                  <div>
                    <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ÈªòËÆ§ÊúÄÂ§ß
                      Tokens</label>
                    <input type="number" step="1" min="1" v-model="agSettingsForm.DEFAULT_MAX_TOKENS" class="form-input"
                      style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="8096">
                  </div>
                </div>
              </div>

              <!-- Ê®°ÂûãÈáçÂÆöÂêë -->
              <div style="margin-bottom: 24px;">
                <div
                  style="font-size: 14px; font-weight: 600; margin-bottom: 12px; color: var(--ag-primary); display: flex; align-items: center; gap: 8px;">
                  <i class="fas fa-exchange-alt"></i> Ê®°ÂûãÈáçÂÆöÂêë (Âà´Âêç)
                </div>
                <!-- ÂàóË°® -->
                <div v-if="antigravityModelRedirects.length > 0"
                  style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 16px;">
                  <div v-for="r in antigravityModelRedirects" :key="r.source_model"
                    style="background: var(--bg-tertiary); padding: 10px 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid var(--border-color); transition: all 0.2s;"
                    :style="agEditingRedirectSource === r.source_model ? 'border-color: var(--ag-primary); box-shadow: 0 0 0 2px rgba(var(--ag-primary-rgb), 0.1);' : ''">

                    <div v-if="agEditingRedirectSource !== r.source_model"
                      style="display: flex; align-items: center; gap: 10px; flex: 1;" @dblclick="editModelRedirect(r)">
                      <div
                        style="background: rgba(var(--ag-primary-rgb), 0.1); color: var(--ag-primary); padding: 2px 8px; border-radius: 4px; font-weight: 600; font-size: 12px;">
                        {{ r.source_model }}</div>
                      <i class="fas fa-long-arrow-alt-right" style="opacity: 0.3;"></i>
                      <div style="font-size: 13px; color: var(--text-primary);">{{ r.target_model }}</div>
                    </div>

                    <div v-else style="display: flex; align-items: center; gap: 10px; flex: 1;">
                      <input type="text" v-model="newRedirectSource" class="form-input-sm"
                        style="flex: 1; min-width: 0;" placeholder="Ê∫êÊ®°Âûã">
                      <i class="fas fa-long-arrow-alt-right" style="opacity: 0.3;"></i>
                      <input type="text" v-model="newRedirectTarget" class="form-input-sm"
                        style="flex: 1; min-width: 0;" placeholder="ÁõÆÊ†áÊ®°Âûã">
                    </div>

                    <div style="display: flex; gap: 6px; margin-left: 15px;">
                      <template v-if="agEditingRedirectSource === r.source_model">
                        <button class="btn btn-xs btn-success icon-only"
                          @click="addModelRedirect(newRedirectSource, newRedirectTarget)" title="‰øùÂ≠ò">
                          <i class="fas fa-check"></i>
                        </button>
                        <button class="btn btn-xs btn-secondary icon-only"
                          @click="agEditingRedirectSource = null; newRedirectSource = ''; newRedirectTarget = '';"
                          title="ÂèñÊ∂à">
                          <i class="fas fa-times"></i>
                        </button>
                      </template>
                      <template v-else>
                        <button class="btn btn-xs btn-primary icon-only" @click="editModelRedirect(r)" title="ÁºñËæë">
                          <i class="fas fa-pen"></i>
                        </button>
                        <button class="btn btn-xs btn-danger icon-only" @click="removeModelRedirect(r.source_model)"
                          title="Âà†Èô§">
                          <i class="fas fa-trash"></i>
                        </button>
                      </template>
                    </div>
                  </div>
                </div>
                <div v-else
                  style="font-size: 12px; opacity: 0.5; margin-bottom: 16px; padding: 10px; background: var(--bg-secondary); border-radius: 8px; text-align: center; border: 1px dashed var(--border-color);">
                  ÊöÇÊó†ÈáçÂÆöÂêëËßÑÂàô„ÄÇÊ∑ªÂä†ÂêéÔºåËØ∑Ê±Ç source Ê®°ÂûãÂ∞ÜËá™Âä®ËΩ¨ÂèëÁªô target Ê®°Âûã„ÄÇ
                </div>

                <!-- Ê∑ªÂä†Ë°®Âçï -->
                <div v-if="!agEditingRedirectSource"
                  style="display: flex; gap: 10px; align-items: center; background: rgba(var(--ag-primary-rgb), 0.03); padding: 12px; border-radius: 10px; border: 1px dashed var(--border-color);">
                  <div style="flex: 1; position: relative;">
                    <input type="text" v-model="newRedirectSource" class="form-input"
                      style="width: 100%; padding: 8px 12px; font-size: 13px;" placeholder="Ê∫êÊ®°Âûã (‰æãÂ¶Ç: gpt-4o)">
                  </div>
                  <i class="fas fa-arrow-right" style="opacity: 0.3;"></i>
                  <div style="flex: 1; position: relative;">
                    <input type="text" v-model="newRedirectTarget" class="form-input"
                      style="width: 100%; padding: 8px 12px; font-size: 13px;" placeholder="ÁõÆÊ†áÊ®°Âûã (‰æãÂ¶Ç: gemini-1.5-pro)">
                  </div>
                  <button class="btn btn-secondary btn-sm"
                    style="padding: 0 20px; font-size: 13px; height: 38px; display: flex; align-items: center; gap: 6px; white-space: nowrap;"
                    @click="addModelRedirect(newRedirectSource, newRedirectTarget).then(s => { if(s) { newRedirectSource=''; newRedirectTarget=''; } })">
                    <i class="fas fa-plus-circle"></i> Ê∑ªÂä†Âà´Âêç
                  </button>
                </div>
              </div>

              <!-- ÂõæÁâáËÆæÁΩÆ + ÈôêÈ¢ù -->
              <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-bottom: 0px;">
                <div>
                  <div style="font-size: 13px; font-weight: 600; margin-bottom: 10px; color: var(--ag-primary);">
                    <i class="fas fa-image"></i> ÂõæÁâáËÆæÁΩÆ
                  </div>
                  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px;">
                    <div>
                      <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">‰øùÂ≠ò‰∏äÈôê</label>
                      <input type="number" min="1" v-model="agSettingsForm.MAX_IMAGES" class="form-input"
                        style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="10">
                    </div>
                    <div>
                      <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ËÆøÈóÆÂü∫Á°Ä
                        URL</label>
                      <input type="text" v-model="agSettingsForm.IMAGE_BASE_URL" class="form-input"
                        style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="ÁïôÁ©∫‰ΩøÁî®ÈªòËÆ§">
                    </div>
                  </div>
                </div>
                <div>
                  <div style="font-size: 13px; font-weight: 600; margin-bottom: 10px; color: var(--ag-primary);">
                    <i class="fas fa-tachometer-alt"></i> ÈôêÈ¢ùËÆæÁΩÆ
                  </div>
                  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px;">
                    <div>
                      <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">ÊØèÂ∞èÊó∂‰∏äÈôê</label>
                      <input type="number" v-model="agSettingsForm.CREDENTIAL_MAX_USAGE_PER_HOUR" class="form-input"
                        style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="20">
                    </div>
                    <div>
                      <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">Ë∂ÖÊó∂
                        (ms)</label>
                      <input type="number" v-model="agSettingsForm.TIMEOUT" class="form-input"
                        style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="120000">
                    </div>
                    <div>
                      <label style="font-size: 11px; opacity: 0.7; display: block; margin-bottom: 7px;">Êó•Âøó‰øùÁïôÂ§©Êï∞</label>
                      <input type="number" v-model="agSettingsForm.REQUEST_LOG_RETENTION_DAYS" class="form-input"
                        style="width: 100%; padding: 6px 10px; font-size: 13px;" placeholder="7">
                    </div>
                  </div>
                </div>
              </div>


            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== Antigravity Êó•ÂøóËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü ==================== -->
    <div v-if="showAntigravityLogDetailModal" class="modal-overlay" @click.self="showAntigravityLogDetailModal = false"
      @keydown.esc="showAntigravityLogDetailModal = false" tabindex="-1">
      <div class="modal" style="max-width: 600px;">
        <div class="modal-header">
          <div class="modal-title">
            <i class="fas fa-file-alt"></i> Ë∞ÉÁî®Êó•ÂøóËØ¶ÊÉÖ
          </div>
          <button class="modal-close" @click="showAntigravityLogDetailModal = false"><i
              class="fas fa-times"></i></button>
        </div>
        <div class="modal-body" v-if="antigravityLogDetail" style="padding: 20px;">
          <div class="log-detail-grid"
            style="display: grid; grid-template-columns: 120px 1fr; gap: 12px; font-size: 13px;">
            <div style="opacity: 0.6;">ËØ∑Ê±ÇÊó∂Èó¥</div>
            <div>{{ new Date(antigravityLogDetail.created_at).toLocaleString() }}</div>

            <div style="opacity: 0.6;">ËØ∑Ê±ÇÊñπÊ≥ï</div>
            <div><code class="code-sm">{{ antigravityLogDetail.request_method }}</code></div>

            <div style="opacity: 0.6;">ËØ∑Ê±ÇË∑ØÂæÑ</div>
            <div><code class="code-sm">{{ antigravityLogDetail.request_path }}</code></div>

            <div style="opacity: 0.6;">Áä∂ÊÄÅÁ†Å</div>
            <div>
              <span :class="antigravityLogDetail.status_code < 400 ? 'text-success' : 'text-danger'"
                style="font-weight: 600;">
                {{ antigravityLogDetail.status_code }}
              </span>
            </div>

            <div style="opacity: 0.6;">ËÄóÊó∂</div>
            <div>{{ antigravityLogDetail.duration_ms }} ms</div>

            <div style="opacity: 0.6;">Âá≠ËØÅ</div>
            <div><code class="code-sm">{{ antigravityLogDetail.account_id || '-' }}</code></div>

            <div style="opacity: 0.6;">ÂÆ¢Êà∑Á´Ø IP</div>
            <div>{{ antigravityLogDetail.client_ip || '-' }}</div>

            <div style="opacity: 0.6;">User-Agent</div>
            <div style="word-break: break-all; font-size: 11px; opacity: 0.8;">{{ antigravityLogDetail.user_agent
              ||
              '-'
              }}</div>
          </div>

          <div v-if="antigravityLogDetail.detail" style="margin-top: 16px;">
            <div style="opacity: 0.6; margin-bottom: 8px; font-size: 13px;">ËØ¶ÊÉÖ‰ø°ÊÅØ</div>
            <pre
              style="background: var(--bg-secondary); padding: 12px; border-radius: 8px; font-size: 12px; overflow-x: auto; margin: 0;">{{ JSON.stringify(antigravityLogDetail.detail, null, 2) }}</pre>
          </div>
        </div>
        <div class="modal-footer" style="padding: 12px 20px; border-top: 1px solid var(--border-color);">
          <button class="btn btn-secondary" @click="showAntigravityLogDetailModal = false">
            ÂÖ≥Èó≠
          </button>
        </div>
      </div>
    </div>

    <!-- ==================== Gemini CLI Êó•ÂøóËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü ==================== -->
    <div v-if="showGeminiCliLogDetailModal" class="modal-overlay" @click.self="showGeminiCliLogDetailModal = false"
      @keydown.esc="showGeminiCliLogDetailModal = false" tabindex="-1">
      <div class="modal" style="max-width: 600px;">
        <div class="modal-header">
          <div class="modal-title" style="color: var(--gemini-primary);">
            <i class="fas fa-file-alt"></i> Gemini Ë∞ÉÁî®ËØ¶ÊÉÖ
          </div>
          <button class="modal-close" @click="showGeminiCliLogDetailModal = false"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body" v-if="geminiCliLogDetail" style="padding: 20px;">
          <div class="log-detail-grid"
            style="display: grid; grid-template-columns: 100px 1fr; gap: 12px; font-size: 13px;">
            <div style="opacity: 0.6;">Êó∂Èó¥</div>
            <div>{{ formatDateTime(geminiCliLogDetail.created_at) }}</div>

            <div style="opacity: 0.6;">ÊñπÊ≥ï</div>
            <div><code class="code-sm">{{ geminiCliLogDetail.request_method }}</code></div>

            <div style="opacity: 0.6;">Ë∑ØÂæÑ</div>
            <div>{{ geminiCliLogDetail.request_path }}</div>

            <div style="opacity: 0.6;">Áä∂ÊÄÅÁ†Å</div>
            <div>
              <span :class="geminiCliLogDetail.status_code < 400 ? 'status-ok' : 'status-err'">
                {{ geminiCliLogDetail.status_code }}
              </span>
            </div>

            <div style="opacity: 0.6;">Âª∂Ëøü</div>
            <div>{{ geminiCliLogDetail.duration_ms }} ms</div>

            <div style="opacity: 0.6;">Ë¥¶Âè∑</div>
            <div><code class="code-sm">{{ geminiCliLogDetail.account_id }}</code></div>
          </div>

          <div v-if="geminiCliLogDetail.detail" style="margin-top: 16px;">
            <div style="opacity: 0.6; margin-bottom: 8px; font-size: 12px; font-weight: 600;">Êï∞ÊçÆÂø´ÁÖß</div>
            <pre
              style="background: var(--bg-secondary); padding: 12px; border-radius: 8px; font-size: 11px; overflow-x: auto; margin: 0; max-height: 400px; border: 1px solid var(--border-color);">{{ JSON.stringify(geminiCliLogDetail.detail, null, 2) }}</pre>
          </div>
        </div>
        <div class="modal-footer" style="padding: 12px 20px; border-top: 1px solid var(--border-color);">
          <button class="btn btn-secondary" @click="showGeminiCliLogDetailModal = false">
            ÂÖ≥Èó≠
          </button>
        </div>
      </div>
    </div>

    <!-- ==================== ‰∏ªÊú∫ÁÆ°ÁêÜÊ®°ÊÄÅÊ°Ü ==================== -->
    <!-- Ê∑ªÂä†/ÁºñËæë‰∏ªÊú∫Ê®°ÊÄÅÊ°Ü -->
    <div v-if="showServerModal" class="modal-overlay" @keydown.esc="closeServerModal" @keydown.ctrl.enter="saveServer"
      tabindex="-1">
      <div class="modal server-modal">
        <div class="modal-header">
          <div class="modal-title">
            <i class="fas fa-server"></i>
            {{ serverModalMode === 'add' ? 'Ê∑ªÂä†‰∏ªÊú∫' : 'ÁºñËæë‰∏ªÊú∫' }}
          </div>
          <button class="modal-close" @click="closeServerModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <!-- Âü∫Á°Ä‰ø°ÊÅØÂå∫ -->
          <div class="server-form-section">
            <div class="form-row">
              <div class="form-group flex-1">
                <label>Â∏∏Áî®Âá≠ÊçÆ</label>
                <select class="form-input" @change="applyCredential($event)">
                  <option value="">-- ÈÄâÊã©È¢ÑËÆæÂá≠ÊçÆ --</option>
                  <option v-for="cred in serverCredentials" :key="cred.id" :value="cred.id">
                    {{ cred.name }} ({{ cred.username }})
                  </option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group flex-1">
                <label><i class="fas fa-id-badge"></i> ÂÆû‰æãÂêçÁß∞</label>
                <input type="text" v-model="serverForm.name" class="form-input" placeholder="Â¶Ç: Áîü‰∫ßÁéØÂ¢É-ÁΩëÂÖ≥" required />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group" style="flex: 7;">
                <label><i class="fas fa-network-wired"></i> ‰∏ªÊú∫Âú∞ÂùÄ</label>
                <input type="text" v-model="serverForm.host" class="form-input" placeholder="IP Êàñ ÂüüÂêç" required />
              </div>
              <div class="form-group" style="flex: 3;">
                <label><i class="fas fa-door-open"></i> Á´ØÂè£</label>
                <input type="number" v-model="serverForm.port" class="form-input" placeholder="22" />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group flex-1">
                <label><i class="fas fa-user-shield"></i> ÁôªÂΩïÁî®Êà∑</label>
                <input type="text" v-model="serverForm.username" class="form-input" placeholder="root" required />
              </div>
            </div>
          </div>

          <!-- ËÆ§ËØÅÊñπÂºèÂå∫ -->
          <div class="server-form-section">
            <div class="server-auth-toggle">
              <button type="button" :class="{ active: serverForm.authType === 'password' }"
                @click="serverForm.authType = 'password'">
                <i class="fas fa-key"></i> ÂØÜÁ†ÅËÆ§ËØÅ
              </button>
              <button type="button" :class="{ active: serverForm.authType === 'privateKey' }"
                @click="serverForm.authType = 'privateKey'">
                <i class="fas fa-file-code"></i> ÂØÜÈí•ËÆ§ËØÅ
              </button>
            </div>

            <div v-if="serverForm.authType === 'password'" class="server-form-field">
              <label><i class="fas fa-lock"></i> ÂØÜÁ†Å</label>
              <input v-model="serverForm.password" type="password" placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ†Å" />
            </div>

            <div v-if="serverForm.authType === 'privateKey'">
              <div class="server-form-field">
                <label><i class="fas fa-file-alt"></i> ÁßÅÈí•ÂÜÖÂÆπ</label>
                <textarea v-model="serverForm.privateKey" rows="4"
                  placeholder="Á≤òË¥¥ SSH ÁßÅÈí•ÔºàÊîØÊåÅ RSA„ÄÅECDSA„ÄÅEd25519Ôºâ"></textarea>
              </div>
              <div class="server-form-field">
                <label><i class="fas fa-unlock-alt"></i> ÁßÅÈí•ÂØÜÁ†Å <span class="optional-tag">ÂèØÈÄâ</span></label>
                <input v-model="serverForm.passphrase" type="password" placeholder="ÁßÅÈí•ÊúâÂØÜÁ†Å‰øùÊä§Êó∂Â°´ÂÜô" />
              </div>
            </div>
          </div>

          <!-- Êâ©Â±ï‰ø°ÊÅØÂå∫ -->
          <!-- <div class="server-form-section collapsed-section">
              <div class="server-form-row">
                <div class="server-form-field" style="flex: 1;">
                  <label><i class="fas fa-tags"></i> Ê†áÁ≠æ <span class="optional-tag">ÂèØÈÄâ</span></label>
                  <input v-model="serverForm.tagsInput" type="text" placeholder="Áîü‰∫ß, Web‰∏ªÊú∫" />
                  <label><i class="fas fa-sticky-note"></i> Â§áÊ≥® <span class="optional-tag">ÂèØÈÄâ</span></label>
                  <textarea v-model="serverForm.description" rows="2" placeholder="‰∏ªÊú∫Áî®ÈÄîËØ¥Êòé"></textarea>
                </div>
              </div>
            </div> -->

          <div v-if="serverModalError" class="server-form-error">
            <i class="fas fa-exclamation-circle"></i> {{ serverModalError }}
          </div>
        </div>
        <div class="server-modal-footer">
          <button class="btn-server-cancel" @click="closeServerModal" :disabled="serverModalSaving">
            ÂèñÊ∂à
          </button>
          <div class="server-modal-actions">
            <button class="btn-server-test" @click="testServerConnection" :disabled="serverModalSaving">
              <i class="fas fa-plug"></i> ÊµãËØï
            </button>
            <button class="btn-server-save" @click="saveServer" :disabled="serverModalSaving">
              <i class="fas" :class="serverModalSaving ? 'fa-spinner fa-spin' : 'fa-check'"></i>
              {{ serverModalSaving ? '‰øùÂ≠ò‰∏≠' : '‰øùÂ≠ò' }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ÊâπÈáèÂØºÂÖ•‰∏ªÊú∫Ê®°ÊÄÅÊ°Ü -->
    <div v-if="showImportServerModal" class="modal-overlay" @keydown.esc="closeImportServerModal"
      @keydown.enter="confirmImportServers" tabindex="-1">
      <div class="modal server-modal" style="max-width: 500px;">
        <div class="modal-header">
          <div class="modal-title">
            <i class="fas fa-file-import"></i>
            ÊâπÈáèÂØºÂÖ•‰∏ªÊú∫
          </div>
          <button class="modal-close" @click="closeImportServerModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="server-form-section">
            <div class="form-group">
              <label><i class="fas fa-file"></i> ÈÄâÊã© JSON Êñá‰ª∂</label>
              <input type="file" ref="importFileInput" accept=".json" class="form-input"
                @change="handleImportFileChange" />
            </div>
          </div>
          <div v-if="importPreview" class="server-form-section" style="margin-top: 8px;">
            <div class="form-group">
              <label><i class="fas fa-list"></i> È¢ÑËßàÔºàÂ∞ÜÂØºÂÖ• {{ importPreview.length }} Âè∞‰∏ªÊú∫Ôºâ</label>
              <div class="import-preview-list">
                <div v-for="(server, index) in importPreview" :key="index" class="import-preview-item">
                  <i class="fas fa-server"></i>
                  <span>{{ server.name }} ({{ server.username }}@{{ server.host }}:{{ server.port }})</span>
                </div>
              </div>
            </div>
          </div>
          <div v-if="importModalError" class="server-form-error">
            <i class="fas fa-exclamation-circle"></i> {{ importModalError }}
          </div>
        </div>
        <div class="server-modal-footer">
          <button class="btn-server-cancel" @click="closeImportServerModal" :disabled="importModalSaving">
            ÂèñÊ∂à
          </button>
          <button class="btn-server-save" @click="confirmImportServers"
            :disabled="importModalSaving || !importPreview || importPreview.length === 0">
            <i class="fas fa-check"></i>
            {{ importModalSaving ? 'ÂØºÂÖ•‰∏≠...' : 'Á°ÆËÆ§ÂØºÂÖ•' }}
          </button>
        </div>
      </div>
    </div>

    <!-- Êñ∞Âª∫ÁªàÁ´Ø‰ºöËØùÈÄâÊã©Ê®°ÊÄÅÊ°Ü -->
    <div v-if="showAddSessionSelectModal" class="modal-overlay" @keydown.esc="showAddSessionSelectModal = false"
      tabindex="-1">
      <div class="modal server-modal" style="max-width: 360px;">
        <div class="modal-header">
          <div class="modal-title">
            <i class="fas fa-terminal"></i>
            ÈÄâÊã©‰∏ªÊú∫
          </div>
          <button class="modal-close" @click="showAddSessionSelectModal = false"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body" style="max-height: 400px; overflow-y: auto; padding: 8px;">
          <div v-if="serverList.length === 0" class="empty-state">
            <p>ÊöÇÊó†ÂèØÁî®‰∏ªÊú∫</p>
          </div>
          <div v-else class="server-select-list">
            <div v-for="server in serverList" :key="server.id" class="server-select-item"
              @click="addSessionForServer(server)">
              <div class="server-status-indicator" :class="server.status || 'unknown'"></div>
              <div class="server-select-info">
                <div class="server-select-name">{{ server.name }}</div>
                <div class="server-select-host">{{ server.host }}:{{ server.port }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ËÆæÁΩÆ‰æßËæπÊ†è -->
    <transition name="settings-fade">
      <div v-if="showSettingsModal" class="settings-modal-wrapper" @keydown.esc="showSettingsModal = false"
        tabindex="-1">
        <div class="settings-sidebar-overlay" @click="showSettingsModal = false"></div>
        <div class="settings-sidebar">
          <!-- ‰æßËæπÊ†èÂ§¥ÈÉ® -->
          <div class="settings-sidebar-header">
            <div class="settings-sidebar-title">
              <i class="fas fa-cog"></i>
              <span>Á≥ªÁªüËÆæÁΩÆ</span>
            </div>
            <button class="settings-sidebar-close" @click="showSettingsModal = false"><i
                class="fas fa-times"></i></button>
          </div>

          <!-- ‰æßËæπÊ†èÂÜÖÂÆπ -->
          <div class="settings-container">
            <!-- settings-sidebar-left: Navigation -->
            <div class="settings-nav">
              <button class="settings-nav-item" :class="{ active: settingsCurrentTab === 'general' }"
                @click="settingsCurrentTab = 'general'">
                <i class="fas fa-cog"></i> ÈÄöÁî®ËÆæÁΩÆ
              </button>
              <button class="settings-nav-item" :class="{ active: settingsCurrentTab === 'modules' }"
                @click="settingsCurrentTab = 'modules'">
                <i class="fas fa-cubes"></i> Ê®°ÂùóÁÆ°ÁêÜ
              </button>
              <button class="settings-nav-item" :class="{ active: settingsCurrentTab === 'database' }"
                @click="settingsCurrentTab = 'database'">
                <i class="fas fa-database"></i> Êï∞ÊçÆÂ∫ì
              </button>
              <button class="settings-nav-item" :class="{ active: settingsCurrentTab === 'logs' }"
                @click="settingsCurrentTab = 'logs'">
                <i class="fas fa-terminal"></i> Á≥ªÁªüÊó•Âøó
              </button>
              <button class="settings-nav-item" :class="{ active: settingsCurrentTab === 'appearance' }"
                @click="settingsCurrentTab = 'appearance'">
                <i class="fas fa-palette"></i> ÁïåÈù¢Â§ñËßÇ
              </button>
              <button class="settings-nav-item" :class="{ active: settingsCurrentTab === 'about' }"
                @click="settingsCurrentTab = 'about'">
                <i class="fas fa-info-circle"></i> ÂÖ≥‰∫éÁ≥ªÁªü
              </button>
            </div>

            <!-- settings-main: Content Area -->
            <div class="settings-main">
              <!-- ==================== General Tab ==================== -->
              <div v-if="settingsCurrentTab === 'general'" class="settings-tab-content fade-in">
                <div class="settings-group">
                  <div class="settings-group-title">Ë¥¶Êà∑ÂÆâÂÖ®</div>
                  <div class="form-group">
                    <label class="form-label">Êñ∞ÂØÜÁ†Å</label>
                    <input v-model="newPassword" type="password" class="form-input" placeholder="ËæìÂÖ•Êñ∞ÂØÜÁ†ÅÔºàËá≥Â∞ë6‰ΩçÔºâ" />
                  </div>
                  <div class="form-group">
                    <label class="form-label">Á°ÆËÆ§ÂØÜÁ†Å</label>
                    <input v-model="confirmPassword" type="password" class="form-input" placeholder="Á°ÆËÆ§Êñ∞ÂØÜÁ†Å" />
                  </div>
                  <div v-if="passwordError" class="form-error">{{ passwordError }}</div>
                  <div v-if="passwordSuccess" class="form-success">{{ passwordSuccess }}</div>
                  <button class="btn btn-primary" @click="changePassword" style="width: 100%; margin-top: 8px;">
                    <i class="fas fa-key"></i> ‰øÆÊîπÂØÜÁ†Å
                  </button>
                </div>

                <div class="settings-group">
                  <div class="settings-group-title">Êï∞ÊçÆÂ§á‰ªΩ & ÊÅ¢Â§ç</div>
                  <div class="settings-description">
                    ÂØºÂá∫ÂåÖÂê´ÊâÄÊúâÊ®°ÂùóÈÖçÁΩÆÂíåÊï∞ÊçÆÁöÑ.dbÊñá‰ª∂Ôºå‰ª•‰æøËøÅÁßªÊàñÂ§á‰ªΩ„ÄÇ
                  </div>
                  <div style="display: flex; gap: 8px; margin-top: 12px;">
                    <button class="btn btn-secondary" @click="exportAllData" style="flex: 1;">
                      <i class="fas fa-upload"></i> ÂØºÂá∫Êï∞ÊçÆ
                    </button>
                    <button class="btn btn-secondary" @click="importAllData" style="flex: 1;">
                      <i class="fas fa-download"></i> ÂØºÂÖ•Êï∞ÊçÆ
                    </button>
                  </div>
                </div>

                <div class="settings-group">
                  <div class="settings-group-title">ÈöêÁßÅ‰∏éÂÆâÂÖ®ÊòæÁ§∫</div>
                  <div class="settings-description">
                    ÊéßÂà∂‰∏ªÊú∫Âú∞ÂùÄ„ÄÅAPI Á´ØÁÇπÂú∞ÂùÄÁ≠âÊïèÊÑü‰ø°ÊÅØÁöÑÊòæÁ§∫ÊñπÂºè„ÄÇ
                  </div>
                  <div class="form-group" style="margin-top: 12px;">
                    <label class="form-label" style="font-size: 13px;">Âú∞ÂùÄÊòæÁ§∫Ê®°Âºè</label>
                    <div style="display: flex; gap: 8px;">
                      <button class="btn btn-sm"
                        :class="serverIpDisplayMode === 'normal' ? 'btn-primary' : 'btn-secondary'"
                        @click="serverIpDisplayMode = 'normal'" style="flex: 1; height: 32px; font-size: 12px;">
                        ÊòéÊñá
                      </button>
                      <button class="btn btn-sm"
                        :class="serverIpDisplayMode === 'masked' ? 'btn-primary' : 'btn-secondary'"
                        @click="serverIpDisplayMode = 'masked'" style="flex: 1; height: 32px; font-size: 12px;">
                        ÊâìÁ†Å
                      </button>
                      <button class="btn btn-sm"
                        :class="serverIpDisplayMode === 'hidden' ? 'btn-primary' : 'btn-secondary'"
                        @click="serverIpDisplayMode = 'hidden'" style="flex: 1; height: 32px; font-size: 12px;">
                        ÈöêËóè
                      </button>
                    </div>
                    <div class="form-help" style="margin-top: 10px;">
                      ÊâìÁ†ÅÊ®°ÂºèÈöêËóè IP Âêé‰∏§ÊÆµÊàñÂüüÂêçÊ†∏ÂøÉÈÉ®ÂàÜÔºåÈöêËóèÊ®°ÂºèÂÆåÂÖ®ÊòæÁ§∫‰∏∫ ****„ÄÇ
                    </div>
                  </div>
                </div>
              </div>

              <!-- ==================== API Configuration Tab ==================== -->
              <div v-if="settingsCurrentTab === 'api'" class="settings-tab-content fade-in">
                <div class="settings-group">
                  <div class="settings-group-title">ÂÖ®Â±Ä API & ÁΩëÁªúÈÖçÁΩÆ</div>
                  <div class="settings-description">
                    Ê≠§Â§ÑËÆæÁΩÆÁöÑ API ÂØÜÈí•Âíå‰ª£ÁêÜÂ∞ÜÁªü‰∏ÄÂ∫îÁî®‰∫é Antigravity Âíå Gemini CLI Ê®°Âùó„ÄÇ
                  </div>

                  <div class="form-group" style="margin-top: 16px;">
                    <label class="form-label">ÂÖ®Â±Ä API ËÆøÈóÆÂØÜÈí• (API_KEY)</label>
                    <div class="input-with-icon">
                      <i class="fas fa-key"></i>
                      <input type="password" v-model="agSettingsForm.API_KEY" class="form-input"
                        placeholder="ÁïôÁ©∫ÂàôÊó†ÈúÄËÆ§ËØÅ" />
                    </div>
                    <div class="form-help">Áî®‰∫é v1/chat/completions Á≠âÊé•Âè£ÁöÑË∫´‰ªΩÈ™åËØÅ</div>
                  </div>

                  <div class="form-group">
                    <label class="form-label">ÂÖ®Â±Ä HTTP ‰ª£ÁêÜÂú∞ÂùÄ (PROXY)</label>
                    <div class="input-with-icon">
                      <i class="fas fa-globe"></i>
                      <input type="text" v-model="agSettingsForm.PROXY" class="form-input"
                        placeholder="‰æãÂ¶Ç: http://127.0.0.1:7890" />
                    </div>
                    <div class="form-help">Â¶ÇÊûúÊúçÂä°Âô®Êó†Ê≥ïÁõ¥Ëøû Google APIÔºåËØ∑ÈÖçÁΩÆ‰ª£ÁêÜ</div>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Ë¥üËΩΩÂùáË°°Á≠ñÁï• (Load Balancing)</label>
                    <div class="input-with-icon">
                      <i class="fas fa-balance-scale"></i>
                      <select v-model="agSettingsForm.load_balancing_strategy" class="form-input">
                        <option value="random">ÈöèÊú∫ (Random)</option>
                        <option value="round_robin">ËΩÆËØ¢ (Round Robin)</option>
                      </select>
                    </div>
                    <div class="form-help">ÂÜ≥ÂÆöÂ§ö‰∏™ÂêØÁî®Ë¥¶Âè∑‰πãÈó¥ÁöÑË∞ÉÁî®ÂàÜÈÖçÊñπÂºè</div>
                  </div>

                  <div class="form-group" style="margin-top: 16px;">
                    <label class="form-label">Ê∏†ÈÅìÊ®°ÂùóÂºÄÂÖ≥</label>
                    <div
                      style="display: flex; gap: 24px; padding: 10px; background: var(--bg-tertiary); border-radius: 8px;">
                      <div style="display: flex; align-items: center; gap: 10px;">
                        <label class="switch">
                          <input type="checkbox" :checked="channelEnabled && channelEnabled['antigravity']"
                            @change="toggleChannelEnabled('antigravity')">
                          <span class="slider round"></span>
                        </label>
                        <span style="font-size: 13px; font-weight: 500;">Antigravity</span>
                      </div>

                      <div style="display: flex; align-items: center; gap: 10px;">
                        <label class="switch">
                          <input type="checkbox" :checked="channelEnabled && channelEnabled['gemini-cli']"
                            @change="toggleChannelEnabled('gemini-cli')">
                          <span class="slider round"></span>
                        </label>
                        <span style="font-size: 13px; font-weight: 500;">Gemini CLI</span>
                      </div>
                    </div>
                  </div>

                  <div class="form-group" style="margin-top: 16px;">
                    <label class="form-label" style="font-size: 14px; font-weight: 600;">Ê®°ÂûãÂâçÁºÄÈÖçÁΩÆ (Model
                      Prefix)</label>
                    <div class="form-help" style="margin-bottom: 12px; font-size: 13px; opacity: 0.8;">
                      ‰∏∫ÊØè‰∏™Ê∏†ÈÅìÁöÑÊ®°ÂûãÊ∑ªÂä†ÂâçÁºÄÔºåÈÅøÂÖçÂêçÁß∞ÂÜ≤Á™Å
                      (‰æãÂ¶Ç "ag/" Êàñ "gcli/")</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                      <div class="form-group" style="margin-bottom: 0;">
                        <label class="form-label"
                          style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; font-weight: 500;">Antigravity
                          ÂâçÁºÄ</label>
                        <input type="text" class="form-input" v-model="channelModelPrefix['antigravity']"
                          placeholder="‰æãÂ¶Ç: ag/">
                      </div>
                      <div class="form-group" style="margin-bottom: 0;">
                        <label class="form-label"
                          style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; font-weight: 500;">Gemini
                          CLI ÂâçÁºÄ</label>
                        <input type="text" class="form-input" v-model="channelModelPrefix['gemini-cli']"
                          placeholder="‰æãÂ¶Ç: gcli/">
                      </div>
                    </div>
                  </div>

                  <button class="btn btn-primary" @click="saveGlobalApiSettings" :disabled="antigravitySaving"
                    style="width: 100%; margin-top: 12px; height: 42px; font-weight: 600;">
                    <i class="fas" :class="antigravitySaving ? 'fa-spinner fa-spin' : 'fa-save'"></i>
                    ÂêåÊ≠•Âπ∂Â∫îÁî®ÈÖçÁΩÆ
                  </button>
                </div>
              </div>

              <!-- ==================== Modules Tab ==================== -->
              <div v-if="settingsCurrentTab === 'modules'" class="settings-tab-content fade-in">
                <div class="settings-group">
                  <div class="settings-group-title">ÂäüËÉΩÊ®°ÂùóÁÆ°ÁêÜ</div>
                  <div class="settings-description" style="margin-bottom: 12px;">
                    ÊãñÊãΩË∞ÉÊï¥ËèúÂçïÈ°∫Â∫èÔºåÁÇπÂáªÁúºÁùõÂõæÊ†áÊéßÂà∂ÊòæÁ§∫/ÈöêËóè„ÄÇ
                  </div>
                  <div class="modules-list">
                    <div v-for="(module, index) in moduleOrder" :key="module" class="draggable-module-item"
                      draggable="true" @dragstart="handleDragStart($event, index)" @dragend="handleDragEnd"
                      @dragover.prevent="handleDragOver($event, index)" @drop="handleDrop($event, index)">
                      <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                        <i class="fas fa-grip-vertical drag-handle"></i>
                        <div class="module-icon-wrapper">
                          <i class="draggable-module-icon fas" :class="getModuleIcon(module)"></i>
                        </div>
                        <span class="draggable-module-name">{{ getModuleName(module) }}</span>
                      </div>
                      <button class="btn btn-sm btn-icon"
                        :class="moduleVisibility[module] ? 'text-success' : 'text-muted'"
                        @click.stop="toggleModuleVisibility(module)" :title="moduleVisibility[module] ? 'Â∑≤ÊòæÁ§∫' : 'Â∑≤ÈöêËóè'">
                        <i class="fas" :class="moduleVisibility[module] ? 'fa-eye' : 'fa-eye-slash'"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="settings-actions">
                  <button class="btn btn-primary" style="width: 100%;" @click="saveSettings">
                    <i class="fas fa-save"></i> Á´ãÂç≥Â∫îÁî®ÊéíÂ∫è‰∏éÂèØËßÅÊÄß
                  </button>
                </div>
              </div>

              <!-- ==================== Database Tab ==================== -->
              <div v-if="settingsCurrentTab === 'database'" class="settings-tab-content fade-in">
                <div class="settings-group">
                  <div class="settings-group-title">
                    <i class="fas fa-database"></i> Â≠òÂÇ®Áä∂ÊÄÅ
                  </div>
                  <div class="db-stats-card">
                    <div class="db-stat-item">
                      <div class="db-stat-label">Êï∞ÊçÆÂ∫ìÂ§ßÂ∞è</div>
                      <div class="db-stat-value" v-if="dbStats">{{ formatFileSize(dbStats.dbSize) }}</div>
                      <div class="db-stat-value" v-else>--</div>
                    </div>
                    <div class="db-stat-item">
                      <div class="db-stat-label">Êï∞ÊçÆË°®ÊÄªÊï∞</div>
                      <div class="db-stat-value" v-if="dbStats">{{ Object.keys(dbStats.tables || {}).length }}</div>
                      <div class="db-stat-value" v-else>--</div>
                    </div>
                  </div>
                  <div style="display: flex; gap: 12px; margin-top: 12px;">
                    <button class="btn btn-danger" @click="handleClearLogs" style="flex: 1;">
                      <i class="fas fa-trash-alt"></i> Ê∏ÖÁ©∫Êó•Âøó
                    </button>
                    <button class="btn btn-secondary" @click="handleVacuumDb" style="flex: 1;">
                      <i class="fas fa-compress-arrows-alt"></i> ÂéãÁº©Â≠òÂÇ®
                    </button>
                  </div>
                </div>

                <div class="settings-group">
                  <div class="settings-group-title">
                    <i class="fas fa-broom"></i> Ëá™Âä®Ê∏ÖÁêÜÁ≠ñÁï•
                  </div>
                  <div class="settings-description">
                    Á≥ªÁªüÂ∞ÜËá™Âä®Âà†Èô§Ë∂ÖËøáÈôêÂà∂ÁöÑÊóßÊó•ÂøóÊï∞ÊçÆ„ÄÇ
                  </div>

                  <div class="form-group">
                    <label class="form-label">Êó•Âøó‰øùÁïôÂ§©Êï∞</label>
                    <div class="input-with-suffix">
                      <input v-model.number="logSettings.days" type="number" class="form-input" min="0" placeholder="0"
                        @change="saveLogSettings">
                      <span class="input-suffix">Â§©</span>
                    </div>
                    <div class="form-help">0 Ë°®Á§∫‰∏çÈôêÂà∂</div>
                  </div>

                  <div class="form-group">
                    <label class="form-label">ÂçïË°®ÊúÄÂ§ßËÆ∞ÂΩïÊï∞</label>
                    <div class="input-with-suffix">
                      <input v-model.number="logSettings.count" type="number" class="form-input" min="0" step="1000"
                        placeholder="0" @change="saveLogSettings">
                      <span class="input-suffix">Êù°</span>
                    </div>
                    <div class="form-help">0 Ë°®Á§∫‰∏çÈôêÂà∂</div>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Êï∞ÊçÆÂ∫ìÊúÄÂ§ß‰ΩìÁßØ</label>
                    <div class="input-with-suffix">
                      <input v-model.number="logSettings.dbSizeMB" type="number" class="form-input" min="0"
                        placeholder="0" @change="saveLogSettings">
                      <span class="input-suffix">MB</span>
                    </div>
                    <div class="form-help">0 Ë°®Á§∫‰∏çÈôêÂà∂</div>
                  </div>

                  <button class="btn btn-primary" style="width: 100%; margin-top: 12px;" @click="enforceLogLimits"
                    :disabled="logLimitsEnforcing">
                    <i class="fas" :class="logLimitsEnforcing ? 'fa-spinner fa-spin' : 'fa-magic'"></i>
                    {{ logLimitsEnforcing ? 'ÊâßË°å‰∏≠...' : 'Á´ãÂç≥ÊâßË°åÊ∏ÖÁêÜ' }}
                  </button>
                </div>
              </div>

              <!-- ==================== Appearance Tab ==================== -->
              <div v-if="settingsCurrentTab === 'appearance'" class="settings-tab-content fade-in">
                <div class="settings-group">
                  <div class="settings-group-title">
                    <i class="fas fa-paint-brush"></i> Ëá™ÂÆö‰πâÊ†∑Âºè (CSS)
                  </div>
                  <div class="settings-description">
                    Ê≥®ÂÖ•Ëá™ÂÆö‰πâ CSS Ê†∑Âºè‰ª•Ê∑±Â∫¶Ë¶ÜÁõñÈªòËÆ§‰∏ªÈ¢ò„ÄÇ
                  </div>
                  <textarea v-model="customCss" class="form-textarea code-font" placeholder="/* Âú®Ê≠§Â§ÑËæìÂÖ• CSS ‰ª£Á†Å */"
                    style="min-height: 200px;"></textarea>
                  <div v-if="customCssError" class="form-error" style="margin-top: 8px;">{{ customCssError }}</div>
                  <div v-if="customCssSuccess" class="form-success" style="margin-top: 8px;">{{ customCssSuccess }}
                  </div>

                  <div style="display: flex; gap: 12px; margin-top: 12px;">
                    <button class="btn btn-primary" @click="saveCustomCss" style="flex: 1;">
                      <i class="fas fa-check"></i> Â∫îÁî®Ê†∑Âºè
                    </button>
                    <button class="btn btn-secondary" @click="resetCustomCss" style="flex: 1;">
                      <i class="fas fa-undo"></i> ÊÅ¢Â§çÈªòËÆ§
                    </button>
                  </div>
                </div>
              </div>

              <!-- ==================== Logs Tab ==================== -->
              <div v-if="settingsCurrentTab === 'logs'" class="settings-tab-content fade-in">
                <div class="settings-group">
                  <div class="settings-group-title"
                    style="display: flex; justify-content: space-between; align-items: center;">
                    <span><i class="fas fa-terminal"></i> ÂÆûÊó∂ËøêË°åÊó•Âøó</span>
                    <span v-if="logFileSize"
                      style="font-size: 11px; font-weight: normal; opacity: 0.6; font-family: var(--font-mono);">
                      Disk: {{ logFileSize }}
                    </span>
                  </div>
                  <div class="settings-description">
                    ÂêéÁ´ØÂÜÖÂ≠ò‰∏≠ÁöÑÁªìÊûÑÂåñÊó•ÂøóÊµÅÔºàÊúÄËøë 200 Êù°Ôºâ„ÄÇ
                  </div>
                  <div class="log-stream-container" ref="settingsLogStream">
                    <div v-for="(log, index) in systemLogs" :key="index" class="log-line">
                      <span class="log-time">{{ log.time }}</span>
                      <span class="log-level" :class="'log-' + (log.level || '').toLowerCase()">{{ log.level }}</span>
                      <span class="log-module" style="color: var(--primary-color); opacity: 0.8; font-weight: 600;">[{{
                        log.module }}]</span>
                      <span class="log-msg">{{ log.message }}</span>
                    </div>
                    <div v-if="systemLogs.length === 0" style="opacity: 0.5; text-align: center; padding: 20px;">
                      Á≠âÂæÖÊó•ÂøóËæìÂÖ•...
                    </div>
                  </div>
                  <div style="display: flex; gap: 12px; margin-top: 12px;">
                    <button class="btn btn-secondary" @click="fetchSystemLogs" style="flex: 1;">
                      <i class="fas fa-sync-alt"></i> Âà∑Êñ∞ÊµÅ
                    </button>
                    <button class="btn btn-secondary" @click="viewRawAppLog" style="flex: 1;">
                      <i class="fas fa-file-alt"></i> Êü•ÁúãÊñá‰ª∂
                    </button>
                    <button class="btn btn-danger" @click="clearAppLogs" style="flex: 1;">
                      <i class="fas fa-trash-alt"></i> Ê∏ÖÁ©∫Êó•Âøó
                    </button>
                  </div>
                </div>
              </div>

              <!-- ==================== About Tab ==================== -->
              <div v-if="settingsCurrentTab === 'about'" class="settings-tab-content fade-in">
                <div class="settings-group" style="text-align: center; padding: 40px 20px;">
                  <div
                    style="width: 80px; height: 80px; background: var(--ag-primary); color: white; border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 40px; margin: 0 auto 20px; box-shadow: 0 10px 20px rgba(var(--ag-primary-rgb), 0.2);">
                    <i class="fas fa-rocket"></i>
                  </div>
                  <div style="font-size: 24px; font-weight: 800; color: var(--text-primary); margin-bottom: 8px;">
                    Antigravity API Monitor
                  </div>
                  <div style="font-size: 14px; color: var(--text-tertiary); margin-bottom: 24px;">
                    Version 1.2.0 Stable
                  </div>

                  <div
                    style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; max-width: 400px; margin: 0 auto; text-align: left;">
                    <div
                      style="background: var(--bg-secondary); padding: 12px; border-radius: 12px; border: 1px solid var(--border-color);">
                      <div style="font-size: 11px; color: var(--text-tertiary); text-transform: uppercase;">Ê†∏ÂøÉÊû∂ÊûÑ</div>
                      <div style="font-weight: 600; margin-top: 4px;">DEBUG Engine</div>
                    </div>
                    <div
                      style="background: var(--bg-secondary); padding: 12px; border-radius: 12px; border: 1px solid var(--border-color);">
                      <div style="font-size: 11px; color: var(--text-tertiary); text-transform: uppercase;">AI ÈÄÇÈÖçÂ±Ç</div>
                      <div style="font-weight: 600; margin-top: 4px;">CloudCode Protocol</div>
                    </div>
                    <div
                      style="background: var(--bg-secondary); padding: 12px; border-radius: 12px; border: 1px solid var(--border-color);">
                      <div style="font-size: 11px; color: var(--text-tertiary); text-transform: uppercase;">ËøêË°åÁéØÂ¢É</div>
                      <div style="font-weight: 600; margin-top: 4px;">node js</div>
                    </div>
                    <div
                      style="background: var(--bg-secondary); padding: 12px; border-radius: 12px; border: 1px solid var(--border-color);">
                      <div style="font-size: 11px; color: var(--text-tertiary); text-transform: uppercase;">È°πÁõÆ‰∏ªÈ°µ</div>
                      <div style="font-weight: 600; margin-top: 4px;">
                        <a href="https://github.com/iwvw/API-Monitor" target="_blank"
                          style="color: var(--primary-color); text-decoration: none;">
                          <i class="fab fa-github"></i> API-Monitor
                        </a>
                      </div>
                    </div>
                  </div>

                  <div style="margin-top: 32px; border-top: 1px solid var(--border-color); padding-top: 24px;">
                    <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                      ‰∏ì‰∏öÁöÑ API ÁõëÊéß‰∏éÂàÜÂèëÁÆ°ÁêÜÁ≥ªÁªüÔºå<br>
                      Êó®Âú®‰∏∫ AI Â∫îÁî®Êèê‰æõÊûÅËá¥ÁöÑÁ®≥ÂÆöÊÄß‰∏éÊÄßËÉΩ„ÄÇ<br>
                      <span style="font-size: 11px; opacity: 0.6; margin-top: 8px; display: block;">Powered by <a
                          href="https://github.com/iwvw/API-Monitor" target="_blank"
                          style="color: inherit;">API-Monitor</a></span>
                    </p>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>

      <!-- Êó•ÂøóÊ®°ÊÄÅÊ°Ü -->
      <div v-if="showLogsModal" class="modal-overlay" :class="{ 'logs-fullscreen-overlay': logsFullscreen }"
        @keydown.esc="showLogsModal = false" tabindex="-1">
        <div class="modal logs-modal" :class="{ 'logs-modal-fullscreen': logsFullscreen }">
          <div class="logs-header">
            <div class="logs-title">üìã {{ logsModalTitle }}</div>
            <div class="logs-controls">
              <button class="btn btn-secondary" @click="toggleRealTimeRefresh"
                style="margin-right: 8px; padding: 6px 10px; font-size: 12px;">
                <i class="fas" :class="logsRealTime ? 'fa-stop' : 'fa-play'"></i>
                {{ logsRealTime ? 'ÂÅúÊ≠¢ÂÆûÊó∂' : 'ÂÆûÊó∂Âà∑Êñ∞' }}
              </button>
              <button class="btn btn-secondary" @click="toggleAutoScroll"
                style="margin-right: 8px; padding: 6px 10px; font-size: 12px;">
                <i class="fas" :class="logsAutoScroll ? 'fa-pause' : 'fa-play'"></i>
                {{ logsAutoScroll ? 'ÂÅúÊ≠¢ÊªöÂä®' : 'Ëá™Âä®ÊªöÂä®' }}
              </button>
              <button class="btn btn-secondary" @click="toggleFullscreen"
                style="margin-right: 8px; padding: 6px 10px; font-size: 12px;">
                <i class="fas" :class="logsFullscreen ? 'fa-compress' : 'fa-expand'"></i>
                {{ logsFullscreen ? 'ÈÄÄÂá∫ÂÖ®Â±è' : 'ÂÖ®Â±è' }}
              </button>
              <button class="btn btn-danger" @click="showLogsModal = false" style="padding: 6px 10px; font-size: 12px;">
                <i class="fas fa-times"></i>
                ÂÖ≥Èó≠
              </button>
            </div>
          </div>
          <div class="logs-info">
            <span>È°πÁõÆ: {{ logsModalInfo.project }}</span>
            <span>Ë¥¶Âè∑: {{ logsModalInfo.account }}</span>
            <span>Êó•Âøó: {{ logsModalInfo.count }} Êù°</span>
            <span>Êó∂Èó¥: {{ logsModalInfo.time }}</span>
          </div>
          <div class="logs-content" ref="logsContent" @wheel.stop @touchmove.stop>
            <div v-if="logsLoading" style="text-align: center; padding: 40px;">‚è≥ Ê≠£Âú®Âä†ËΩΩÊó•Âøó...</div>
            <div v-else class="logs-text-container" ref="logsTextContainer">
              <pre class="logs-text" ref="logsText">{{ logsContent || 'ÊöÇÊó†Êó•Âøó' }}</pre>
              <div class="logs-horizontal-scrollbar" ref="logsScrollbar">
                <div class="logs-scrollbar-thumb" ref="logsScrollbarThumb"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Toast Á≥ªÁªüÂÆπÂô®Â∞ÜÁî± toast.js Ëá™Âä®ÂàõÂª∫ -->

      <!-- Ëá™ÂÆö‰πâÁ°ÆËÆ§ÂØπËØùÊ°Ü -->
      <div v-if="customDialog.show" class="custom-dialog-overlay"
        @keydown.esc="customDialog.onCancel ? customDialog.onCancel() : (customDialog.show = false)"
        @keydown.enter="customDialog.onConfirm" tabindex="-1">
        <div class="custom-dialog">
          <div class="custom-dialog-title">
            <i class="fas" :class="customDialog.icon || 'fa-question-circle'"></i>
            {{ customDialog.title || 'Á°ÆËÆ§' }}
          </div>
          <div class="custom-dialog-message">{{ customDialog.message }}</div>
          <input v-if="customDialog.isPrompt" v-model="customDialog.promptValue" :placeholder="customDialog.placeholder"
            @keyup.enter="customDialog.onConfirm" class="custom-dialog-input" ref="promptInput" />
          <div class="custom-dialog-buttons">
            <button v-if="customDialog.cancelText" class="btn btn-secondary"
              @click="customDialog.onCancel ? customDialog.onCancel() : (customDialog.show = false)">
              {{ customDialog.cancelText }}
            </button>
            <button class="btn" :class="customDialog.confirmClass || 'btn-primary'" @click="customDialog.onConfirm">
              {{ customDialog.confirmText || 'Á°ÆÂÆö' }}
            </button>
          </div>
        </div>
      </div>

      <!-- Âá≠ÊçÆÁÆ°ÁêÜÊ®°ÊÄÅÊ°Ü -->
      <div v-if="showAddCredentialModal" class="modal-overlay" @click.self="showAddCredentialModal = false"
        @keydown.esc="showAddCredentialModal = false" tabindex="-1">
        <div class="modal server-modal" style="max-width: 380px;">
          <div class="modal-header">
            <div class="modal-title">
              <i class="fas fa-key"></i> ‰øùÂ≠òÊñ∞Âá≠ÊçÆ
            </div>
            <button class="modal-close" @click="showAddCredentialModal = false"><i class="fas fa-times"></i></button>
          </div>
          <div class="modal-body">
            <div class="server-form-section">
              <div class="form-group">
                <label><i class="fas fa-tag"></i> Âá≠ÊçÆÊ†áËØÜ</label>
                <input type="text" v-model="credForm.name" class="form-input" placeholder="‰æãÂ¶Ç: ÈªòËÆ§ÂØÜÁ†Å" />
              </div>
              <div class="form-group">
                <label><i class="fas fa-user"></i> Áî®Êà∑Âêç</label>
                <input type="text" v-model="credForm.username" class="form-input" placeholder="root" />
              </div>
              <div class="form-group">
                <label><i class="fas fa-lock"></i> ÂØÜÁ†Å</label>
                <input type="password" v-model="credForm.password" class="form-input" placeholder="ÁôªÂΩïÂØÜÁ†Å" />
              </div>
            </div>
            <div v-if="credError" class="server-form-error">
              <i class="fas fa-exclamation-circle"></i> {{ credError }}
            </div>
          </div>
          <div class="server-modal-footer">
            <button class="btn-server-cancel" @click="showAddCredentialModal = false">ÂèñÊ∂à</button>
            <button class="btn-server-save" @click="saveCredential">
              <i class="fas fa-save"></i> ‰øùÂ≠ò
            </button>
          </div>
        </div>
      </div>

      <!-- Docker ËØ¶ÁªÜÂàóË°®Ê®°ÊÄÅÊ°Ü -->
      <div v-if="showDockerModal" class="modal-overlay" @click.self="showDockerModal = false">
        <div class="modal-container glass-panel modal-lg" style="border-radius: 20px;">
          <div class="modal-header">
            <div class="modal-title">‰∫ëÂÆπÂô®ÁÆ°ÁêÜ - {{ dockerModalServer ? dockerModalServer.name : '' }}</div>
            <button class="close-btn" @click="showDockerModal = false">√ó</button>
          </div>
          <div class="modal-body">
            <div v-if="dockerModalData && dockerModalData.containers" class="docker-container-list">
              <div v-for="container in dockerModalData.containers" :key="container.id" class="docker-container-card"
                :class="{ 'running': container.status.includes('Up') }">
                <div class="docker-container-info">
                  <div class="docker-container-header-row">
                    <div>
                      <div style="font-weight: 700; font-size: 14px;">{{ container.name }}</div>
                      <div class="docker-container-image">{{ container.image }}</div>
                    </div>
                    <span class="docker-status-badge"
                      :class="container.status.includes('Up') ? 'status-running' : 'status-exited'">
                      {{ container.status }}
                    </span>
                  </div>
                  <div class="docker-container-ports">Á´ØÂè£: {{ container.ports }}</div>
                  <div class="docker-container-actions">
                    <button v-if="container.status.includes('Up')" class="btn btn-sm btn-secondary"
                      @click="handleDockerAction(dockerModalServer.id, container.id, 'stop')" title="ÂÅúÊ≠¢"><i
                        class="fas fa-stop"></i></button>
                    <button v-else class="btn btn-sm btn-success"
                      @click="handleDockerAction(dockerModalServer.id, container.id, 'start')" title="ÂêØÂä®"><i
                        class="fas fa-play"></i></button>
                    <button class="btn btn-sm btn-secondary"
                      @click="handleDockerAction(dockerModalServer.id, container.id, 'restart')" title="ÈáçÂêØ"><i
                        class="fas fa-redo"></i></button>
                  </div>
                </div>
              </div>
            </div>
            <div v-else class="loading">Ê≠£Âú®Ëé∑ÂèñÂÆπÂô®‰ø°ÊÅØ...</div>
          </div>
        </div>
      </div> <!-- Èó≠Âêà Docker ËØ¶ÁªÜÂàóË°®Ê®°ÊÄÅÊ°Ü -->

      <!-- ==================== Antigravity Ë¥¶Âè∑Ê®°ÊÄÅÊ°Ü ==================== -->
      <div v-if="showAntigravityAccountModal" class="modal-overlay" @keydown.esc="showAntigravityAccountModal = false">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">
              <i class="fas fa-atom"></i>
              {{ antigravityEditingAccount ? 'ÁºñËæëË¥¶Âè∑' : 'Ê∑ªÂä†Ë¥¶Âè∑' }}
            </div>
            <button class="modal-close" @click="showAntigravityAccountModal = false"><i
                class="fas fa-times"></i></button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label class="form-label">Ë¥¶Âè∑ÂêçÁß∞ *</label>
              <input v-model="antigravityAccountForm.name" class="form-input" placeholder="‰æãÂ¶Ç: Google Pro" />
            </div>
            <div class="form-group">
              <label class="form-label">Email (ÂèØÈÄâ)</label>
              <input v-model="antigravityAccountForm.email" class="form-input" placeholder="user@gmail.com" />
            </div>

            <div v-if="antigravityAccountFormError" class="form-error">{{ antigravityAccountFormError }}</div>
          </div>
          <div class="modal-footer ag-modal-footer">
            <button class="btn btn-primary" @click="saveAntigravityAccount" :disabled="antigravitySaving"
              style="flex: 1;">
              {{ antigravitySaving ? '‰øùÂ≠ò‰∏≠...' : 'Êèê‰∫§' }}
            </button>
            <button class="btn btn-secondary" @click="showAntigravityAccountModal = false" style="flex: 1;">ÂèñÊ∂à</button>
          </div>
        </div>
      </div>

      <!-- Antigravity ÊâãÂä®Ê∑ªÂä†Ê®°ÊÄÅÊ°Ü -->
      <div v-if="showAntigravityManualModal" class="modal-overlay" @click.self="showAntigravityManualModal = false">
        <div class="modal ag-modal-manual">
          <div class="modal-header">
            <div class="modal-title">ÊâãÂä®Ê∑ªÂä† Token</div>
            <button class="modal-close" @click="showAntigravityManualModal = false"><i
                class="fas fa-times"></i></button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label>Ë¥¶Âè∑ÂêçÁß∞ (ÂèØÈÄâ)</label>
              <input type="text" v-model="antigravityManualForm.name" class="form-input"
                placeholder="ÈªòËÆ§‰∏∫ Manual Account">
            </div>
            <div class="form-group">
              <label>Access Token <span style="color:red">*</span></label>
              <textarea v-model="antigravityManualForm.accessToken"
                class="form-textarea ag-form-textarea ag-form-textarea-lg" placeholder="ya29.a0..."></textarea>
            </div>
            <div class="form-group">
              <label>Refresh Token <span style="color:red">*</span></label>
              <textarea v-model="antigravityManualForm.refreshToken" class="form-textarea ag-form-textarea"
                placeholder="1//0..."></textarea>
            </div>
            <div class="form-row">
              <div class="form-group flex-1">
                <label>Project ID (ÂèØÈÄâ)</label>
                <input type="text" v-model="antigravityManualForm.projectId" class="form-input"
                  placeholder="Â¶ÇÊú™Â°´Â∞ÜÂ∞ùËØïËá™Âä®Ëé∑Âèñ">
              </div>
              <div class="form-group" style="flex: 0 0 120px;">
                <label>ÊúâÊïàÊúü (Áßí)</label>
                <input type="number" v-model="antigravityManualForm.expiresIn" class="form-input" placeholder="3599">
              </div>
            </div>
            <div v-if="antigravityManualFormError" class="form-error">{{ antigravityManualFormError }}</div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" @click="showAntigravityManualModal = false">ÂèñÊ∂à</button>
            <button class="btn btn-primary" @click="saveAntigravityManualAccount" :disabled="antigravitySaving">
              <i class="fas" :class="antigravitySaving ? 'fa-spinner fa-spin' : 'fa-save'"></i> ‰øùÂ≠ò
            </button>
          </div>
        </div>
      </div>

      <!-- ==================== Gemini CLI Ë¥¶Âè∑Ê®°ÊÄÅÊ°Ü ==================== -->
      <div v-if="showGeminiCliAccountModal" class="modal-overlay" @click.self="showGeminiCliAccountModal = false">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">
              <i class="fas fa-terminal"></i>
              {{ geminiCliEditingAccount ? 'ÁºñËæë Gemini Ë¥¶Âè∑' : 'Ê∑ªÂä† Gemini Ë¥¶Âè∑' }}
            </div>
            <button class="modal-close" @click="showGeminiCliAccountModal = false"><i class="fas fa-times"></i></button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label class="form-label">Â§áÊ≥®ÂêçÁß∞ <span style="color:red">*</span></label>
              <input v-model="geminiCliAccountForm.name" class="form-input" placeholder="‰æãÂ¶Ç: Gemini Project 1" />
            </div>
            <div class="form-group">
              <label class="form-label" style="display: flex; justify-content: space-between;">
                <span>Email Âú∞ÂùÄ (ÂèØÈÄâ)</span>
                <a href="javascript:void(0)" @click="fetchGeminiCliEmail"
                  style="font-size: 11px; text-decoration: none; color: var(--gemini-primary); line-height: 1.5; display: inline-flex; align-items: center;">
                  <i class="fas fa-magic"></i> Ëé∑ÂèñÂú∞ÂùÄ
                </a>
              </label>
              <input v-model="geminiCliAccountForm.email" class="form-input" placeholder="Ëá™Âä®Ëé∑ÂèñÊàñÊâãÂä®Â°´ÂÜô" />
            </div>
            <div class="form-group">
              <label class="form-label">Client ID <span style="color:red">*</span></label>
              <input v-model="geminiCliAccountForm.client_id" class="form-input"
                placeholder="717...-....apps.googleusercontent.com" />
            </div>
            <div class="form-group">
              <label class="form-label">Client Secret (ÂèØÈÄâ)</label>
              <input v-model="geminiCliAccountForm.client_secret" type="password" class="form-input"
                placeholder="GOCSPX-..." />
              <div style="font-size: 10px; opacity: 0.5; margin-top: 4px;">Â¶ÇÊûúÂá≠ÊçÆÂåÖÂê´ Client Secret ËØ∑Â°´ÂÜô„ÄÇ</div>
            </div>
            <div class="form-group">
              <label class="form-label">Refresh Token <span style="color:red">*</span></label>
              <textarea v-model="geminiCliAccountForm.refresh_token" class="form-textarea" placeholder="1//0..."
                style="min-height: 80px;"></textarea>
            </div>
            <div class="form-group">
              <label class="form-label">Project ID (ÂèØÈÄâ)</label>
              <input v-model="geminiCliAccountForm.project_id" class="form-input" placeholder="my-gemini-project" />
            </div>
            <div v-if="geminiCliAccountFormError" class="form-error">{{ geminiCliAccountFormError }}</div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" @click="showGeminiCliAccountModal = false">ÂèñÊ∂à</button>
            <button class="btn btn-primary" @click="saveGeminiCliAccount" :disabled="geminiCliSaving">
              <i class="fas" :class="geminiCliSaving ? 'fa-spinner fa-spin' : 'fa-save'"></i> ‰øùÂ≠òÂπ∂ÂêåÊ≠•
            </button>
          </div>
        </div>
      </div>

      <!-- Ê∑ªÂä† Zeabur Ë¥¶Âè∑Ê®°ÊÄÅÊ°Ü -->
      <div v-if="showAddZeaburAccountModal" class="modal-overlay" @keydown.esc="showAddZeaburAccountModal = false"
        @keydown.enter="addAccountToList" tabindex="-1">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">Ê∑ªÂä† Zeabur Ë¥¶Âè∑</div>
            <button class="modal-close" @click="showAddZeaburAccountModal = false"><i class="fas fa-times"></i></button>
          </div>

          <div class="form-group">
            <label class="form-label">Ë¥¶Âè∑ÂêçÁß∞ *</label>
            <input v-model="newAccount.name" class="form-input" placeholder="‰æãÂ¶Ç: ÊàëÁöÑË¥¶Âè∑" />
          </div>

          <div class="form-group">
            <label class="form-label">API Token *</label>
            <input v-model="newAccount.token" type="password" class="form-input" placeholder="sk-xxxxxxxxxxxxxxxx" />
            <div class="form-help">Âú® Zeabur ÊéßÂà∂Âè∞ÁöÑËÆæÁΩÆ‰∏≠ÂàõÂª∫ API Token</div>
          </div>

          <div v-if="addAccountError" class="form-error">{{ addAccountError }}</div>
          <div v-if="addAccountSuccess" class="form-success">{{ addAccountSuccess }}</div>

          <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button class="btn btn-primary" @click="addAccountToList" :disabled="addingAccount" style="flex: 1;">
              {{ addingAccount ? 'È™åËØÅ‰∏≠...' : 'Ê∑ªÂä†Ë¥¶Âè∑' }}
            </button>
            <button class="btn btn-secondary" @click="showAddZeaburAccountModal = false" style="flex: 1;">ÂèñÊ∂à</button>
          </div>
        </div>
      </div>

      <!-- ==================== DNS Áõ∏ÂÖ≥Ê®°ÊÄÅÊ°Ü ==================== -->
      <!-- Â∞ÜËøô‰∫õÊ®°ÊÄÅÊ°ÜÁßªÂá∫ tab-content ‰ª•‰øÆÂ§çÂõ†‰∏∫ will-change: transform ÂØºËá¥ÁöÑ fixed ÂÆö‰ΩçÂ§±ÊïàÂèäÊó†Ê≥ïÂ±Ö‰∏≠ÈóÆÈ¢ò -->

      <!-- Ê∑ªÂä† CF Ë¥¶Âè∑Ê®°ÊÄÅÊ°Ü -->
      <div v-if="showAddDnsAccountModal" class="modal-overlay" @keydown.esc="showAddDnsAccountModal = false"
        @keydown.enter="addDnsAccount" tabindex="-1">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">Ê∑ªÂä† Cloudflare Ë¥¶Âè∑</div>
            <button class="modal-close" @click="showAddDnsAccountModal = false"><i class="fas fa-times"></i></button>
          </div>

          <div class="form-group">
            <label class="form-label">Ë¥¶Âè∑ÂêçÁß∞ *</label>
            <input v-model="dnsAccountForm.name" class="form-input" placeholder="‰æãÂ¶Ç: ‰∏ªË¥¶Âè∑" />
          </div>

          <div class="form-group">
            <label class="form-label">API Token *</label>
            <input v-model="dnsAccountForm.apiToken" type="password" class="form-input"
              placeholder="Cloudflare API Token" />
            <div class="form-help">Âú® Cloudflare ÊéßÂà∂Âè∞ ‚Üí My Profile ‚Üí API Tokens ÂàõÂª∫</div>
          </div>

          <div class="form-group">
            <label class="form-label">ÈÇÆÁÆ±ÔºàÂèØÈÄâÔºâ</label>
            <input v-model="dnsAccountForm.email" class="form-input" placeholder="Áî®‰∫éÊ†áËØÜË¥¶Âè∑" />
          </div>

          <div v-if="dnsAccountFormError" class="form-error">{{ dnsAccountFormError }}</div>
          <div v-if="dnsAccountFormSuccess" class="form-success">{{ dnsAccountFormSuccess }}</div>

          <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button class="btn btn-primary" @click="addDnsAccount" :disabled="dnsSavingAccount" style="flex: 1;">
              {{ dnsSavingAccount ? 'È™åËØÅ‰∏≠...' : 'Ê∑ªÂä†Ë¥¶Âè∑' }}
            </button>
            <button class="btn btn-secondary" @click="showAddDnsAccountModal = false" style="flex: 1;">ÂèñÊ∂à</button>
          </div>
        </div>
      </div>

      <!-- ÁºñËæë CF Ë¥¶Âè∑Ê®°ÊÄÅÊ°Ü -->
      <div v-if="showEditDnsAccountModal" class="modal-overlay" @keydown.esc="showEditDnsAccountModal = false"
        @keydown.enter="updateDnsAccount" tabindex="-1">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">ÁºñËæë Cloudflare Ë¥¶Âè∑</div>
            <button class="modal-close" @click="showEditDnsAccountModal = false"><i class="fas fa-times"></i></button>
          </div>

          <div class="form-group">
            <label class="form-label">Ë¥¶Âè∑ÂêçÁß∞ *</label>
            <input v-model="dnsEditAccountForm.name" class="form-input" placeholder="‰æãÂ¶Ç: ‰∏ªË¥¶Âè∑" />
          </div>

          <div class="form-group">
            <label class="form-label">API Token *</label>
            <input v-model="dnsEditAccountForm.apiToken" type="password" class="form-input"
              placeholder="Cloudflare API Token" />
            <div class="form-help">ÁïôÁ©∫Ë°®Á§∫‰∏ç‰øÆÊîπ Token</div>
          </div>

          <div class="form-group">
            <label class="form-label">ÈÇÆÁÆ±ÔºàÂèØÈÄâÔºâ</label>
            <input v-model="dnsEditAccountForm.email" class="form-input" placeholder="Áî®‰∫éÊ†áËØÜË¥¶Âè∑" />
          </div>

          <div v-if="dnsEditAccountFormError" class="form-error">{{ dnsEditAccountFormError }}</div>
          <div v-if="dnsEditAccountFormSuccess" class="form-success">{{ dnsEditAccountFormSuccess }}</div>

          <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button class="btn btn-primary" @click="updateDnsAccount" :disabled="dnsSavingAccount" style="flex: 1;">
              {{ dnsSavingAccount ? '‰øùÂ≠ò‰∏≠...' : '‰øùÂ≠ò‰øÆÊîπ' }}
            </button>
            <button class="btn btn-secondary" @click="showEditDnsAccountModal = false" style="flex: 1;">ÂèñÊ∂à</button>
          </div>
        </div>
      </div>

      <!-- Ê∑ªÂä†/ÁºñËæë DNS ËÆ∞ÂΩïÊ®°ÊÄÅÊ°Ü -->
      <div v-if="showDnsRecordModal" class="modal-overlay" @keydown.esc="showDnsRecordModal = false"
        @keydown.enter="saveDnsRecord" tabindex="-1">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">{{ dnsEditingRecord ? 'ÁºñËæë DNS ËÆ∞ÂΩï' : 'Ê∑ªÂä† DNS ËÆ∞ÂΩï' }}</div>
            <button class="modal-close" @click="showDnsRecordModal = false"><i class="fas fa-times"></i></button>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <div class="form-group">
              <label class="form-label">Á±ªÂûã *</label>
              <select v-model="dnsRecordForm.type" class="form-input" :disabled="!!dnsEditingRecord">
                <option v-for="t in dnsRecordTypes" :key="t" :value="t">{{ t }}</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">ÂêçÁß∞ *</label>
              <input v-model="dnsRecordForm.name" class="form-input" placeholder="@ Êàñ www" />
              <div class="form-help">@ Ë°®Á§∫Ê†πÂüüÂêç</div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">ÂÜÖÂÆπ *</label>
            <input v-model="dnsRecordForm.content" class="form-input" placeholder="IP Âú∞ÂùÄÊàñÁõÆÊ†áÂüüÂêç" />
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
            <div class="form-group" style="margin-bottom: 0;">
              <label class="form-label">TTL</label>
              <select v-model="dnsRecordForm.ttl" class="form-input">
                <option :value="1">Auto</option>
                <option :value="60">1 ÂàÜÈíü</option>
                <option :value="300">5 ÂàÜÈíü</option>
                <option :value="600">10 ÂàÜÈíü</option>
                <option :value="3600">1 Â∞èÊó∂</option>
                <option :value="86400">1 Â§©</option>
              </select>
            </div>
            <div class="form-group" style="margin-bottom: 0;" v-if="canDnsBeProxied(dnsRecordForm.type)">
              <label class="form-label" style="display: flex; align-items: center; justify-content: space-between;">
                CDN ‰ª£ÁêÜ
                <label class="switch" style="transform: scale(0.85); transform-origin: right;">
                  <input type="checkbox" v-model="dnsRecordForm.proxied" />
                  <span class="slider round"></span>
                </label>
              </label>
              <div class="form-help" style="margin-top: 5px; font-size: 10px;">ÈÄöËøá Cloudflare ËæπÁºòÂä†ÈÄü</div>
            </div>
            <div class="form-group" v-if="dnsRecordForm.type === 'MX'" style="margin-bottom: 0;">
              <label class="form-label">‰ºòÂÖàÁ∫ß</label>
              <input v-model.number="dnsRecordForm.priority" type="number" class="form-input" placeholder="10" />
            </div>
          </div>

          <div v-if="dnsRecordFormError" class="form-error">{{ dnsRecordFormError }}</div>

          <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button class="btn btn-primary" @click="saveDnsRecord" :disabled="dnsSavingRecord" style="flex: 1;">
              {{ dnsSavingRecord ? '‰øùÂ≠ò‰∏≠...' : '‰øùÂ≠ò' }}
            </button>
            <button class="btn btn-secondary" @click="showDnsRecordModal = false" style="flex: 1;">ÂèñÊ∂à</button>
          </div>
        </div>
      </div>

      <!-- Ê∑ªÂä†/ÁºñËæëÊ®°ÊùøÊ®°ÊÄÅÊ°Ü -->
      <div v-if="showDnsTemplateModal" class="modal-overlay" @keydown.esc="showDnsTemplateModal = false"
        @keydown.enter="saveDnsTemplate" tabindex="-1">
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">{{ dnsEditingTemplate ? 'ÁºñËæëÊ®°Êùø' : 'Ê∑ªÂä†Ê®°Êùø' }}</div>
            <button class="modal-close" @click="showDnsTemplateModal = false"><i class="fas fa-times"></i></button>
          </div>

          <div class="form-group">
            <label class="form-label">Ê®°ÊùøÂêçÁß∞ *</label>
            <input v-model="dnsTemplateForm.name" class="form-input" placeholder="‰æãÂ¶Ç: CDN ËÆ∞ÂΩï" />
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <div class="form-group">
              <label class="form-label">ËÆ∞ÂΩïÁ±ªÂûã *</label>
              <select v-model="dnsTemplateForm.type" class="form-input">
                <option v-for="t in dnsRecordTypes" :key="t" :value="t">{{ t }}</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">TTL</label>
              <select v-model="dnsTemplateForm.ttl" class="form-input">
                <option :value="1">Auto</option>
                <option :value="300">5 ÂàÜÈíü</option>
                <option :value="3600">1 Â∞èÊó∂</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">ÂÜÖÂÆπ *</label>
            <input v-model="dnsTemplateForm.content" class="form-input" placeholder="IP Âú∞ÂùÄÊàñÁõÆÊ†áÂüüÂêç" />
          </div>

          <div class="form-group">
            <label class="form-label">ÊèèËø∞ÔºàÂèØÈÄâÔºâ</label>
            <input v-model="dnsTemplateForm.description" class="form-input" placeholder="Ê®°ÊùøÁî®ÈÄîËØ¥Êòé" />
          </div>

          <div class="form-group" v-if="canDnsBeProxied(dnsTemplateForm.type)">
            <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
              <input type="checkbox" v-model="dnsTemplateForm.proxied" style="width: 16px; height: 16px;" />
              ÂêØÁî® Cloudflare ‰ª£ÁêÜ
            </label>
          </div>

          <div v-if="dnsTemplateFormError" class="form-error">{{ dnsTemplateFormError }}</div>

          <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button class="btn btn-primary" @click="saveDnsTemplate" :disabled="dnsSavingTemplate" style="flex: 1;">
              {{ dnsSavingTemplate ? '‰øùÂ≠ò‰∏≠...' : '‰øùÂ≠ò' }}
            </button>
            <button class="btn btn-secondary" @click="showDnsTemplateModal = false" style="flex: 1;">ÂèñÊ∂à</button>
          </div>
        </div>
      </div>

  </div> <!-- Èó≠Âêà isAuthenticated container -->
  </div> <!-- Èó≠Âêà app -->



  <!-- Ê®°ÂùóÂåñ JavaScript -->
  <script type="module" src="/js/main.js"></script>
</body>

</html>